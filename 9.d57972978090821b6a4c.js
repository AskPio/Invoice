(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{5756:function(e,t,n){var i=function(){"use strict";return i=function(e){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},i.prototype._singletonInstance)return i.prototype._singletonInstance;if(i.prototype._singletonInstance=this,this.instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,e.displayCall&&"function"!=typeof e.displayCall)throw new Error("displayCall is not a function");if(!e.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(e),void 0===this.config.navigateToLoginRequestUrl&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&"function"==typeof this.config.callback&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},"undefined"!=typeof window&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(e){}}),i.prototype.login=function(){if(this._loginInProgress)this.info("Login in progress");else{this._loginInProgress=!0;var e=this._guid();this.config.state=e,this._idTokenNonce=this._guid();var t=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST);t&&""!==t?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):t=window.location.href,this.verbose("Expected state: "+e+" startPage:"+t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,e,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var n=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce);this.config.displayCall?this.config.displayCall(n):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(e),this.registerCallback(e,this.config.clientId,this.callback),this._loginPopup(n)):this.promptUser(n)}},i.prototype._openPopup=function(e,t,n,i){try{var l=window.screenLeft?window.screenLeft:window.screenX,r=window.screenTop?window.screenTop:window.screenY,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=window.open(e,t,"width="+n+", height="+i+", top="+(s/2-i/2+r)+", left="+(o/2-n/2+l));return a.focus&&a.focus(),a}catch(u){return this.warn("Error opening popup, "+u.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},i.prototype._handlePopupError=function(e,t,n,i,l){this.warn(i),this._saveItem(this.CONSTANTS.STORAGE.ERROR,n),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,i),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,l),t&&this._activeRenewals[t]&&(this._activeRenewals[t]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,e&&e(i,null,n)},i.prototype._loginPopup=function(e,t,n){var i=this._openPopup(e,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),l=n||this.callback;if(null!=i){if(this._openedWindows.push(i),-1!=this.config.redirectUri.indexOf("#"))var r=this.config.redirectUri.split("#")[0];else r=this.config.redirectUri;var o=this,s=window.setInterval(function(){if(!i||i.closed||void 0===i.closed){var e="Popup Window closed",n="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return o.isAngular&&o._broadcast("adal:popUpClosed",n+o.CONSTANTS.RESOURCE_DELIMETER+e),o._handlePopupError(l,t,e,n,n),void window.clearInterval(s)}try{var a=i.location;if(-1!=encodeURI(a.href).indexOf(encodeURI(r)))return o.isAngular?o._broadcast("adal:popUpHashChanged",a.hash):o.handleWindowCallback(a.hash),window.clearInterval(s),o._loginInProgress=!1,o._acquireTokenInProgress=!1,o.info("Closing popup window"),o._openedWindows=[],void i.close()}catch(u){}},1)}else{var a="Popup Window is null. This can happen if you are using IE";this._handlePopupError(l,t,"Error opening popup",a,a)}},i.prototype._broadcast=function(e,t){!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},i.prototype.loginInProgress=function(){return this._loginInProgress},i.prototype._hasResource=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return t&&!this._isEmpty(t)&&t.indexOf(e+this.CONSTANTS.RESOURCE_DELIMETER)>-1},i.prototype.getCachedToken=function(e){if(!this._hasResource(e))return null;var t=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e),n=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e),i=this.config.expireOffsetSeconds||300;return n&&n>this._now()+i?t:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0),null)},i.prototype.getCachedUser=function(){if(this._user)return this._user;var e=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(e),this._user},i.prototype.registerCallback=function(e,t,n){this._activeRenewals[t]=e,this._callBacksMappedToRenewStates[e]||(this._callBacksMappedToRenewStates[e]=[]);var i=this;this._callBacksMappedToRenewStates[e].push(n),this._callBackMappedToRenewStates[e]||(this._callBackMappedToRenewStates[e]=function(n,l,r,o){i._activeRenewals[t]=null;for(var s=0;s<i._callBacksMappedToRenewStates[e].length;++s)try{i._callBacksMappedToRenewStates[e][s](n,l,r,o)}catch(r){i.warn(r)}i._callBacksMappedToRenewStates[e]=null,i._callBackMappedToRenewStates[e]=null})},i.prototype._renewToken=function(e,t,n){this.info("renewToken is called for resource:"+e);var i=this._addAdalFrame("adalRenewFrame"+e),l=this._guid()+"|"+e;this.config.state=l,this._renewStates.push(l),this.verbose("Renew token Expected state: "+l);var r=this._urlRemoveQueryStringParameter(this._getNavigateUrl(n=n||"token",e),"prompt");n===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),r+="&nonce="+encodeURIComponent(this._idTokenNonce)),r=this._addHintParameters(r+="&prompt=none"),this.registerCallback(l,e,t),this.verbosePii("Navigate to:"+r),i.src="about:blank",this._loadFrameTimeout(r,"adalRenewFrame"+e,e)},i.prototype._renewIdToken=function(e,t){this.info("renewIdToken is called");var n=this._addAdalFrame("adalIdTokenFrame"),i=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=i,this._renewStates.push(i),this.verbose("Renew Idtoken Expected state: "+i);var l=null==t?null:this.config.clientId,r=this._urlRemoveQueryStringParameter(this._getNavigateUrl(t=t||"id_token",l),"prompt");r=this._addHintParameters(r+="&prompt=none"),r+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(i,this.config.clientId,e),this.verbosePii("Navigate to:"+r),n.src="about:blank",this._loadFrameTimeout(r,"adalIdTokenFrame",this.config.clientId)},i.prototype._urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},i.prototype._urlRemoveQueryStringParameter=function(e,t){var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e.replace(n,"")},i.prototype._loadFrameTimeout=function(e,t,n){this.verbose("Set loading state to pending for: "+n),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(e,t);var i=this;setTimeout(function(){if(i._getItem(i.CONSTANTS.STORAGE.RENEW_STATUS+n)===i.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS){i.verbose("Loading frame has timed out after: "+i.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+n);var e=i._activeRenewals[n];e&&i._callBackMappedToRenewStates[e]&&i._callBackMappedToRenewStates[e]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),i._saveItem(i.CONSTANTS.STORAGE.RENEW_STATUS+n,i.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED)}},i.CONSTANTS.LOADFRAME_TIMEOUT)},i.prototype._loadFrame=function(e,t){var n=this;n.info("LoadFrame: "+t);var i=t;setTimeout(function(){var t=n._addAdalFrame(i);""!==t.src&&"about:blank"!==t.src||(t.src=e,n._loadFrame(e,i))},500)},i.prototype.acquireToken=function(e,t){if(this._isEmpty(e))return this.warn("resource is required"),void t("resource is required",null,"resource is required");var n=this.getCachedToken(e);return n?(this.info("Token is already in cache for resource:"+e),void t(null,n,null)):this._user||this.config.extraQueryParameter&&-1!==this.config.extraQueryParameter.indexOf("login_hint")?void(this._activeRenewals[e]?this.registerCallback(this._activeRenewals[e],e,t):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,e===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(t)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(e,t)):(this.verbose("renewing idtoken and access_token"),this._renewToken(e,t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void t("User login is required",null,"login required"))},i.prototype.acquireTokenPopup=function(e,t,n,i){if(this._isEmpty(e))return this.warn("resource is required"),void i("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void i("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void i("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var l=this._guid()+"|"+e;this.config.state=l,this._renewStates.push(l),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+l);var r=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(r+="&prompt=select_account",t&&(r+=t),n&&-1===r.indexOf("&claims"))r+="&claims="+encodeURIComponent(n);else if(n&&-1!==r.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");r=this._addHintParameters(r),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this.registerCallback(l,e,i),this._loginPopup(r,e,i)},i.prototype.acquireTokenRedirect=function(e,t,n){if(this._isEmpty(e))return this.warn("resource is required"),void i("resource is required",null,"resource is required");var i=this.callback;if(!this._user)return this.warn("User login is required"),void i("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void i("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var l=this._guid()+"|"+e;this.config.state=l,this.verbose("Renew token Expected state: "+l);var r=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(r+="&prompt=select_account",t&&(r+=t),n&&-1===r.indexOf("&claims"))r+="&claims="+encodeURIComponent(n);else if(n&&-1!==r.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");r=this._addHintParameters(r),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,l,!0),this.promptUser(r)},i.prototype.promptUser=function(e){e?(this.infoPii("Navigate to:"+e),window.location.replace(e)):this.info("Navigate url is empty")},i.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(e)){e=e.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var t=0;t<e.length&&""!==e[t];t++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e[t],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e[t],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},i.prototype.clearCacheForResource=function(e){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(e)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0))},i.prototype.logOut=function(){var e;if(this.clearCache(),this._user=null,this.config.logOutUri)e=this.config.logOutUri;else{var t="common",n="";this.config.tenant&&(t=this.config.tenant),this.config.postLogoutRedirectUri&&(n="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),e=this.instance+t+"/oauth2/logout?"+n}this.infoPii("Logout navigate to: "+e),this.promptUser(e)},i.prototype._isEmpty=function(e){return void 0===e||!e||0===e.length},i.prototype.getUser=function(e){if("function"!=typeof e)throw new Error("callback is not a function");if(this._user)e(null,this._user);else{var t=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);this._isEmpty(t)?(this.warn("User information is not available"),e("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(t),e(null,this._user))}},i.prototype._addHintParameters=function(e){if(this._user&&this._user.profile)if(this._user.profile.sid&&-1!==e.indexOf("&prompt=none"))this._urlContainsQueryStringParameter("sid",e)||(e+="&sid="+encodeURIComponent(this._user.profile.sid));else if(this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",e)||(e+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",e)&&this._user.profile.upn.indexOf("@")>-1)){var t=this._user.profile.upn.split("@");e+="&domain_hint="+encodeURIComponent(t[t.length-1])}return e},i.prototype._createUser=function(e){var t=null,n=this._extractIdToken(e);return n&&n.hasOwnProperty("aud")&&(n.aud.toLowerCase()===this.config.clientId.toLowerCase()?(t={userName:"",profile:n},n.hasOwnProperty("upn")?t.userName=n.upn:n.hasOwnProperty("email")&&(t.userName=n.email)):this.warn("IdToken has invalid aud field")),t},i.prototype._getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},i.prototype.isCallback=function(e){e=this._getHash(e);var t=this._deserialize(e);return t.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},i.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},i.prototype.getRequestInfo=function(e){e=this._getHash(e);var t=this._deserialize(e),n={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(t&&(n.parameters=t,t.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){if(n.valid=!0,!t.hasOwnProperty("state"))return this.warn("No state returned"),n;if(this.verbose("State: "+t.state),n.stateResponse=t.state,this._matchState(n))return n;if(!n.stateMatch&&window.parent){n.requestType=this._requestType;for(var i=this._renewStates,l=0;l<i.length;l++)if(i[l]===n.stateResponse){n.stateMatch=!0;break}}}return n},i.prototype._matchNonce=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN);if(t){t=t.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<t.length;n++)if(t[n]===e.profile.nonce)return!0}return!1},i.prototype._matchState=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN);if(t){t=t.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<t.length;n++)if(t[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.LOGIN,e.stateMatch=!0,!0}var i=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW);if(i)for(i=i.split(this.CONSTANTS.CACHE_DELIMETER),n=0;n<i.length;n++)if(i[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.RENEW_TOKEN,e.stateMatch=!0,!0;return!1},i.prototype._getResourceFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},i.prototype.saveTokenFromHash=function(e){this.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var t,n=this._getResourceFromState(e.stateResponse);e.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+e.parameters.error+"; Error description:"+e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,e.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),e.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,e.parameters.error_description))):e.stateMatch?(this.info("State is right"),e.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,e.parameters[this.CONSTANTS.SESSION_STATE]),e.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(n)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._expiresIn(e.parameters[this.CONSTANTS.EXPIRES_IN]))),e.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(e.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,e.parameters[this.CONSTANTS.ID_TOKEN]),this._hasResource(n=this.config.loginResource?this.config.loginResource:this.config.clientId)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(e.parameters.error="invalid id_token",e.parameters.error_description="Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN])))):(e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+e.stateResponse)),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},i.prototype.getResourceForEndpoint=function(e){if(this.config&&this.config.anonymousEndpoints)for(var t=0;t<this.config.anonymousEndpoints.length;t++)if(e.indexOf(this.config.anonymousEndpoints[t])>-1)return null;if(this.config&&this.config.endpoints)for(var n in this.config.endpoints)if(e.indexOf(n)>-1)return this.config.endpoints[n];return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this._getHostFromUri(e)===this._getHostFromUri(this.config.redirectUri)?this.config.loginResource:null:this.config.loginResource},i.prototype._getHostFromUri=function(e){return String(e).replace(/^(https?:)\/\//,"").split("/")[0]},i.prototype.handleWindowCallback=function(e){if(null==e&&(e=window.location.hash),this.isCallback(e)){var t=null,n=!1;this._openedWindows.length>0&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(t=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,n=!0):window.parent&&window.parent._adalInstance&&(t=window.parent._adalInstance);var i,l,r=t.getRequestInfo(e),o=null;l=n||window.parent!==window?t._callBackMappedToRenewStates[r.stateResponse]:t.callback,t.info("Returned from redirect url"),t.saveTokenFromHash(r),r.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?t.verbose("Window is in iframe, acquiring token silently"):t.verbose("acquiring token interactive in progress"),i=r.parameters[t.CONSTANTS.ACCESS_TOKEN]||r.parameters[t.CONSTANTS.ID_TOKEN],o=t.CONSTANTS.ACCESS_TOKEN):r.requestType===this.REQUEST_TYPE.LOGIN&&(i=r.parameters[t.CONSTANTS.ID_TOKEN],o=t.CONSTANTS.ID_TOKEN);var s=r.parameters[t.CONSTANTS.ERROR_DESCRIPTION],a=r.parameters[t.CONSTANTS.ERROR];try{l&&l(s,i,a,o)}catch(u){t.error("Error occurred in user defined callback function: "+u)}window.parent!==window||n||(t.config.navigateToLoginRequestUrl?window.location.href=t._getItem(t.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},i.prototype._getNavigateUrl=function(e,t){var n="common";this.config.tenant&&(n=this.config.tenant);var i=this.instance+n+"/oauth2/authorize"+this._serialize(e,this.config,t)+this._addLibMetadata();return this.info("Navigate url:"+i),i},i.prototype._extractIdToken=function(e){var t=this._decodeJwt(e);if(!t)return null;try{var n=this._base64DecodeStringUrlSafe(t.JWSPayload);return n?JSON.parse(n):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(i){this.error("The returned id_token could not be decoded",i)}return null},i.prototype._base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(e))):decodeURIComponent(escape(this._decode(e)))},i.prototype._decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var i,l,r,o,s,a,u,c="",d=0;d<n;d+=4){if(i=t.indexOf(e.charAt(d)),l=t.indexOf(e.charAt(d+1)),r=t.indexOf(e.charAt(d+2)),o=t.indexOf(e.charAt(d+3)),d+2===n-1){a=(s=i<<18|l<<12|r<<6)>>16&255,u=s>>8&255,c+=String.fromCharCode(a,u);break}if(d+1===n-1){a=(s=i<<18|l<<12)>>16&255,c+=String.fromCharCode(a);break}a=(s=i<<18|l<<12|r<<6|o)>>16&255,u=s>>8&255,c+=String.fromCharCode(a,u,255&s)}return c},i.prototype._decodeJwt=function(e){if(this._isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?(this.warn("The returned id_token is not parseable."),null):{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},i.prototype._convertUrlSafeToRegularBase64EncodedString=function(e){return e.replace("-","+").replace("_","/")},i.prototype._serialize=function(e,t,n){var i=[];if(null!==t){i.push("?response_type="+e),i.push("client_id="+encodeURIComponent(t.clientId)),n&&i.push("resource="+encodeURIComponent(n)),i.push("redirect_uri="+encodeURIComponent(t.redirectUri)),i.push("state="+encodeURIComponent(t.state)),t.hasOwnProperty("slice")&&i.push("slice="+encodeURIComponent(t.slice)),t.hasOwnProperty("extraQueryParameter")&&i.push(t.extraQueryParameter);var l=t.correlationId?t.correlationId:this._guid();i.push("client-request-id="+encodeURIComponent(l))}return i.join("&")},i.prototype._deserialize=function(e){var t,n=/\+/g,i=/([^&=]+)=([^&]*)/g,l=function(e){return decodeURIComponent(e.replace(n," "))},r={};for(t=i.exec(e);t;)r[l(t[1])]=l(t[2]),t=i.exec(e);return r},i.prototype._decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},i.prototype._guid=function(){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){var t=new Uint8Array(16);return e.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,this._decimalToHex(t[0])+this._decimalToHex(t[1])+this._decimalToHex(t[2])+this._decimalToHex(t[3])+"-"+this._decimalToHex(t[4])+this._decimalToHex(t[5])+"-"+this._decimalToHex(t[6])+this._decimalToHex(t[7])+"-"+this._decimalToHex(t[8])+this._decimalToHex(t[9])+"-"+this._decimalToHex(t[10])+this._decimalToHex(t[11])+this._decimalToHex(t[12])+this._decimalToHex(t[13])+this._decimalToHex(t[14])+this._decimalToHex(t[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",i="0123456789abcdef",l=0,r="",o=0;o<36;o++)"-"!==n[o]&&"4"!==n[o]&&(l=16*Math.random()|0),"x"===n[o]?r+=i[l]:"y"===n[o]?(l&=3,r+=i[l|=8]):r+=n[o];return r},i.prototype._expiresIn=function(e){return e||(e=3599),this._now()+parseInt(e,10)},i.prototype._now=function(){return Math.round((new Date).getTime()/1e3)},i.prototype._addAdalFrame=function(e){if(void 0!==e){this.info("Add adal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&(window.opera||-1===window.navigator.userAgent.indexOf("MSIE 5.0"))){var n=document.createElement("iframe");n.setAttribute("id",e),n.setAttribute("aria-hidden","true"),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height=n.borderWidth="0px",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+e+'" id="'+e+'" style="display:none"></iframe>');window.frames&&window.frames[e]&&(t=window.frames[e])}return t}},i.prototype._saveItem=function(e,t,n){if(this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation){if(!this._supportsLocalStorage())return this.info("Local storage is not supported"),!1;if(n){var i=this._getItem(e)||"";localStorage.setItem(e,i+t+this.CONSTANTS.CACHE_DELIMETER)}else localStorage.setItem(e,t);return!0}return this._supportsSessionStorage()?(sessionStorage.setItem(e,t),!0):(this.info("Session storage is not supported"),!1)},i.prototype._getItem=function(e){return this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation?this._supportsLocalStorage()?localStorage.getItem(e):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(e):(this.info("Session storage is not supported"),null)},i.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),"A"==window.localStorage.getItem("storageTest")&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch(e){return!1}},i.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),"A"==window.sessionStorage.getItem("storageTest")&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch(e){return!1}},i.prototype._cloneConfig=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},i.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},i.prototype.log=function(e,t,n,i){if(e<=Logging.level){if(!Logging.piiLoggingEnabled&&i)return;var l=(new Date).toUTCString(),r="";r=this.config.correlationId?l+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t:l+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t,n&&(r+="\nstack:\n"+n.stack),Logging.log(r)}},i.prototype.error=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t)},i.prototype.warn=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null)},i.prototype.info=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null)},i.prototype.verbose=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null)},i.prototype.errorPii=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t,!0)},i.prototype.warnPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null,!0)},i.prototype.infoPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null,!0)},i.prototype.verbosePii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null,!0)},i.prototype._libVersion=function(){return"1.0.17"},e.exports&&(e.exports=i,e.exports.inject=function(e){return new i(e)}),i}()},DPfx:function(e,t,n){"use strict";n.r(t);var i=n("CcnG"),l=n("+yPr");function r(){return(new l.a).map("recaptcha",abp.localization.currentLanguage.name)}var o=function(){return function(){}}(),s=n("z5nN"),a=n("pMnS"),u=n("Ip0R"),c=n("gIcY"),d=n("S8ex"),h=n("O7Fb"),p=n("kPyj"),g=n("DQlY"),f=n("lqqz"),m=n("mrSG"),v=n("Q86s"),y=n("KALY"),S=(n("Jc0W"),n("2WpN")),b=function(e){function t(t,n){var i=e.call(this,n)||this;return i._accountService=t,i.tenancyName="",i.tenancyNameBuffer="",i.submitButtonText="",i.isSwitchToTenant=!1,i.active=!1,i.saving=!1,i}return Object(m.d)(t,e),t.prototype.focusTenancyNameInput=function(){setTimeout(function(){document.getElementById("tenancyNameInput").focus()},100)},t.prototype.updateSubmitButtonText=function(){this.submitButtonText=this.l(this.isSwitchToTenant?"SwitchToTheTenant":"SwitchToTheHost")},t.prototype.show=function(e){this.tenancyName=e,this.isSwitchToTenant=!!e,this.updateSubmitButtonText(),this.active=!0,this.modal.show()},t.prototype.onShown=function(){this.focusTenancyNameInput()},t.prototype.switchToTenant=function(e){e.target.checked?(this.tenancyName=this.tenancyNameBuffer,this.focusTenancyNameInput()):(this.tenancyNameBuffer=this.tenancyName,this.tenancyName=""),this.updateSubmitButtonText()},t.prototype.save=function(){var e=this;if(!this.tenancyName)return abp.multiTenancy.setTenantIdCookie(void 0),this.close(),void location.replace(location.origin);var t=new y.pb;t.tenancyName=this.tenancyName,this.saving=!0,this._accountService.isTenantAvailable(t).pipe(Object(S.a)(function(){e.saving=!1})).subscribe(function(t){switch(t.state){case y.nc.Available:return abp.multiTenancy.setTenantIdCookie(t.tenantId),e.close(),void location.replace(location.origin);case y.nc.InActive:e.message.warn(e.l("TenantIsNotActive",e.tenancyName)),e.focusTenancyNameInput();break;case y.nc.NotFound:e.message.warn(e.l("ThereIsNoTenantDefinedWithName{0}",e.tenancyName)),e.focusTenancyNameInput()}})},t.prototype.close=function(){this.active=!1,this.modal.hide()},t}(v.a),C=i["ɵcrt"]({encapsulation:2,styles:[],data:{}});function _(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"span",[["class","form-text text-danger text-left"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent.parent,0),"TenancyNameRequired"));e(t,1,0,n)})}function w(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,55,"form",[["class","kt-form kt-form--label-right"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,2).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,2).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.save()&&l),l},null,null)),i["ɵdid"](1,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](2,4210688,[["changeTenantForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](4,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](5,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,3,"h5",[["class","modal-title"]],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](8,null,["",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,0,"button",[["aria-hidden","true"],["class","close"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.close()&&i),i},null,null)),(e()(),i["ɵeld"](11,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,13,"div",[["class","form-group row text-left mb-0"]],null,null,null,null,null)),(e()(),i["ɵeld"](13,0,null,null,2,"label",[["class","col-4 col-form-label"]],null,null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),i["ɵppd"](15,1),(e()(),i["ɵeld"](16,0,null,null,9,"div",[["class","col"]],null,null,null,null,null)),(e()(),i["ɵeld"](17,0,null,null,8,"span",[["class","kt-switch kt-switch--icon"]],null,null,null,null,null)),(e()(),i["ɵeld"](18,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,5,"input",[["checked","checked"],["name","SwitchToTenant"],["type","checkbox"]],[[8,"value",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var l=!0,r=e.component;return"change"===t&&(l=!1!==i["ɵnov"](e,20).onChange(n.target.checked)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,20).onTouched()&&l),"ngModelChange"===t&&(l=!1!==(r.isSwitchToTenant=n)&&l),"change"===t&&(l=!1!==r.switchToTenant(n)&&l),l},null,null)),i["ɵdid"](20,16384,null,0,c.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.CheckboxControlValueAccessor]),i["ɵdid"](22,671744,null,0,c.NgModel,[[2,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](24,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(e()(),i["ɵeld"](25,0,null,null,0,"span",[],null,null,null,null,null)),(e()(),i["ɵeld"](26,0,null,null,20,"div",[["class","form-group row mb-0"]],null,null,null,null,null)),(e()(),i["ɵeld"](27,0,null,null,3,"label",[["class","col-4 col-form-label"]],null,null,null,null,null)),(e()(),i["ɵeld"](28,0,null,null,2,"label",[],null,null,null,null,null)),(e()(),i["ɵted"](29,null,["",""])),i["ɵppd"](30,1),(e()(),i["ɵeld"](31,0,null,null,15,"label",[["class","col"]],null,null,null,null,null)),(e()(),i["ɵeld"](32,0,null,null,12,"input",[["class","form-control"],["id","tenancyNameInput"],["maxlength","64"],["name","tenancyNameInput"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,36)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,36).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,36)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,36)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.tenancyName=n)&&l),l},null,null)),i["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](34,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](35,{edited:0}),i["ɵdid"](36,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](37,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](38,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](41,671744,[[2,4],["tenancyNameInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](43,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](44,1),(e()(),i["ɵand"](16777216,null,null,1,null,_)),i["ɵdid"](46,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](47,0,null,null,8,"div",[["class","modal-footer"]],null,null,null,null,null)),(e()(),i["ɵeld"](48,0,null,null,2,"button",[["class","btn btn-secondary close-button"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.close()&&i),i},null,null)),(e()(),i["ɵted"](49,null,[" "," "])),i["ɵppd"](50,1),(e()(),i["ɵeld"](51,0,null,null,4,"button",[["class","btn btn-primary save-button"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["ɵdid"](52,4276224,null,0,d.a,[i.ElementRef,h.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(e()(),i["ɵeld"](53,0,null,null,0,"i",[["class","fa fa-arrow-circle-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](54,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](55,null,["",""]))],function(e,t){var n=t.component;e(t,22,0,"SwitchToTenant",n.isSwitchToTenant);var l=e(t,35,0,n.tenancyName);e(t,34,0,"form-control",l),e(t,37,0,""),e(t,38,0,"64"),e(t,41,0,"tenancyNameInput",!n.isSwitchToTenant,n.tenancyName),e(t,46,0,n.isSwitchToTenant&&!i["ɵnov"](t,41).pristine&&!n.tenancyName),e(t,52,0,n.saving,n.l("ProcessingWithThreeDot"))},function(e,t){var n=t.component;e(t,0,0,i["ɵnov"](t,4).ngClassUntouched,i["ɵnov"](t,4).ngClassTouched,i["ɵnov"](t,4).ngClassPristine,i["ɵnov"](t,4).ngClassDirty,i["ɵnov"](t,4).ngClassValid,i["ɵnov"](t,4).ngClassInvalid,i["ɵnov"](t,4).ngClassPending);var l=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"ChangeTenant"));e(t,8,0,l);var r=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"SwitchToTenant"));e(t,14,0,r),e(t,19,0,i["ɵinlineInterpolate"](1,"",n.isSwitchToTenant?"true":"false",""),i["ɵnov"](t,24).ngClassUntouched,i["ɵnov"](t,24).ngClassTouched,i["ɵnov"](t,24).ngClassPristine,i["ɵnov"](t,24).ngClassDirty,i["ɵnov"](t,24).ngClassValid,i["ɵnov"](t,24).ngClassInvalid,i["ɵnov"](t,24).ngClassPending);var o=i["ɵunv"](t,29,0,e(t,30,0,i["ɵnov"](t.parent,0),"TenancyName"));e(t,29,0,o);var s=i["ɵinlineInterpolate"](1,"",n.isSwitchToTenant?i["ɵunv"](t,32,0,e(t,44,0,i["ɵnov"](t.parent,0),"EnterTenancyName")):"","");e(t,32,0,s,i["ɵnov"](t,37).required?"":null,i["ɵnov"](t,38).maxlength?i["ɵnov"](t,38).maxlength:null,i["ɵnov"](t,43).ngClassUntouched,i["ɵnov"](t,43).ngClassTouched,i["ɵnov"](t,43).ngClassPristine,i["ɵnov"](t,43).ngClassDirty,i["ɵnov"](t,43).ngClassValid,i["ɵnov"](t,43).ngClassInvalid,i["ɵnov"](t,43).ngClassPending),e(t,48,0,n.saving);var a=i["ɵunv"](t,49,0,e(t,50,0,i["ɵnov"](t.parent,0),"Cancel"));e(t,49,0,a),e(t,51,0,!i["ɵnov"](t,2).form.valid),e(t,55,0,n.submitButtonText)})}function E(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵqud"](402653184,1,{modal:0}),i["ɵqud"](402653184,2,{tenancyNameInput:0}),(e()(),i["ɵeld"](3,16777216,null,null,6,"div",[["aria-hidden","true"],["aria-labelledby","tenantChangeModal"],["bsModal",""],["class","modal fade"],["role","dialog"],["tabindex","-1"]],null,[[null,"onShown"],[null,"click"],[null,"keydown.esc"]],function(e,t,n){var l=!0,r=e.component;return"click"===t&&(l=!1!==i["ɵnov"](e,4).onClick(n)&&l),"keydown.esc"===t&&(l=!1!==i["ɵnov"](e,4).onEsc(n)&&l),"onShown"===t&&(l=!1!==r.onShown()&&l),l},null,null)),i["ɵdid"](4,212992,[[1,4],["tenantChangeModal",4]],0,g.d,[i.ElementRef,i.ViewContainerRef,i.Renderer2,f.a],{config:[0,"config"]},{onShown:"onShown"}),i["ɵpod"](5,{backdrop:0}),(e()(),i["ɵeld"](6,0,null,null,3,"div",[["class","modal-dialog"]],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,2,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,w)),i["ɵdid"](9,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component,i=e(t,5,0,"static");e(t,4,0,i),e(t,9,0,n.active)},null)}var T=function(e){function t(t,n){var i=e.call(this,t)||this;return i._accountService=n,i}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){this.appSession.tenant&&(this.tenancyName=this.appSession.tenant.tenancyName,this.name=this.appSession.tenant.name)},Object.defineProperty(t.prototype,"isMultiTenancyEnabled",{get:function(){return abp.multiTenancy.isEnabled},enumerable:!0,configurable:!0}),t.prototype.showChangeModal=function(){this.tenantChangeModal.show(this.tenancyName)},t}(v.a),A=i["ɵcrt"]({encapsulation:2,styles:[],data:{}});function x(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"span",[],[[8,"title",0]],null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["ɵted"](2,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,i["ɵinlineInterpolate"](1,"",n.name,"")),e(t,2,0,n.tenancyName)})}function I(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](1,null,["",""])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent.parent,0),"NotSelected"));e(t,1,0,n)})}function R(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,12,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" ",": "])),i["ɵppd"](2,1),(e()(),i["ɵand"](16777216,null,null,1,null,x)),i["ɵdid"](4,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,I)),i["ɵdid"](6,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵted"](-1,null,[" ("])),(e()(),i["ɵeld"](8,0,null,null,1,"a",[["href","javascript:;"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.showChangeModal()&&i),i},null,null)),(e()(),i["ɵted"](9,null,["",""])),(e()(),i["ɵted"](-1,null,[") "])),(e()(),i["ɵeld"](11,0,null,null,1,"tenantChangeModal",[],null,null,null,E,C)),i["ɵdid"](12,49152,[[1,4],["tenantChangeModal",4]],0,b,[y.b,i.Injector],null,null)],function(e,t){var n=t.component;e(t,4,0,n.tenancyName),e(t,6,0,!n.tenancyName)},function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"CurrentTenant"));e(t,1,0,l),e(t,9,0,n.l("Change"))})}function F(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵqud"](671088640,1,{tenantChangeModal:0}),(e()(),i["ɵand"](16777216,null,null,1,null,R)),i["ɵdid"](3,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,3,0,t.component.isMultiTenancyEnabled)},null)}var k=n("LvDl"),N=function(e){function t(t){var n=e.call(this,t)||this;return n.languages=[],n}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){this.languages=k.filter(abp.localization.languages,function(e){return!1===e.isDisabled}),this.currentLanguage=abp.localization.currentLanguage},t.prototype.changeLanguage=function(e){abp.utils.setCookieValue("Abp.Localization.CultureName",e.name,new Date((new Date).getTime()+15768e7),abp.appPath),location.reload()},t}(v.a),P=i["ɵcrt"]({encapsulation:2,styles:[],data:{}});function O(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,5,"a",[],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changeLanguage(e.context.$implicit)&&i),i},null,null)),(e()(),i["ɵeld"](1,0,null,null,4,"span",[],[[8,"title",0]],null,null,null,null)),i["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["ɵpod"](4,{"language-icon-current":0}),(e()(),i["ɵeld"](5,0,null,null,0,"i",[],[[8,"className",0],[1,"aria-label",0]],null,null,null,null))],function(e,t){var n=e(t,4,0,t.context.$implicit.name==t.component.currentLanguage.name);e(t,3,0,n)},function(e,t){e(t,1,0,i["ɵinlineInterpolate"](1,"",t.context.$implicit.displayName,"")),e(t,5,0,i["ɵinlineInterpolate"](1,"",t.context.$implicit.icon,""),t.context.$implicit.displayName)})}function D(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","language-switch-area"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,O)),i["ɵdid"](2,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,2,0,t.component.languages)},null)}function H(e){return i["ɵvid"](0,[(e()(),i["ɵand"](16777216,null,null,1,null,D)),i["ɵdid"](1,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,t.component.languages.length>1)},null)}var L=n("ZYCi"),V=n("nS6G"),B=n("i3/Z"),j=n("wd/R"),U=n("w3U3"),q=n("zvtx"),M=n("wlJd"),K=n("ep+e"),G=n("Tr3h"),W=n("Q9gK"),z=n("t/Na"),J=n("K9Ia"),Y=n("F/XL"),$=n("0/uQ"),X=n("W0Ae"),Q=n("XlPw"),Z=n("p0ib"),ee=n("VnD/"),te=n("xMyE"),ne=n("T1DM");function ie(e){return e instanceof Date&&!isNaN(+e)}var le=n("FFOo"),re=n("60iU");function oe(e,t){void 0===t&&(t=ne.a);var n=ie(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new se(n,t))}}var se=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new ae(e,this.delay,this.scheduler))},e}(),ae=function(e){function t(t,n,i){var l=e.call(this,t)||this;return l.delay=n,l.scheduler=i,l.queue=[],l.active=!1,l.errored=!1,l}return m.d(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,i=e.scheduler,l=e.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(l);if(n.length>0){var r=Math.max(0,n[0].time-i.now());this.schedule(e,r)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new ue(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(re.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(re.a.createComplete()),this.unsubscribe()},t}(le.a),ue=function(){return function(e,t){this.time=e,this.notification=t}}(),ce=n("15JJ"),de=n("67Y/"),he=n("P6uZ"),pe=n("9Z1F"),ge=n("3U0i"),fe=n("MGBS"),me=n("zotm"),ve=function(){function e(e,t,n,i){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=i}return e.prototype.call=function(e,t){return t.subscribe(new ye(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),ye=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o.absoluteTimeout=n,o.waitFor=i,o.withObservable=l,o.scheduler=r,o.action=null,o.scheduleTimeout(),o}return m.d(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(me.a)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(fe.a),Se=n("t9fZ"),be=n("psW0"),Ce=n("gfpf"),_e=function(){return function(){}}(),we=function(){return function(){}}();function Ee(e){var t=e.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Te(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var Ae=function(){return function(){}}(),xe=function(){function e(){}return e.prototype.validateAtHash=function(e){return Object(m.b)(this,void 0,void 0,function(){var t,n,i,l,r;return Object(m.e)(this,function(o){switch(o.label){case 0:return t=this.inferHashAlgorithm(e.idTokenHeader),[4,this.calcHash(e.accessToken,t)];case 1:return n=o.sent(),i=n.substr(0,n.length/2),l=Te(i),r=e.idTokenClaims.at_hash.replace(/=/g,""),l!==r&&(console.error("exptected at_hash: "+l),console.error("actual at_hash: "+r)),[2,l===r]}})})},e.prototype.inferHashAlgorithm=function(e){var t=e.alg;if(!t.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+t);return"sha-"+t.substr(2)},e}(),Ie=function(){function e(){}return e.prototype.getHashFragmentParams=function(e){var t=e||window.location.hash;if(0!==(t=decodeURIComponent(t)).indexOf("#"))return{};var n=t.indexOf("?");return t=t.substr(n>-1?n+1:1),this.parseQueryString(t)},e.prototype.parseQueryString=function(e){var t,n,i,l,r,o,s,a={};if(null===e)return a;t=e.split("&");for(var u=0;u<t.length;u++)-1===(i=(n=t[u]).indexOf("="))?(l=n,r=null):(l=n.substr(0,i),r=n.substr(i+1)),o=decodeURIComponent(l),s=decodeURIComponent(r),"/"===o.substr(0,1)&&(o=o.substr(1)),a[o]=s;return a},e}(),Re=function(){return function(e){this.type=e}}(),Fe=function(e){function t(t,n){void 0===n&&(n=null);var i=e.call(this,t)||this;return i.info=n,i}return Object(m.d)(t,e),t}(Re),ke=function(e){function t(t,n){void 0===n&&(n=null);var i=e.call(this,t)||this;return i.info=n,i}return Object(m.d)(t,e),t}(Re),Ne=function(e){function t(t,n,i){void 0===i&&(i=null);var l=e.call(this,t)||this;return l.reason=n,l.params=i,l}return Object(m.d)(t,e),t}(Re),Pe=function(){return function(e){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.openUri=function(e){location.href=e},e&&Object.assign(this,e)}}(),Oe=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),De=function(){return function(){}}(),He=function(e){function t(t,n,i,l,r,o,s,a){var u=e.call(this)||this;u.ngZone=t,u.http=n,u.config=r,u.urlHelper=o,u.logger=s,u.crypto=a,u.discoveryDocumentLoaded=!1,u.state="",u.eventsSubject=new J.a,u.discoveryDocumentLoadedSubject=new J.a,u.grantTypesSupported=[],u.inImplicitFlow=!1,u.debug("angular-oauth2-oidc v8-beta"),u.discoveryDocumentLoaded$=u.discoveryDocumentLoadedSubject.asObservable(),u.events=u.eventsSubject.asObservable(),l&&(u.tokenValidationHandler=l),r&&u.configure(r);try{i?u.setStorage(i):"undefined"!=typeof sessionStorage&&u.setStorage(sessionStorage)}catch(c){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",c)}return u.setupRefreshTimer(),u}return Object(m.d)(t,e),t.prototype.configure=function(e){Object.assign(this,new Pe,e),this.config=Object.assign({},new Pe,e),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()},t.prototype.configChanged=function(){this.setupRefreshTimer()},t.prototype.restartSessionChecksIfStillLoggedIn=function(){this.hasValidIdToken()&&this.initSessionCheck()},t.prototype.restartRefreshTimerIfStillLoggedIn=function(){this.setupExpirationTimers()},t.prototype.setupSessionCheck=function(){var e=this;this.events.pipe(Object(ee.a)(function(e){return"token_received"===e.type})).subscribe(function(t){e.initSessionCheck()})},t.prototype.setupAutomaticSilentRefresh=function(e,t,n){var i=this;void 0===e&&(e={}),void 0===n&&(n=!0);var l=!0;this.events.pipe(Object(te.a)(function(e){"token_received"===e.type?l=!0:"logout"===e.type&&(l=!1)}),Object(ee.a)(function(e){return"token_expires"===e.type})).subscribe(function(r){null!=t&&"any"!==t&&r.info!==t||!l||i.refreshInternal(e,n).catch(function(e){i.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()},t.prototype.refreshInternal=function(e,t){return"code"===this.responseType?this.refreshToken():this.silentRefresh(e,t)},t.prototype.loadDiscoveryDocumentAndTryLogin=function(e){var t=this;return void 0===e&&(e=null),this.loadDiscoveryDocument().then(function(n){return t.tryLogin(e)})},t.prototype.loadDiscoveryDocumentAndLogin=function(e){var t=this;return void 0===e&&(e=null),this.loadDiscoveryDocumentAndTryLogin(e).then(function(e){return!(!t.hasValidIdToken()||!t.hasValidAccessToken())||(t.initImplicitFlow(),!1)})},t.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.showDebugInformation&&this.logger.debug.apply(console,e)},t.prototype.validateUrlFromDiscoveryDocument=function(e){var t=[],n=this.validateUrlForHttps(e),i=this.validateUrlAgainstIssuer(e);return n||t.push("https for all urls required. Also for urls received by discovery."),i||t.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),t},t.prototype.validateUrlForHttps=function(e){if(!e)return!0;var t=e.toLowerCase();return!1===this.requireHttps||!(!t.match(/^http:\/\/localhost($|[:\/])/)&&!t.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||t.startsWith("https://")},t.prototype.validateUrlAgainstIssuer=function(e){return!this.strictDiscoveryDocumentValidation||!e||e.toLowerCase().startsWith(this.issuer.toLowerCase())},t.prototype.setupRefreshTimer=function(){var e=this;"undefined"!=typeof window?(this.hasValidIdToken()&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.events.pipe(Object(ee.a)(function(e){return"token_received"===e.type})).subscribe(function(t){e.clearAccessTokenTimer(),e.clearIdTokenTimer(),e.setupExpirationTimers()})):this.debug("timer not supported on this plattform")},t.prototype.setupExpirationTimers=function(){var e=this.getIdTokenExpiration()||Number.MAX_VALUE,t=(this.getAccessTokenExpiration()||Number.MAX_VALUE)<=e;this.hasValidAccessToken()&&t&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&!t&&this.setupIdTokenTimer()},t.prototype.setupAccessTokenTimer=function(){var e=this,t=this.getAccessTokenExpiration(),n=this.getAccessTokenStoredAt(),i=this.calcTimeout(n,t);this.ngZone.runOutsideAngular(function(){e.accessTokenTimeoutSubscription=Object(Y.a)(new ke("token_expires","access_token")).pipe(oe(i)).subscribe(function(t){e.ngZone.run(function(){e.eventsSubject.next(t)})})})},t.prototype.setupIdTokenTimer=function(){var e=this,t=this.getIdTokenExpiration(),n=this.getIdTokenStoredAt(),i=this.calcTimeout(n,t);this.ngZone.runOutsideAngular(function(){e.idTokenTimeoutSubscription=Object(Y.a)(new ke("token_expires","id_token")).pipe(oe(i)).subscribe(function(t){e.ngZone.run(function(){e.eventsSubject.next(t)})})})},t.prototype.clearAccessTokenTimer=function(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()},t.prototype.clearIdTokenTimer=function(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()},t.prototype.calcTimeout=function(e,t){var n=Date.now();return Math.max(0,(t-e)*this.timeoutFactor-(n-e))},t.prototype.setStorage=function(e){this._storage=e,this.configChanged()},t.prototype.loadDiscoveryDocument=function(e){var t=this;return void 0===e&&(e=null),new Promise(function(n,i){e||((e=t.issuer||"").endsWith("/")||(e+="/"),e+=".well-known/openid-configuration"),t.validateUrlForHttps(e)?t.http.get(e).subscribe(function(e){if(!t.validateDiscoveryDocument(e))return t.eventsSubject.next(new Ne("discovery_document_validation_error",null)),void i("discovery_document_validation_error");t.loginUrl=e.authorization_endpoint,t.logoutUrl=e.end_session_endpoint||t.logoutUrl,t.grantTypesSupported=e.grant_types_supported,t.issuer=e.issuer,t.tokenEndpoint=e.token_endpoint,t.userinfoEndpoint=e.userinfo_endpoint,t.jwksUri=e.jwks_uri,t.sessionCheckIFrameUrl=e.check_session_iframe||t.sessionCheckIFrameUrl,t.discoveryDocumentLoaded=!0,t.discoveryDocumentLoadedSubject.next(e),t.sessionChecksEnabled&&t.restartSessionChecksIfStillLoggedIn(),t.loadJwks().then(function(i){var l=new Fe("discovery_document_loaded",{discoveryDocument:e,jwks:i});t.eventsSubject.next(l),n(l)}).catch(function(e){t.eventsSubject.next(new Ne("discovery_document_load_error",e)),i(e)})},function(e){t.logger.error("error loading discovery document",e),t.eventsSubject.next(new Ne("discovery_document_load_error",e)),i(e)}):i("issuer must use https, or config value for property requireHttps must allow http")})},t.prototype.loadJwks=function(){var e=this;return new Promise(function(t,n){e.jwksUri?e.http.get(e.jwksUri).subscribe(function(n){e.jwks=n,e.eventsSubject.next(new Fe("discovery_document_loaded")),t(n)},function(t){e.logger.error("error loading jwks",t),e.eventsSubject.next(new Ne("jwks_load_error",t)),n(t)}):t(null)})},t.prototype.validateDiscoveryDocument=function(e){var t;return this.skipIssuerCheck||e.issuer===this.issuer?(t=this.validateUrlFromDiscoveryDocument(e.authorization_endpoint)).length>0?(this.logger.error("error validating authorization_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.end_session_endpoint)).length>0?(this.logger.error("error validating end_session_endpoint in discovery document",t),!1):((t=this.validateUrlFromDiscoveryDocument(e.token_endpoint)).length>0&&this.logger.error("error validating token_endpoint in discovery document",t),(t=this.validateUrlFromDiscoveryDocument(e.userinfo_endpoint)).length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.jwks_uri)).length>0?(this.logger.error("error validating jwks_uri in discovery document",t),!1):(this.sessionChecksEnabled&&!e.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+e.issuer),!1)},t.prototype.fetchTokenUsingPasswordFlowAndLoadUserProfile=function(e,t,n){var i=this;return void 0===n&&(n=new z.HttpHeaders),this.fetchTokenUsingPasswordFlow(e,t,n).then(function(){return i.loadUserProfile()})},t.prototype.loadUserProfile=function(){var e=this;if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use https, or config value for property requireHttps must allow http");return new Promise(function(t,n){var i=(new z.HttpHeaders).set("Authorization","Bearer "+e.getAccessToken());e.http.get(e.userinfoEndpoint,{headers:i}).subscribe(function(i){e.debug("userinfo received",i);var l=e.getIdentityClaims()||{};e.skipSubjectCheck||!e.oidc||l.sub&&i.sub===l.sub?(i=Object.assign({},l,i),e._storage.setItem("id_token_claims_obj",JSON.stringify(i)),e.eventsSubject.next(new Fe("user_profile_loaded")),t(i)):n("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")},function(t){e.logger.error("error loading user info",t),e.eventsSubject.next(new Ne("user_profile_load_error",t)),n(t)})})},t.prototype.fetchTokenUsingPasswordFlow=function(e,t,n){var i=this;if(void 0===n&&(n=new z.HttpHeaders),!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise(function(l,r){var o,s,a=new z.HttpParams({encoder:new Oe}).set("grant_type","password").set("scope",i.scope).set("username",e).set("password",t);if(i.useHttpBasicAuth){var u=btoa(i.clientId+":"+i.dummyClientSecret);n=n.set("Authorization","Basic "+u)}if(i.useHttpBasicAuth||(a=a.set("client_id",i.clientId)),!i.useHttpBasicAuth&&i.dummyClientSecret&&(a=a.set("client_secret",i.dummyClientSecret)),i.customQueryParams)try{for(var c=Object(m.i)(Object.getOwnPropertyNames(i.customQueryParams)),d=c.next();!d.done;d=c.next()){var h=d.value;a=a.set(h,i.customQueryParams[h])}}catch(p){o={error:p}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}n=n.set("Content-Type","application/x-www-form-urlencoded"),i.http.post(i.tokenEndpoint,a,{headers:n}).subscribe(function(e){i.debug("tokenResponse",e),i.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in,e.scope),i.eventsSubject.next(new Fe("token_received")),l(e)},function(e){i.logger.error("Error performing password flow",e),i.eventsSubject.next(new Ne("token_error",e)),r(e)})})},t.prototype.refreshToken=function(){var e=this;if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise(function(t,n){var i,l,r=(new z.HttpParams).set("grant_type","refresh_token").set("client_id",e.clientId).set("scope",e.scope).set("refresh_token",e._storage.getItem("refresh_token"));if(e.dummyClientSecret&&(r=r.set("client_secret",e.dummyClientSecret)),e.customQueryParams)try{for(var o=Object(m.i)(Object.getOwnPropertyNames(e.customQueryParams)),s=o.next();!s.done;s=o.next()){var a=s.value;r=r.set(a,e.customQueryParams[a])}}catch(c){i={error:c}}finally{try{s&&!s.done&&(l=o.return)&&l.call(o)}finally{if(i)throw i.error}}var u=(new z.HttpHeaders).set("Content-Type","application/x-www-form-urlencoded");e.http.post(e.tokenEndpoint,r,{headers:u}).pipe(Object(ce.a)(function(t){return t.id_token?Object($.a)(e.processIdToken(t.id_token,t.access_token,!0)).pipe(Object(te.a)(function(t){return e.storeIdToken(t)}),Object(de.a)(function(e){return t})):Object(Y.a)(t)})).subscribe(function(n){e.debug("refresh tokenResponse",n),e.storeAccessTokenResponse(n.access_token,n.refresh_token,n.expires_in,n.scope),e.eventsSubject.next(new Fe("token_received")),e.eventsSubject.next(new Fe("token_refreshed")),t(n)},function(t){e.logger.error("Error performing password flow",t),e.eventsSubject.next(new Ne("token_refresh_error",t)),n(t)})})},t.prototype.removeSilentRefreshEventListener=function(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)},t.prototype.setupSilentRefreshEventListener=function(){var e=this;this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=function(t){var n=e.processMessageEventMessage(t);e.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0,onLoginError:function(t){e.eventsSubject.next(new Ne("silent_refresh_error",t))},onTokenReceived:function(){e.eventsSubject.next(new Fe("silently_refreshed"))}}).catch(function(t){return e.debug("tryLogin during silent refresh failed",t)})},window.addEventListener("message",this.silentRefreshPostMessageEventListener)},t.prototype.silentRefresh=function(e,t){var n=this;void 0===e&&(e={}),void 0===t&&(t=!0);var i=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(e.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");if("undefined"==typeof document)throw new Error("silent refresh is not supported on this platform");var l=document.getElementById(this.silentRefreshIFrameName);l&&document.body.removeChild(l),this.silentRefreshSubject=i.sub;var r=document.createElement("iframe");r.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,t,e).then(function(e){r.setAttribute("src",e),n.silentRefreshShowIFrame||(r.style.display="none"),document.body.appendChild(r)});var o=this.events.pipe(Object(ee.a)(function(e){return e instanceof Ne}),Object(he.a)()),s=this.events.pipe(Object(ee.a)(function(e){return"silently_refreshed"===e.type}),Object(he.a)()),a=Object(Y.a)(new Ne("silent_refresh_timeout",null)).pipe(oe(this.silentRefreshTimeout));return Object(X.a)([o,s,a]).pipe(Object(te.a)(function(e){"silent_refresh_timeout"===e.type&&n.eventsSubject.next(e)}),Object(de.a)(function(e){if(e instanceof Ne)throw e;return e})).toPromise()},t.prototype.initImplicitFlowInPopup=function(e){var t=this;return e=e||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(function(n){return new Promise(function(i,l){var r=window.open(n,"_blank",t.calculatePopupFeatures(e)),o=function(){window.removeEventListener("message",s),r.close(),r=null},s=function(e){var n=t.processMessageEventMessage(e);t.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0}).then(function(){o(),i()},function(e){o(),l(e)})};window.addEventListener("message",s)})})},t.prototype.calculatePopupFeatures=function(e){var t=e.height||470,n=e.width||500,i=screen.width/2-n/2;return"location=no,toolbar=no,width="+n+",height="+t+",top="+(screen.height/2-t/2)+",left="+i},t.prototype.processMessageEventMessage=function(e){var t="#";if(this.silentRefreshMessagePrefix&&(t+=this.silentRefreshMessagePrefix),e&&e.data&&"string"==typeof e.data){var n=e.data;if(n.startsWith(t))return"#"+n.substr(t.length)}},t.prototype.canPerformSessionCheck=function(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?"undefined"!=typeof document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))},t.prototype.setupSessionCheckEventListener=function(){var e=this;this.removeSessionCheckEventListener(),this.sessionCheckEventListener=function(t){var n=t.origin.toLowerCase(),i=e.issuer.toLowerCase();switch(e.debug("sessionCheckEventListener"),i.startsWith(n)||e.debug("sessionCheckEventListener","wrong origin",n,"expected",i),t.data){case"unchanged":e.handleSessionUnchanged();break;case"changed":e.ngZone.run(function(){e.handleSessionChange()});break;case"error":e.ngZone.run(function(){e.handleSessionError()})}e.debug("got info from session check inframe",t)},this.ngZone.runOutsideAngular(function(){window.addEventListener("message",e.sessionCheckEventListener)})},t.prototype.handleSessionUnchanged=function(){this.debug("session check","session unchanged")},t.prototype.handleSessionChange=function(){var e=this;this.eventsSubject.next(new ke("session_changed")),this.stopSessionCheckTimer(),this.silentRefreshRedirectUri?(this.silentRefresh().catch(function(t){return e.debug("silent refresh failed after session changed")}),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new ke("session_terminated")),this.logOut(!0))},t.prototype.waitForSilentRefreshAfterSessionChange=function(){var e=this;this.events.pipe(Object(ee.a)(function(e){return"silently_refreshed"===e.type||"silent_refresh_timeout"===e.type||"silent_refresh_error"===e.type}),Object(he.a)()).subscribe(function(t){"silently_refreshed"!==t.type&&(e.debug("silent refresh did not work after session changed"),e.eventsSubject.next(new ke("session_terminated")),e.logOut(!0))})},t.prototype.handleSessionError=function(){this.stopSessionCheckTimer(),this.eventsSubject.next(new ke("session_error"))},t.prototype.removeSessionCheckEventListener=function(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)},t.prototype.initSessionCheck=function(){if(this.canPerformSessionCheck()){var e=document.getElementById(this.sessionCheckIFrameName);e&&document.body.removeChild(e);var t=document.createElement("iframe");t.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),t.setAttribute("src",this.sessionCheckIFrameUrl),t.style.display="none",document.body.appendChild(t),this.startSessionCheckTimer()}},t.prototype.startSessionCheckTimer=function(){var e=this;this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(function(){e.sessionCheckTimer=setInterval(e.checkSession.bind(e),e.sessionCheckIntervall)})},t.prototype.stopSessionCheckTimer=function(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)},t.prototype.checkSession=function(){var e=document.getElementById(this.sessionCheckIFrameName);e||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);var t=this.getSessionState();t||this.stopSessionCheckTimer(),e.contentWindow.postMessage(this.clientId+" "+t,this.issuer)},t.prototype.createLoginUrl=function(e,t,n,i,l){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),void 0===i&&(i=!1),void 0===l&&(l={}),Object(m.b)(this,void 0,void 0,function(){var r,o,s,a,u,c,d,h,p,g,f,v,y,S,b,C,_;return Object(m.e)(this,function(w){switch(w.label){case 0:return u=this,c=n||this.redirectUri,[4,this.createAndSaveNonce()];case 1:if(d=w.sent(),e=e?d+this.config.nonceStateSeparator+e:d,!this.requestAccessToken&&!this.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");return this.responseType=this.config.responseType?this.config.responseType:this.oidc&&this.requestAccessToken?"id_token token":this.oidc&&!this.requestAccessToken?"id_token":"token",h=u.loginUrl.indexOf("?")>-1?"&":"?",p=u.scope,this.oidc&&!p.match(/(^|\s)openid($|\s)/)&&(p="openid "+p),g=u.loginUrl+h+"response_type="+encodeURIComponent(u.responseType)+"&client_id="+encodeURIComponent(u.clientId)+"&state="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(c)+"&scope="+encodeURIComponent(p),"code"!==this.responseType||this.disablePKCE?[3,3]:[4,this.createChallangeVerifierPairForPKCE()];case 2:f=m.g.apply(void 0,[w.sent(),2]),v=f[0],this._storage.setItem("PKCI_verifier",f[1]),g+="&code_challenge="+v,g+="&code_challenge_method=S256",w.label=3;case 3:t&&(g+="&login_hint="+encodeURIComponent(t)),u.resource&&(g+="&resource="+encodeURIComponent(u.resource)),u.oidc&&(g+="&nonce="+encodeURIComponent(d)),i&&(g+="&prompt=none");try{for(y=Object(m.i)(Object.keys(l)),S=y.next();!S.done;S=y.next())_=S.value,g+="&"+encodeURIComponent(_)+"="+encodeURIComponent(l[_])}catch(E){r={error:E}}finally{try{S&&!S.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}if(this.customQueryParams)try{for(b=Object(m.i)(Object.getOwnPropertyNames(this.customQueryParams)),C=b.next();!C.done;C=b.next())g+="&"+(_=C.value)+"="+encodeURIComponent(this.customQueryParams[_])}catch(T){s={error:T}}finally{try{C&&!C.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}return[2,g]}})})},t.prototype.initImplicitFlowInternal=function(e,t){var n=this;if(void 0===e&&(e=""),void 0===t&&(t=""),!this.inImplicitFlow){if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use https, or config value for property requireHttps must allow http");var i={},l=null;"string"==typeof t?l=t:"object"==typeof t&&(i=t),this.createLoginUrl(e,l,null,!1,i).then(this.config.openUri).catch(function(e){console.error("Error in initImplicitFlow",e),n.inImplicitFlow=!1})}},t.prototype.initImplicitFlow=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=""),""!==this.loginUrl?this.initImplicitFlowInternal(e,t):this.events.pipe(Object(ee.a)(function(e){return"discovery_document_loaded"===e.type})).subscribe(function(i){return n.initImplicitFlowInternal(e,t)})},t.prototype.resetImplicitFlow=function(){this.inImplicitFlow=!1},t.prototype.callOnTokenReceivedIfExists=function(e){if(e.onTokenReceived){var t={idClaims:this.getIdentityClaims(),idToken:this.getIdToken(),accessToken:this.getAccessToken(),state:this.state};e.onTokenReceived(t)}},t.prototype.storeAccessTokenResponse=function(e,t,n,i){if(this._storage.setItem("access_token",e),i&&this._storage.setItem("granted_scopes",JSON.stringify(i.split("+"))),this._storage.setItem("access_token_stored_at",""+Date.now()),n){var l=1e3*n,r=(new Date).getTime()+l;this._storage.setItem("expires_at",""+r)}t&&this._storage.setItem("refresh_token",t)},t.prototype.tryLogin=function(e){return void 0===e&&(e=null),"code"===this.config.responseType?this.tryLoginCodeFlow().then(function(e){return!0}):this.tryLoginImplicitFlow(e)},t.prototype.parseQueryString=function(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):{}},t.prototype.tryLoginCodeFlow=function(){var e=this,t=this.parseQueryString(window.location.search),n=t.code,i=t.state,l=location.href.replace(/[&\?]code=[^&\$]*/,"").replace(/[&\?]scope=[^&\$]*/,"").replace(/[&\?]state=[^&\$]*/,"").replace(/[&\?]session_state=[^&\$]*/,"");history.replaceState(null,window.name,l);var r=Object(m.g)(this.parseState(i),2),o=r[0];if(this.state=r[1],t.error){this.debug("error trying to login"),this.handleLoginError({},t);var s=new Ne("code_error",{},t);return this.eventsSubject.next(s),Promise.reject(s)}if(!o)return Promise.resolve();if(!this.validateNonce(o)){var a=new Ne("invalid_nonce_in_state",null);return this.eventsSubject.next(a),Promise.reject(a)}return n?new Promise(function(t,i){e.getTokenFromCode(n).then(function(e){t()}).catch(function(e){i(e)})}):Promise.resolve()},t.prototype.getTokenFromCode=function(e){var t=(new z.HttpParams).set("grant_type","authorization_code").set("code",e).set("redirect_uri",this.redirectUri);if(!this.disablePKCE){var n=this._storage.getItem("PKCI_verifier");n?t=t.set("code_verifier",n):console.warn("No PKCI verifier found in oauth storage!")}return this.fetchAndProcessToken(t)},t.prototype.fetchAndProcessToken=function(e){var t=this,n=(new z.HttpHeaders).set("Content-Type","application/x-www-form-urlencoded");if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use Http. Also check property requireHttps.");if(this.useHttpBasicAuth){var i=btoa(this.clientId+":"+this.dummyClientSecret);n=n.set("Authorization","Basic "+i)}return this.useHttpBasicAuth||(e=e.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(e=e.set("client_secret",this.dummyClientSecret)),new Promise(function(i,l){var r,o;if(t.customQueryParams)try{for(var s=Object(m.i)(Object.getOwnPropertyNames(t.customQueryParams)),a=s.next();!a.done;a=s.next()){var u=a.value;e=e.set(u,t.customQueryParams[u])}}catch(c){r={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}t.http.post(t.tokenEndpoint,e,{headers:n}).subscribe(function(e){t.debug("refresh tokenResponse",e),t.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in,e.scope),t.oidc&&e.id_token?t.processIdToken(e.id_token,e.access_token).then(function(n){t.storeIdToken(n),t.eventsSubject.next(new Fe("token_received")),t.eventsSubject.next(new Fe("token_refreshed")),i(e)}).catch(function(e){t.eventsSubject.next(new Ne("token_validation_error",e)),console.error("Error validating tokens"),console.error(e),l(e)}):(t.eventsSubject.next(new Fe("token_received")),t.eventsSubject.next(new Fe("token_refreshed")),i(e))},function(e){console.error("Error getting token",e),t.eventsSubject.next(new Ne("token_refresh_error",e)),l(e)})})},t.prototype.tryLoginImplicitFlow=function(e){var t,n=this;void 0===e&&(e=null),t=(e=e||{}).customHashFragment?this.urlHelper.getHashFragmentParams(e.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",t);var i=t.state,l=Object(m.g)(this.parseState(i),2),r=l[0];if(this.state=l[1],t.error){this.debug("error trying to login"),this.handleLoginError(e,t);var o=new Ne("token_error",{},t);return this.eventsSubject.next(o),Promise.reject(o)}var s=t.access_token,a=t.id_token,u=t.session_state,c=t.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!s)return Promise.resolve(!1);if(this.requestAccessToken&&!e.disableOAuth2StateCheck&&!i)return Promise.resolve(!1);if(this.oidc&&!a)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!u&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!e.disableOAuth2StateCheck&&!this.validateNonce(r)){var d=new Ne("invalid_nonce_in_state",null);return this.eventsSubject.next(d),Promise.reject(d)}return this.requestAccessToken&&this.storeAccessTokenResponse(s,null,t.expires_in||this.fallbackAccessTokenExpirationTimeInSec,c),this.oidc?this.processIdToken(a,s).then(function(t){return e.validationHandler?e.validationHandler({accessToken:s,idClaims:t.idTokenClaims,idToken:t.idToken,state:i}).then(function(e){return t}):t}).then(function(t){return n.storeIdToken(t),n.storeSessionState(u),n.clearHashAfterLogin&&(location.hash=""),n.eventsSubject.next(new Fe("token_received")),n.callOnTokenReceivedIfExists(e),n.inImplicitFlow=!1,!0}).catch(function(e){return n.eventsSubject.next(new Ne("token_validation_error",e)),n.logger.error("Error validating tokens"),n.logger.error(e),Promise.reject(e)}):(this.eventsSubject.next(new Fe("token_received")),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(e),Promise.resolve(!0))},t.prototype.parseState=function(e){var t=e,n="";if(e){var i=e.indexOf(this.config.nonceStateSeparator);i>-1&&(t=e.substr(0,i),n=e.substr(i+this.config.nonceStateSeparator.length))}return[t,n]},t.prototype.validateNonce=function(e){var t=this._storage.getItem("nonce");return t===e||(console.error("Validating access_token failed, wrong state/nonce.",t,e),!1)},t.prototype.storeIdToken=function(e){this._storage.setItem("id_token",e.idToken),this._storage.setItem("id_token_claims_obj",e.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+e.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())},t.prototype.storeSessionState=function(e){this._storage.setItem("session_state",e)},t.prototype.getSessionState=function(){return this._storage.getItem("session_state")},t.prototype.handleLoginError=function(e,t){e.onLoginError&&e.onLoginError(t),this.clearHashAfterLogin&&(location.hash="")},t.prototype.processIdToken=function(e,t,n){var i=this;void 0===n&&(n=!1);var l=e.split("."),r=Ee(this.padBase64(l[0])),o=JSON.parse(r),s=Ee(this.padBase64(l[1])),a=JSON.parse(s),u=this._storage.getItem("nonce");if(Array.isArray(a.aud)){if(a.aud.every(function(e){return e!==i.clientId})){var c="Wrong audience: "+a.aud.join(",");return this.logger.warn(c),Promise.reject(c)}}else if(a.aud!==this.clientId)return this.logger.warn(c="Wrong audience: "+a.aud),Promise.reject(c);if(!a.sub)return this.logger.warn(c="No sub claim in id_token"),Promise.reject(c);if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==a.sub)return this.logger.warn(c="After refreshing, we got an id_token for another user (sub). Expected sub: "+this.silentRefreshSubject+", received sub: "+a.sub),Promise.reject(c);if(!a.iat)return this.logger.warn(c="No iat claim in id_token"),Promise.reject(c);if(!this.skipIssuerCheck&&a.iss!==this.issuer)return this.logger.warn(c="Wrong issuer: "+a.iss),Promise.reject(c);if(!n&&a.nonce!==u)return this.logger.warn(c="Wrong nonce: "+a.nonce),Promise.reject(c);if(!this.disableAtHashCheck&&this.requestAccessToken&&!a.at_hash)return this.logger.warn(c="An at_hash is needed!"),Promise.reject(c);var d=Date.now(),h=1e3*a.iat,p=1e3*a.exp,g=1e3*(this.clockSkewInSec||600);if(h-g>=d||p+g<=d)return c="Token has expired",console.error(c),console.error({now:d,issuedAtMSec:h,expiresAtMSec:p}),Promise.reject(c);var f={accessToken:t,idToken:e,jwks:this.jwks,idTokenClaims:a,idTokenHeader:o,loadKeys:function(){return i.loadJwks()}};return this.checkAtHash(f).then(function(t){if(!i.disableAtHashCheck&&i.requestAccessToken&&!t){var n="Wrong at_hash";return i.logger.warn(n),Promise.reject(n)}return i.checkSignature(f).then(function(t){return{idToken:e,idTokenClaims:a,idTokenClaimsJson:s,idTokenHeader:o,idTokenHeaderJson:r,idTokenExpiresAt:p}})})},t.prototype.getIdentityClaims=function(){var e=this._storage.getItem("id_token_claims_obj");return e?JSON.parse(e):null},t.prototype.getGrantedScopes=function(){var e=this._storage.getItem("granted_scopes");return e?JSON.parse(e):null},t.prototype.getIdToken=function(){return this._storage?this._storage.getItem("id_token"):null},t.prototype.padBase64=function(e){for(;e.length%4!=0;)e+="=";return e},t.prototype.getAccessToken=function(){return this._storage?this._storage.getItem("access_token"):null},t.prototype.getRefreshToken=function(){return this._storage?this._storage.getItem("refresh_token"):null},t.prototype.getAccessTokenExpiration=function(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null},t.prototype.getAccessTokenStoredAt=function(){return parseInt(this._storage.getItem("access_token_stored_at"),10)},t.prototype.getIdTokenStoredAt=function(){return parseInt(this._storage.getItem("id_token_stored_at"),10)},t.prototype.getIdTokenExpiration=function(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null},t.prototype.hasValidAccessToken=function(){if(this.getAccessToken()){var e=this._storage.getItem("expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1},t.prototype.hasValidIdToken=function(){if(this.getIdToken()){var e=this._storage.getItem("id_token_expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1},t.prototype.authorizationHeader=function(){return"Bearer "+this.getAccessToken()},t.prototype.logOut=function(e){void 0===e&&(e=!1);var t=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this._storage.removeItem("nonce"),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.silentRefreshSubject=null,this.eventsSubject.next(new ke("logout")),this.logoutUrl&&!e&&(t||this.postLogoutRedirectUri)){var n;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl must use https, or config value for property requireHttps must allow http");if(this.logoutUrl.indexOf("{{")>-1)n=this.logoutUrl.replace(/\{\{id_token\}\}/,t).replace(/\{\{client_id\}\}/,this.clientId);else{var i=new z.HttpParams;t&&(i=i.set("id_token_hint",t));var l=this.postLogoutRedirectUri||this.redirectUri;l&&(i=i.set("post_logout_redirect_uri",l)),n=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+i.toString()}this.config.openUri(n)}},t.prototype.createAndSaveNonce=function(){var e=this;return this.createNonce().then(function(t){return e._storage.setItem("nonce",t),t})},t.prototype.ngOnDestroy=function(){this.clearAccessTokenTimer(),this.clearIdTokenTimer()},t.prototype.createNonce=function(){var e=this;return new Promise(function(t){if(e.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");var n="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-",i=45,l="",r=self.crypto||self.msCrypto;if(r)for(var o=r.getRandomValues(new Uint8Array(i));0<i--;)l+=n[63&o[i]];else for(;0<i--;)l+=n[64*Math.random()|0];t(l)})},t.prototype.checkAtHash=function(e){return Object(m.b)(this,void 0,void 0,function(){return Object(m.e)(this,function(t){return this.tokenValidationHandler?[2,this.tokenValidationHandler.validateAtHash(e)]:(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),[2,!0])})})},t.prototype.checkSignature=function(e){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(e):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))},t.prototype.initLoginFlow=function(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),"code"===this.responseType?this.initCodeFlow(e,t):this.initImplicitFlow(e,t)},t.prototype.initCodeFlow=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t={}),""!==this.loginUrl?this.initCodeFlowInternal(e,t):this.events.pipe(Object(ee.a)(function(e){return"discovery_document_loaded"===e.type})).subscribe(function(i){return n.initCodeFlowInternal(e,t)})},t.prototype.initCodeFlowInternal=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t={}),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use Http. Also check property requireHttps.");this.createLoginUrl(e,"",null,!1,t).then(function(e){location.href=e}).catch(function(e){console.error("Error in initAuthorizationCodeFlow"),console.error(e)})},t.prototype.createChallangeVerifierPairForPKCE=function(){return Object(m.b)(this,void 0,void 0,function(){var e;return Object(m.e)(this,function(t){switch(t.label){case 0:if(!this.crypto)throw new Error("PKCI support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");return[4,this.createNonce()];case 1:return e=t.sent(),[4,this.crypto.calcHash(e,"sha-256")];case 2:return[2,[Te(t.sent()),e]]}})})},t}(Pe),Le=function(){return function(){}}(),Ve=function(){return function(){}}(),Be=function(){function e(){}return e.prototype.handleError=function(e){return Object(Q.a)(e)},e}(),je=function(){function e(e,t,n,i){this.authStorage=e,this.oAuthService=t,this.errorHandler=n,this.moduleConfig=i}return e.prototype.checkUrl=function(e){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(e):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(function(t){return e.startsWith(t)})},e.prototype.intercept=function(e,t){var n,i,l=this,r=e.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer?this.moduleConfig.resourceServer.allowedUrls&&!this.checkUrl(r)?t.handle(e):this.moduleConfig.resourceServer.sendAccessToken?Object(Z.a)(Object(Y.a)(this.oAuthService.getAccessToken()).pipe(Object(ee.a)(function(e){return!!e})),this.oAuthService.events.pipe(Object(ee.a)(function(e){return"token_received"===e.type}),(n=this.oAuthService.waitForTokenInMsec||0,void 0===i&&(i=ne.a),function(e,t,n){return void 0===n&&(n=ne.a),function(i){var l=ie(e),r=l?+e-n.now():Math.abs(e);return i.lift(new ve(r,l,t,n))}}(n,Object(Q.a)(new ge.a),i)),Object(pe.a)(function(e){return Object(Y.a)(null)}),Object(de.a)(function(e){return l.oAuthService.getAccessToken()}))).pipe(Object(Se.a)(1),Object(be.a)(function(n){if(n){var i=e.headers.set("Authorization","Bearer "+n);e=e.clone({headers:i})}return t.handle(e).pipe(Object(pe.a)(function(e){return l.errorHandler.handleError(e)}))})):t.handle(e).pipe(Object(pe.a)(function(e){return l.errorHandler.handleError(e)})):t.handle(e)},e}(),Ue=function(){function e(){}return e.prototype.validateSignature=function(e){return Promise.resolve(null)},e.prototype.validateAtHash=function(e){return Promise.resolve(!0)},e}();function qe(){return console}function Me(){return"undefined"!=typeof sessionStorage?sessionStorage:null}var Ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],t.gracePeriodInSec=600,t}return Object(m.d)(t,e),t.prototype.validateSignature=function(e,t){var n=this;if(void 0===t&&(t=!1),!e.idToken)throw new Error("Parameter idToken expected!");if(!e.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!e.jwks)throw new Error("Parameter jwks expected!");if(!e.jwks.keys||!Array.isArray(e.jwks.keys)||0===e.jwks.keys.length)throw new Error("Array keys in jwks missing!");var i,l=e.idTokenHeader.kid,r=e.jwks.keys,o=e.idTokenHeader.alg;if(l)i=r.find(function(e){return e.kid===l});else{var s=this.alg2kty(o),a=r.filter(function(e){return e.kty===s&&"sig"===e.use});if(a.length>1){var u="More than one matching key found. Please specify a kid in the id_token header.";return console.error(u),Promise.reject(u)}1===a.length&&(i=a[0])}if(!i&&!t&&e.loadKeys)return e.loadKeys().then(function(t){return e.jwks=t}).then(function(t){return n.validateSignature(e,!0)});if(!i&&t&&!l)return u="No matching key found.",console.error(u),Promise.reject(u);if(!i&&t&&l)return u="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+l,console.error(u),Promise.reject(u);var c=Ce.KEYUTIL.getKey(i);return Ce.KJUR.jws.JWS.verifyJWT(e.idToken,c,{alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec})?Promise.resolve():Promise.reject("Signature not valid")},t.prototype.alg2kty=function(e){switch(e.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+e)}},t.prototype.calcHash=function(e,t){var n=new Ce.KJUR.crypto.MessageDigest({alg:t}).digestString(e),i=this.toByteArrayAsString(n);return Promise.resolve(i)},t.prototype.toByteArrayAsString=function(e){for(var t="",n=0;n<e.length;n+=2){var i=e.charAt(n)+e.charAt(n+1),l=parseInt(i,16);t+=String.fromCharCode(l)}return t},t}(xe),Ge=function(){function e(){}return e.forRoot=function(t,n){return void 0===t&&(t=null),void 0===n&&(n=Ue),{ngModule:e,providers:[He,Ie,{provide:_e,useFactory:qe},{provide:we,useFactory:Me},{provide:Ae,useClass:n},{provide:De,useClass:Ke},{provide:Ve,useClass:Be},{provide:Le,useValue:t},{provide:z.HTTP_INTERCEPTORS,useClass:je,multi:!0}]}},e}(),We=n("5756"),ze=function(e){function t(t){var n=e.call(this)||this;return n.initialized=!1,n.name=t.name,n.clientId=t.clientId,n.additionalParams=t.additionalParams,n.icon=t.name.toLowerCase(),n}return Object(m.d)(t,e),t.FACEBOOK="Facebook",t.GOOGLE="Google",t.MICROSOFT="Microsoft",t.OPENID="OpenIdConnect",t.WSFEDERATION="WsFederation",t}(y.U),Je=function(){function e(e,t,n,i,l,r,o,s){this._tokenAuthService=e,this._router=t,this._utilsService=n,this._messageService=i,this._tokenService=l,this._logService=r,this.oauthService=o,this.spinnerService=s,this.externalLoginProviders=[],this.clear()}return e.prototype.authenticate=function(t,n,i){var l=this;t=t||function(){l.spinnerService.hide()},this.authenticateModel.twoFactorRememberClientToken=this._utilsService.getCookieValue(e.twoFactorRememberClientTokenName),this.authenticateModel.singleSignIn=G.a.getSingleSignIn(),this.authenticateModel.returnUrl=G.a.getReturnUrl(),this.authenticateModel.captchaResponse=i,this._tokenAuthService.authenticate(this.authenticateModel).subscribe({next:function(e){l.processAuthenticateResult(e,n),t()},error:function(e){t()}})},e.prototype.externalAuthenticate=function(e){var t=this;this.ensureExternalLoginProviderInitialized(e,function(){e.name===ze.FACEBOOK?FB.login(function(e){t.facebookLoginStatusChangeCallback(e)},{scope:"email"}):e.name===ze.GOOGLE?gapi.auth2.getAuthInstance().signIn().then(function(){t.googleLoginStatusChangeCallback(gapi.auth2.getAuthInstance().isSignedIn.get())}):e.name===ze.MICROSOFT&&WL.login({scope:["wl.signin","wl.basic","wl.emails"]})})},e.prototype.init=function(){this.initExternalLoginProviders()},e.prototype.processAuthenticateResult=function(e,t){this.authenticateResult=e,e.shouldResetPassword?(this._router.navigate(["account/reset-password"],{queryParams:{userId:e.userId,tenantId:abp.session.tenantId,resetCode:e.passwordResetCode}}),this.clear()):e.requiresTwoFactorVerification?this._router.navigate(["account/send-code"]):e.accessToken?(e.returnUrl&&!t&&(t=e.returnUrl),this.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,this.rememberMe,e.twoFactorRememberClientToken,t)):(this._logService.warn("Unexpected authenticateResult!"),this._router.navigate(["account/login"]))},e.prototype.login=function(t,n,i,l,r,o){var s=l?new Date((new Date).getTime()+1e3*i):void 0;if(this._tokenService.setToken(t,s),this._utilsService.setCookieValue(V.a.authorization.encrptedAuthTokenName,n,s,abp.appPath),r&&this._utilsService.setCookieValue(e.twoFactorRememberClientTokenName,r,new Date((new Date).getTime()+31536e6),abp.appPath),o)location.href=o;else{var a=G.a.initialUrl;a.indexOf("/account")>0&&(a=V.a.appBaseUrl),location.href=a}},e.prototype.clear=function(){this.authenticateModel=new y.i,this.authenticateModel.rememberClient=!1,this.authenticateResult=null,this.rememberMe=!1},e.prototype.initExternalLoginProviders=function(e){var t=this;this._tokenAuthService.getExternalAuthenticationProviders().subscribe(function(n){t.externalLoginProviders=k.map(n,function(e){return new ze(e)}),e&&e()})},e.prototype.ensureExternalLoginProviderInitialized=function(e,t){var n=this;if(e.initialized)t();else if(e.name===ze.FACEBOOK)(new W.a).load("//connect.facebook.net/en_US/sdk.js").then(function(){FB.init({appId:e.clientId,cookie:!1,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(e){n.facebookLoginStatusChangeCallback(e),"connected"!==e.status&&t()})});else if(e.name===ze.GOOGLE)(new W.a).load("https://apis.google.com/js/api.js").then(function(){gapi.load("client:auth2",function(){gapi.client.init({clientId:e.clientId,scope:"openid profile email"}).then(function(){t()})})});else if(e.name===ze.MICROSOFT)(new W.a).load("//js.live.net/v5.0/wl.js").then(function(){WL.Event.subscribe("auth.login",n.microsoftLogin),WL.init({client_id:e.clientId,scope:["wl.signin","wl.basic","wl.emails"],redirect_uri:V.a.appBaseUrl,response_type:"token"})});else if(e.name===ze.OPENID){var i=this.getOpenIdConnectConfig(e);this.oauthService.configure(i),this.oauthService.initImplicitFlow("openIdConnect=1")}else if(e.name===ze.WSFEDERATION){var l=this.getWsFederationConnectConfig(e);this.wsFederationAuthenticationContext=new We(l),this.wsFederationAuthenticationContext.login()}},e.prototype.getWsFederationConnectConfig=function(e){var t={clientId:e.clientId,popUp:!0,callback:this.wsFederationLoginStatusChangeCallback.bind(this)};return e.additionalParams.Tenant&&(t.tenant=e.additionalParams.Tenant),t},e.prototype.getOpenIdConnectConfig=function(e){var t=new Pe;return t.loginUrl=e.additionalParams.LoginUrl,t.issuer=e.additionalParams.Authority,t.skipIssuerCheck="false"===e.additionalParams.ValidateIssuer,t.clientId=e.clientId,t.responseType="id_token",t.redirectUri=window.location.origin+"/account/login",t.scope="openid profile",t.requestAccessToken=!1,t},e.prototype.facebookLoginStatusChangeCallback=function(e){var t=this;if("connected"===e.status){var n=new y.T;n.authProvider=ze.FACEBOOK,n.providerAccessCode=e.authResponse.accessToken,n.providerKey=e.authResponse.userID,n.singleSignIn=G.a.getSingleSignIn(),n.returnUrl=G.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe(function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,!1,"",e.returnUrl)})}},e.prototype.openIdConnectLoginCallback=function(e){var t=this;this.initExternalLoginProviders(function(){var e=k.filter(t.externalLoginProviders,{name:"OpenIdConnect"})[0],n=t.getOpenIdConnectConfig(e);t.oauthService.configure(n),t.spinnerService.show(),t.oauthService.tryLogin().then(function(){var e=t.oauthService.getIdentityClaims(),n=new y.T;n.authProvider=ze.OPENID,n.providerAccessCode=t.oauthService.getIdToken(),n.providerKey=e.sub,n.singleSignIn=G.a.getSingleSignIn(),n.returnUrl=G.a.getReturnUrl(),t._tokenAuthService.externalAuthenticate(n).pipe(Object(S.a)(function(){t.spinnerService.hide()})).subscribe(function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,!1,"",e.returnUrl)})})})},e.prototype.googleLoginStatusChangeCallback=function(e){var t=this;if(e){var n=new y.T;n.authProvider=ze.GOOGLE,n.providerAccessCode=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token,n.providerKey=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getId(),n.singleSignIn=G.a.getSingleSignIn(),n.returnUrl=G.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe(function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,!1,"",e.returnUrl)})}},e.prototype.wsFederationLoginStatusChangeCallback=function(e,t,n,i){var l=this,r=this.wsFederationAuthenticationContext.getCachedUser(),o=new y.T;o.authProvider=ze.WSFEDERATION,o.providerAccessCode=t,o.providerKey=r.profile.sub,o.singleSignIn=G.a.getSingleSignIn(),o.returnUrl=G.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(o).subscribe(function(e){if(e.waitingForActivation)return l._messageService.info("You have successfully registered. Waiting for activation!"),void l._router.navigate(["account/login"]);l.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,!1,"",e.returnUrl)})},e.prototype.microsoftLogin=function(){var e=this;this._logService.debug(WL.getSession());var t=new y.T;t.authProvider=ze.MICROSOFT,t.providerAccessCode=WL.getSession().access_token,t.providerKey=WL.getSession().id,t.singleSignIn=G.a.getSingleSignIn(),t.returnUrl=G.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(t).subscribe(function(t){t.waitingForActivation?e._messageService.info("You have successfully registered. Waiting for activation!"):e.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,!1,"",t.returnUrl)})},e.twoFactorRememberClientTokenName="TwoFactorRememberClientToken",e}(),Ye=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o._router=n,o._loginService=i,o._uiCustomizationService=l,o.currentYear=j().year(),o.remoteServiceBaseUrl=V.a.remoteServiceBaseUrl,o.tenantChangeDisabledRoutes=["select-edition","buy","upgrade","extend","register-tenant","stripe-purchase","stripe-subscribe","stripe-update-subscription","paypal-purchase"],o.viewContainerRef=r,o}return Object(m.d)(t,e),t.prototype.showTenantChange=function(){var e=this;return!!this._router.url&&!k.filter(this.tenantChangeDisabledRoutes,function(t){return e._router.url.indexOf("/account/"+t)>=0}).length&&abp.multiTenancy.isEnabled&&!this.supportsTenancyNameInUrl()},t.prototype.useFullWidthLayout=function(){return this._router.url.indexOf("/account/select-edition")>=0},t.prototype.ngOnInit=function(){this._loginService.init(),document.body.className=this._uiCustomizationService.getAccountModuleBodyClass()},t.prototype.goToHome=function(){window.location.href="/"},t.prototype.getBgUrl=function(){return"url(./assets/metronic/themes/"+this.currentTheme.baseSettings.theme+"/images/bg/bg-4.jpg)"},t.prototype.supportsTenancyNameInUrl=function(){return V.a.appBaseUrlFormat&&V.a.appBaseUrlFormat.indexOf(V.a.tenancyNamePlaceHolderInUrl)>=0},t}(v.a),$e=i["ɵcrt"]({encapsulation:2,styles:[[".kt-login.kt-login--v1 .kt-login__aside{width:605px;padding:3rem 3.5rem;background-repeat:no-repeat;background-size:cover}.kt-login.kt-login--v1 .kt-login__aside .kt-login__logo{display:flex}.kt-login.kt-login--v1 .kt-login__aside .kt-login__title{color:#fff;font-size:2rem;font-weight:500}.kt-login.kt-login--v1 .kt-login__aside .kt-login__subtitle{font-size:1.2rem;font-weight:200;margin:2.5rem 0 3.5rem;color:rgba(255,255,255,.7)}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info{display:flex;justify-content:space-between}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a{text-decoration:none;margin-right:2rem;display:inline-block;color:rgba(255,255,255,.7)}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a:hover{color:#fff}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a:hover:after{border-bottom:1px solid #fff;opacity:.3}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__menu>a:last-child{margin-right:0}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info .kt-login__copyright{color:rgba(255,255,255,.4)}.kt-login.kt-login--v1 .kt-login__wrapper{padding:3rem;background:#fff}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head{font-size:1rem;font-weight:500;text-align:right}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head .kt-login__signup-label{color:#a7abc3}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head .kt-login__signup-link{color:#5d78ff}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body{display:flex;justify-content:center;align-items:center;height:100%}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form{width:100%;max-width:450px}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__title{display:block;text-align:center;margin-bottom:5rem;text-decoration:none}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__title>h3{font-size:2rem;color:#67666e}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form{margin:4rem auto}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form .form-group{margin:0 auto;padding:0}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form .form-group .form-control{border:none;height:50px;margin-top:1.25rem;background-color:rgba(247,247,249,.7);padding-left:1.25rem;padding-right:1.25rem;transition:background-color .3s ease}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-form .form-group .form-control:focus{transition:background-color .3s ease;background-color:#f7f7f9}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions{display:flex;justify-content:space-between;align-items:center;margin:3rem 0}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__link-forgot{color:#a7abc3}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__link-forgot:hover{color:#5d78ff}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__link-forgot:hover:after{border-bottom:1px solid #5d78ff;opacity:.3}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__btn-primary,.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__actions .kt-login__btn-secondary{height:50px;padding-left:2.5rem;padding-right:2.5rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__divider{margin:1rem 0 2rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__divider:not(:first-child):not(:last-child){font-weight:400;color:#b5b2c3;font-size:1rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options{display:flex;justify-content:center;justify-content:space-between;max-width:100%}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options>a{text-decoration:none;flex:1;justify-content:center;align-items:center;display:flex}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options>a:not(:first-child):not(:last-child){margin:0 1.5rem}@media (min-width:1025px){.kt-login.kt-login--v1 .kt-login__aside{flex:1}}@media (max-width:1024px){.kt-login.kt-login--v1 .kt-login__aside{width:100%;height:auto;padding:2rem 1.5rem}.kt-login.kt-login--v1 .kt-login__aside .kt-login__logo{margin-bottom:2.5rem}.kt-login.kt-login--v1 .kt-login__aside .kt-login__info{margin-top:2rem}.kt-login.kt-login--v1 .kt-login__aside .kt-login__subtitle{margin:2rem 0}.kt-login.kt-login--v1 .kt-login__wrapper{padding:3rem 1.5rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__head{padding-left:2rem;right:2rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body{display:flex;justify-content:center;align-items:center;margin-top:5rem}.kt-login.kt-login--v1 .kt-login__wrapper .kt-login__body .kt-login__form .kt-login__options>a:not(:first-child):not(:last-child){margin:0 .8rem}}.language-switch-area a{margin-right:5px;cursor:pointer}.language-switch-area i{display:inline-block}.kt-login__form{margin:40px auto!important}.kt-login__account{text-align:center}.has-danger .form-control-feedback{color:#fd397a;margin-top:.2rem;font-size:.85rem;text-align:left}ul.text-danger{list-style:none;color:#f4516c;margin-top:.2rem;font-size:.85rem;text-align:left;padding-left:0}.captcha-container{margin:auto;width:70%}.tenant-change-font{font-size:15px}"]],data:{}});function Xe(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","kt-grid__item kt-grid__item--order-tablet-and-mobile-2 kt-grid kt-grid--hor kt-login__aside"],["style","background-image: url('/assets/metronic/common/images/bg/bg-4.jpg');"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"div",[["class","kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,4,"div",[["class","kt-grid__item kt-grid__item--middle"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,1,"h3",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵted"](-1,null,["askPio"])),(e()(),i["ɵeld"](5,0,null,null,1,"h4",[["class","kt-login__subtitle"]],null,null,null,null,null)),(e()(),i["ɵted"](-1,null,["Complete Estimate and Invoice Management Software Solutions."]))],null,null)}function Qe(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","kt-login__signup-label tenant-change-box text-center tenant-change-font"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,1,"tenant-change",[],null,null,null,F,A)),i["ɵdid"](2,114688,null,0,T,[i.Injector,y.b],null,null)],function(e,t){e(t,2,0)},null)}function Ze(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,22,"div",[],[[4,"text-align",null]],null,null,null,null)),i["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["ɵpod"](3,{"kt-grid kt-grid--ver kt-grid--root":0,"kt-content":1}),(e()(),i["ɵeld"](4,0,null,null,18,"div",[["id","kt_login"]],null,null,null,null,null)),i["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](6,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["ɵpod"](7,{"kt-grid kt-grid--hor kt-grid--root  kt-login kt-login--v1":0,row:1}),(e()(),i["ɵeld"](8,0,null,null,14,"div",[],null,null,null,null,null)),i["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](10,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["ɵpod"](11,{"kt-grid__item kt-grid__item--fluid kt-grid kt-grid--desktop kt-grid--ver-desktop kt-grid--hor-tablet-and-mobile":0,"col-md-12":1}),(e()(),i["ɵand"](16777216,null,null,1,null,Xe)),i["ɵdid"](13,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](14,0,null,null,8,"div",[["class","kt-grid__item kt-grid__item--fluid  kt-grid__item--order-tablet-and-mobile-1  kt-login__wrapper d-block"]],null,null,null,null,null)),(e()(),i["ɵeld"](15,0,null,null,2,"div",[["class","kt-login__head d-block mt-3 mr-auto ml-auto text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](16,0,null,null,1,"language-switch",[],null,null,null,H,P)),i["ɵdid"](17,114688,null,0,N,[i.Injector],null,null),(e()(),i["ɵeld"](18,0,null,null,4,"div",[["class","kt-login__body d-block mt-3 mr-auto ml-auto"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Qe)),i["ɵdid"](20,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](21,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["ɵdid"](22,212992,null,0,L.RouterOutlet,[L.ChildrenOutletContexts,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(e,t){var n=t.component,i=e(t,3,0,!n.useFullWidthLayout(),n.useFullWidthLayout());e(t,2,0,i);var l=e(t,7,0,!n.useFullWidthLayout(),n.useFullWidthLayout());e(t,6,0,l);var r=e(t,11,0,!n.useFullWidthLayout(),n.useFullWidthLayout());e(t,10,0,r),e(t,13,0,!n.useFullWidthLayout()),e(t,17,0),e(t,20,0,n.showTenantChange()),e(t,22,0)},function(e,t){e(t,0,0,t.component.useFullWidthLayout()?"center":"left")})}function et(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,16777216,null,null,1,"ng-component",[],null,null,null,Ze,$e)),i["ɵdid"](1,114688,null,0,Ye,[i.Injector,L.Router,Je,B.a,i.ViewContainerRef],null,null)],function(e,t){e(t,1,0)},null)}var tt=i["ɵccf"]("ng-component",Ye,et,{},{},[]),nt=n("+Muo"),it=n("kgQi"),lt=n("26FU"),rt=new i.InjectionToken("recaptcha-language"),ot=new i.InjectionToken("recaptcha-base-url"),st=new i.InjectionToken("recaptcha-nonce-tag"),at=function(){function e(e,n,i,l){this.platformId=e,this.language=n,this.baseUrl=i,this.nonce=l,this.init(),this.ready=Object(u.isPlatformBrowser)(this.platformId)?t.ready.asObservable():Object(Y.a)()}return t=e,e.prototype.init=function(){if(!t.ready&&Object(u.isPlatformBrowser)(this.platformId)){var e=new lt.a(null);t.ready=e,function(t,n,i,l,r){window.ng2recaptchaloaded=function(){!function(t){e.next(t)}(grecaptcha)};var o=document.createElement("script");o.innerHTML="",o.src=(l||"https://www.google.com/recaptcha/api.js")+"?render=explicit&onload=ng2recaptchaloaded"+i,r&&(o.nonce=r),o.async=!0,o.defer=!0,document.head.appendChild(o)}(0,0,this.language?"&hl="+this.language:"",this.baseUrl,this.nonce)}},e.ready=null,e;var t}(),ut=new i.InjectionToken("recaptcha-settings"),ct=0,dt=function(){function e(e,t,n,l){this.elementRef=e,this.loader=t,this.zone=n,this.id="ngrecaptcha-"+ct++,this.resolved=new i.EventEmitter,l&&(this.siteKey=l.siteKey,this.theme=l.theme,this.type=l.type,this.size=l.size,this.badge=l.badge)}return e.prototype.ngAfterViewInit=function(){var e=this;this.subscription=this.loader.ready.subscribe(function(t){null!=t&&t.render instanceof Function&&(e.grecaptcha=t,e.renderRecaptcha())})},e.prototype.ngOnDestroy=function(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()},e.prototype.execute=function(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)},e.prototype.reset=function(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())},e.prototype.expired=function(){this.resolved.emit(null)},e.prototype.captchaResponseCallback=function(e){this.resolved.emit(e)},e.prototype.grecaptchaReset=function(){var e=this;null!=this.widget&&this.zone.runOutsideAngular(function(){return e.grecaptcha.reset(e.widget)})},e.prototype.renderRecaptcha=function(){var e=this;this.widget=this.grecaptcha.render(this.elementRef.nativeElement,{badge:this.badge,callback:function(t){e.zone.run(function(){return e.captchaResponseCallback(t)})},"expired-callback":function(){e.zone.run(function(){return e.expired()})},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type}),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())},Object(m.c)([Object(i.Input)(),Object(i.HostBinding)("attr.id"),Object(m.f)("design:type",Object)],e.prototype,"id",void 0),e}(),ht=function(){return function(){}}(),pt=function(){function e(){}return t=e,e.forRoot=function(){return t},e;var t}(),gt=i["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ft(e){return i["ɵvid"](0,[],null,null)}var mt=n("ooh5"),vt=n("xDbU"),yt=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o.loginService=n,o._router=i,o._sessionService=l,o._sessionAppService=r,o.submitting=!1,o.isMultiTenancyEnabled=o.multiTenancy.isEnabled,o.recaptchaSiteKey=V.a.recaptchaSiteKey,o.remoteServiceBaseUrl=V.a.remoteServiceBaseUrl,o}return Object(m.d)(t,e),Object.defineProperty(t.prototype,"multiTenancySideIsTeanant",{get:function(){return this._sessionService.tenantId>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTenantSelfRegistrationAllowed",{get:function(){return this.setting.getBoolean("App.TenantManagement.AllowSelfRegistration")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSelfRegistrationAllowed",{get:function(){return!!this._sessionService.tenantId&&this.setting.getBoolean("App.UserManagement.AllowSelfRegistration")},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._sessionService.userId>0&&G.a.getReturnUrl()&&G.a.getSingleSignIn()&&this._sessionAppService.updateUserSignInToken().subscribe(function(e){var t=G.a.getReturnUrl(),n=t+(t.indexOf("?")>=0?"&":"?")+"accessToken="+e.signInToken+"&userId="+e.encodedUserId+"&tenantId="+e.encodedTenantId;location.href=n});var e=G.a.getQueryParametersUsingHash().state;e&&e.indexOf("openIdConnect")>=0&&this.loginService.openIdConnectLoginCallback({})},t.prototype.login=function(){var e=this;!this.useCaptcha||this.captchaResponse?(this.spinnerService.show(),this.submitting=!0,this.loginService.authenticate(function(){e.submitting=!1,e.spinnerService.hide(),e.recaptchaRef&&e.recaptchaRef.reset()},null,this.captchaResponse)):this.message.warn(this.l("CaptchaCanNotBeEmpty"))},t.prototype.externalLogin=function(e){this.loginService.externalAuthenticate(e)},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnLogin")},enumerable:!0,configurable:!0}),t.prototype.captchaResolved=function(e){this.captchaResponse=e},t.prototype.goToHome=function(){window.location.href="/"},t}(v.a),St=i["ɵcrt"]({encapsulation:0,styles:[[".kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding-right:.35rem;margin:0 5px 0 0!important}.kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-openidconnect[_ngcontent-%COMP%]{background:url(/assets/common/images/social/openid.png) no-repeat;width:16px;height:16px}.kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-wsfederation[_ngcontent-%COMP%]{background:url(/assets/common/images/social/adfs.png) no-repeat;width:16px;height:16px}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function bt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,0,"img",[["alt","logo"],["height","50"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component.appRootUrl()+"assets/common/images/app-logo-on-dark.svg")})}function Ct(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,0,"img",[["alt","logo"],["height","50"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,0,0,n.remoteServiceBaseUrl+"/TenantCustomization/GetTenantLogo?skin=light&tenantId="+n.appSession.tenant.id+"&id="+n.appSession.tenant.logoId)})}function _t(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](1,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null)],function(e,t){e(t,1,0,i["ɵnov"](t.parent,23))},null)}function wt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](1,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null)],function(e,t){e(t,1,0,i["ɵnov"](t.parent,37))},null)}function Et(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"p",[["class","mt-2 form-text text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"Captha_Hint"));e(t,1,0,n)})}function Tt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","form-group mt-2 captcha-container"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,1,"re-captcha",[],[[1,"id",0]],[[null,"resolved"]],function(e,t,n){var i=!0;return"resolved"===t&&(i=!1!==e.component.captchaResolved(n)&&i),i},ft,gt)),i["ɵdid"](2,4374528,[[1,4],["recaptchaRef",4]],0,dt,[i.ElementRef,at,i.NgZone,[2,ut]],{siteKey:[0,"siteKey"]},{resolved:"resolved"})],function(e,t){e(t,2,0,t.component.recaptchaSiteKey)},function(e,t){e(t,1,0,i["ɵnov"](t,2).id)})}function At(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"a",[["class","btn btn-outline-secondary kt-btn btn-sm"]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.externalLogin(e.context.$implicit)&&i),i},null,null)),(e()(),i["ɵeld"](1,0,null,null,0,"i",[],[[8,"className",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,[" "," "]))],null,function(e,t){e(t,0,0,i["ɵinlineInterpolate"](1,"",t.context.$implicit.name,"")),e(t,1,0,i["ɵinlineInterpolate"](1,"fab fa-",t.context.$implicit.icon,"")),e(t,2,0,t.context.$implicit.name)})}function xt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","kt-login__options"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,At)),i["ɵdid"](2,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,2,0,t.component.loginService.externalLoginProviders)},null)}function It(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,3,"a",[["routerLink","/account/register"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["ɵdid"](2,671744,null,0,L.RouterLinkWithHref,[L.Router,L.ActivatedRoute,u.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵted"](3,null,["",""])),i["ɵppd"](4,1),(e()(),i["ɵeld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](-1,null,[" | "]))],function(e,t){e(t,2,0,"/account/register")},function(e,t){e(t,1,0,i["ɵnov"](t,2).target,i["ɵnov"](t,2).href);var n=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"CreateAnAccount"));e(t,3,0,n)})}function Rt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,3,"a",[["routerLink","/account/select-edition"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["ɵdid"](2,671744,null,0,L.RouterLinkWithHref,[L.Router,L.ActivatedRoute,u.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵted"](3,null,["",""])),i["ɵppd"](4,1),(e()(),i["ɵeld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](-1,null,[" | "]))],function(e,t){e(t,2,0,"/account/select-edition")},function(e,t){e(t,1,0,i["ɵnov"](t,2).target,i["ɵnov"](t,2).href);var n=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"NewTenant"));e(t,3,0,n)})}function Ft(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵqud"](671088640,1,{recaptchaRef:0}),(e()(),i["ɵeld"](2,0,null,null,72,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,8,"div",[["class","kt-login__title mb-5"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,4,"a",[["href",""]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.goToHome()&&i),i},null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,bt)),i["ɵdid"](6,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Ct)),i["ɵdid"](8,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](9,0,null,null,2,"h3",[["class","m-0 mt-3"]],null,null,null,null,null)),(e()(),i["ɵted"](10,null,[" "," "])),i["ɵppd"](11,1),(e()(),i["ɵeld"](12,0,null,null,53,"form",[["class","kt-form mt-5"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,14).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,14).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.login()&&l),l},null,null)),i["ɵdid"](13,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](14,4210688,[["loginForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](16,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](17,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](18,0,null,null,9,"input",[["autoFocus",""],["autocomplete","new-password"],["class","form-control m-input"],["name","userNameOrEmailAddress"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,19)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,19).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,19)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,19)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.loginService.authenticateModel.userNameOrEmailAddress=n)&&l),l},null,null)),i["ɵdid"](19,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](20,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e){return[e]},[c.RequiredValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](23,671744,[["userNameOrEmailAddressInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](25,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](26,4210688,null,0,mt.a,[i.ElementRef],null,null),i["ɵppd"](27,1),(e()(),i["ɵand"](16777216,null,null,1,null,_t)),i["ɵdid"](29,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](30,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](31,0,null,null,9,"input",[["autocomplete","new-password"],["class","form-control m-input"],["maxlength","32"],["name","password"],["required",""],["type","password"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,32)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,32).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,32)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,32)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.loginService.authenticateModel.password=n)&&l),l},null,null)),i["ɵdid"](32,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](33,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](34,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](37,671744,[["passwordInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](39,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](40,1),(e()(),i["ɵand"](16777216,null,null,1,null,wt)),i["ɵdid"](42,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](43,0,null,null,10,"div",[["class","form-group mt-4"]],null,null,null,null,null)),(e()(),i["ɵeld"](44,0,null,null,9,"label",[["class","kt-checkbox"]],null,null,null,null,null)),(e()(),i["ɵeld"](45,0,null,null,5,"input",[["class","form-control"],["name","rememberMe"],["type","checkbox"],["value","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var l=!0,r=e.component;return"change"===t&&(l=!1!==i["ɵnov"](e,46).onChange(n.target.checked)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,46).onTouched()&&l),"ngModelChange"===t&&(l=!1!==(r.loginService.rememberMe=n)&&l),l},null,null)),i["ɵdid"](46,16384,null,0,c.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.CheckboxControlValueAccessor]),i["ɵdid"](48,671744,null,0,c.NgModel,[[2,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](50,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(e()(),i["ɵted"](51,null,[""," "])),i["ɵppd"](52,1),(e()(),i["ɵeld"](53,0,null,null,0,"span",[],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Et)),i["ɵdid"](55,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Tt)),i["ɵdid"](57,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](58,0,null,null,7,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](59,0,null,null,3,"a",[["class","kt-link kt-login__link-forgot"],["id","forget-password"],["routerLink","/account/forgot-password"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,60).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["ɵdid"](60,671744,null,0,L.RouterLinkWithHref,[L.Router,L.ActivatedRoute,u.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵted"](61,null,["",""])),i["ɵppd"](62,1),(e()(),i["ɵeld"](63,0,null,null,2,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),i["ɵted"](64,null,["",""])),i["ɵppd"](65,1),(e()(),i["ɵeld"](66,0,null,null,6,"div",[["class","kt-login__divider"]],null,null,null,null,null)),(e()(),i["ɵeld"](67,0,null,null,5,"div",[["class","kt-divider"]],null,null,null,null,null)),(e()(),i["ɵeld"](68,0,null,null,0,"span",[],null,null,null,null,null)),(e()(),i["ɵeld"](69,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](70,null,["",""])),i["ɵppd"](71,1),(e()(),i["ɵeld"](72,0,null,null,0,"span",[],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,xt)),i["ɵdid"](74,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](75,0,null,null,8,"div",[["class","kt-login__account"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,It)),i["ɵdid"](77,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Rt)),i["ɵdid"](79,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](80,0,null,null,3,"a",[["id","email-activation-btn"],["routerLink","/account/email-activation"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,81).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&l),l},null,null)),i["ɵdid"](81,671744,null,0,L.RouterLinkWithHref,[L.Router,L.ActivatedRoute,u.LocationStrategy],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵted"](82,null,["",""])),i["ɵppd"](83,1)],function(e,t){var n=t.component;e(t,6,0,!n.appSession.tenant||!n.appSession.tenant.logoId),e(t,8,0,n.appSession.tenant&&n.appSession.tenant.logoId),e(t,20,0,""),e(t,23,0,"userNameOrEmailAddress",n.loginService.authenticateModel.userNameOrEmailAddress),e(t,29,0,!i["ɵnov"](t,23).touched),e(t,33,0,""),e(t,34,0,"32"),e(t,37,0,"password",n.loginService.authenticateModel.password),e(t,42,0,!i["ɵnov"](t,37).touched),e(t,48,0,"rememberMe",n.loginService.rememberMe),e(t,55,0,n.useCaptcha),e(t,57,0,n.useCaptcha),e(t,60,0,"/account/forgot-password"),e(t,74,0,(n.multiTenancySideIsTeanant||!n.isMultiTenancyEnabled)&&n.loginService.externalLoginProviders.length>0),e(t,77,0,n.isSelfRegistrationAllowed),e(t,79,0,!n.multiTenancySideIsTeanant&&n.isTenantSelfRegistrationAllowed),e(t,81,0,"/account/email-activation")},function(e,t){e(t,2,0,void 0);var n=i["ɵunv"](t,10,0,e(t,11,0,i["ɵnov"](t,0),"LogIn"));e(t,10,0,n),e(t,12,0,i["ɵnov"](t,16).ngClassUntouched,i["ɵnov"](t,16).ngClassTouched,i["ɵnov"](t,16).ngClassPristine,i["ɵnov"](t,16).ngClassDirty,i["ɵnov"](t,16).ngClassValid,i["ɵnov"](t,16).ngClassInvalid,i["ɵnov"](t,16).ngClassPending);var l=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,18,0,e(t,27,0,i["ɵnov"](t,0),"UserNameOrEmail"))," *");e(t,18,0,l,i["ɵnov"](t,20).required?"":null,i["ɵnov"](t,25).ngClassUntouched,i["ɵnov"](t,25).ngClassTouched,i["ɵnov"](t,25).ngClassPristine,i["ɵnov"](t,25).ngClassDirty,i["ɵnov"](t,25).ngClassValid,i["ɵnov"](t,25).ngClassInvalid,i["ɵnov"](t,25).ngClassPending);var r=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,31,0,e(t,40,0,i["ɵnov"](t,0),"Password"))," *");e(t,31,0,r,i["ɵnov"](t,33).required?"":null,i["ɵnov"](t,34).maxlength?i["ɵnov"](t,34).maxlength:null,i["ɵnov"](t,39).ngClassUntouched,i["ɵnov"](t,39).ngClassTouched,i["ɵnov"](t,39).ngClassPristine,i["ɵnov"](t,39).ngClassDirty,i["ɵnov"](t,39).ngClassValid,i["ɵnov"](t,39).ngClassInvalid,i["ɵnov"](t,39).ngClassPending),e(t,45,0,i["ɵnov"](t,50).ngClassUntouched,i["ɵnov"](t,50).ngClassTouched,i["ɵnov"](t,50).ngClassPristine,i["ɵnov"](t,50).ngClassDirty,i["ɵnov"](t,50).ngClassValid,i["ɵnov"](t,50).ngClassInvalid,i["ɵnov"](t,50).ngClassPending);var o=i["ɵunv"](t,51,0,e(t,52,0,i["ɵnov"](t,0),"RememberMe"));e(t,51,0,o),e(t,59,0,i["ɵnov"](t,60).target,i["ɵnov"](t,60).href);var s=i["ɵunv"](t,61,0,e(t,62,0,i["ɵnov"](t,0),"ForgotPassword"));e(t,61,0,s),e(t,63,0,!i["ɵnov"](t,14).form.valid);var a=i["ɵunv"](t,64,0,e(t,65,0,i["ɵnov"](t,0),"LogIn"));e(t,64,0,a);var u=i["ɵunv"](t,70,0,e(t,71,0,i["ɵnov"](t,0),"LoginWith"));e(t,70,0,u),e(t,80,0,i["ɵnov"](t,81).target,i["ɵnov"](t,81).href);var c=i["ɵunv"](t,82,0,e(t,83,0,i["ɵnov"](t,0),"EmailActivation"));e(t,82,0,c)})}function kt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Ft,St)),i["ɵdid"](1,114688,null,0,yt,[i.Injector,Je,L.Router,vt.a,y.ac],null,null)],function(e,t){e(t,1,0)},null)}var Nt=i["ɵccf"]("ng-component",yt,kt,{},{},[]),Pt=n("gGBz"),Ot=n("KIW0"),Dt=n("NqMA"),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(m.d)(t,e),t}(y.Kb),Lt=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o._accountService=n,o._router=i,o._loginService=l,o._profileService=r,o.model=new Ht,o.passwordComplexitySetting=new y.Db,o.recaptchaSiteKey=V.a.recaptchaSiteKey,o.saving=!1,o}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;null!=this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe(function(t){e.passwordComplexitySetting=t.setting}):this._router.navigate(["account/login"])},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnRegistration")},enumerable:!0,configurable:!0}),t.prototype.save=function(){var e=this;!this.useCaptcha||this.model.captchaResponse?(this.saving=!0,this._accountService.register(this.model).pipe(Object(S.a)(function(){e.saving=!1})).pipe(Object(pe.a)(function(t,n){e.recaptchaRef.reset()})).subscribe(function(t){if(!t.canLogin)return e.notify.success(e.l("SuccessfullyRegistered")),void e._router.navigate(["account/login"]);e.saving=!0,e._loginService.authenticateModel.userNameOrEmailAddress=e.model.userName,e._loginService.authenticateModel.password=e.model.password,e._loginService.authenticate(function(){e.saving=!1})})):this.message.warn(this.l("CaptchaCanNotBeEmpty"))},t.prototype.captchaResolved=function(e){this.model.captchaResponse=e},t}(v.a),Vt=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Bt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,15,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,[""," "])),i["ɵppd"](3,1),(e()(),i["ɵeld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](5,null,[" ",""])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](8,null,[" ",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](11,null,[" ",""])),i["ɵppd"](12,1),(e()(),i["ɵeld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](14,null,[" "," "])),i["ɵppd"](15,2)],null,function(e,t){var n=t.component;e(t,1,0,!i["ɵnov"](t.parent,74).errors.requireDigit);var l=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireDigit_Hint"));e(t,2,0,l),e(t,4,0,!i["ɵnov"](t.parent,74).errors.requireLowercase);var r=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireLowercase_Hint"));e(t,5,0,r),e(t,7,0,!i["ɵnov"](t.parent,74).errors.requireUppercase);var o=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireUppercase_Hint"));e(t,8,0,o),e(t,10,0,!i["ɵnov"](t.parent,74).errors.requireNonAlphanumeric);var s=i["ɵunv"](t,11,0,e(t,12,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));e(t,11,0,s),e(t,13,0,!i["ɵnov"](t.parent,74).errors.requiredLength);var a=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));e(t,14,0,a)})}function jt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,18,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,[" ",""])),i["ɵppd"](3,1),(e()(),i["ɵeld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](5,null,[" ",""])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](8,null,[" ",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](11,null,[" ",""])),i["ɵppd"](12,1),(e()(),i["ɵeld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](14,null,[" "," "])),i["ɵppd"](15,2),(e()(),i["ɵeld"](16,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](17,null,["",""])),i["ɵppd"](18,1)],null,function(e,t){var n=t.component;e(t,1,0,!i["ɵnov"](t.parent,90).errors.requireDigit);var l=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireDigit_Hint"));e(t,2,0,l),e(t,4,0,!i["ɵnov"](t.parent,90).errors.requireLowercase);var r=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireLowercase_Hint"));e(t,5,0,r),e(t,7,0,!i["ɵnov"](t.parent,90).errors.requireUppercase);var o=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireUppercase_Hint"));e(t,8,0,o),e(t,10,0,!i["ɵnov"](t.parent,90).errors.requireNonAlphanumeric);var s=i["ɵunv"](t,11,0,e(t,12,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));e(t,11,0,s),e(t,13,0,!i["ɵnov"](t.parent,90).errors.requiredLength);var a=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));e(t,14,0,a),e(t,16,0,i["ɵnov"](t.parent,90).valid);var u=i["ɵunv"](t,17,0,e(t,18,0,i["ɵnov"](t.parent,0),"PasswordsDontMatch"));e(t,17,0,u)})}function Ut(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"p",[["class","mt-2 form-text text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"Captha_Hint"));e(t,1,0,n)})}function qt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","form-group mt-2 captcha-container"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,1,"re-captcha",[],[[1,"id",0]],[[null,"resolved"]],function(e,t,n){var i=!0;return"resolved"===t&&(i=!1!==e.component.captchaResolved(n)&&i),i},ft,gt)),i["ɵdid"](2,4374528,[[1,4],["recaptchaRef",4]],0,dt,[i.ElementRef,at,i.NgZone,[2,ut]],{siteKey:[0,"siteKey"]},{resolved:"resolved"})],function(e,t){e(t,2,0,t.component.recaptchaSiteKey)},function(e,t){e(t,1,0,i["ɵnov"](t,2).id)})}function Mt(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵqud"](402653184,1,{recaptchaRef:0}),(e()(),i["ɵeld"](2,0,null,null,109,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,108,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](5,null,[" "," "])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,104,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,9).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,9).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.save()&&l),l},null,null)),i["ɵdid"](8,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](9,4210688,[["registerForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](11,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](12,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](13,0,null,null,10,"input",[["autoFocus",""],["class","form-control"],["maxlength","32"],["name","Name"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,14)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,14).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,14)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,14)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.name=n)&&l),l},null,null)),i["ɵdid"](14,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](15,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](16,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](19,671744,[["nameInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](21,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](22,4210688,null,0,mt.a,[i.ElementRef],null,null),i["ɵppd"](23,1),(e()(),i["ɵeld"](24,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](25,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](26,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](27,0,null,null,9,"input",[["class","form-control"],["maxlength","32"],["name","Surname"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,28)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,28).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,28)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,28)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.surname=n)&&l),l},null,null)),i["ɵdid"](28,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](29,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](30,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](33,671744,[["surnameInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](35,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](36,1),(e()(),i["ɵeld"](37,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](38,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](39,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](40,0,null,null,10,"input",[["class","form-control"],["maxlength","256"],["name","EmailAddress"],["pattern","^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"],["required",""],["type","email"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,41)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,41).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,41)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,41)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.emailAddress=n)&&l),l},null,null)),i["ɵdid"](41,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](42,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](43,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵdid"](44,540672,null,0,c.PatternValidator,[],{pattern:[0,"pattern"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,c.MaxLengthValidator,c.PatternValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](47,671744,[["emailAddressInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](49,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](50,1),(e()(),i["ɵeld"](51,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](52,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](53,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](54,0,null,null,9,"input",[["autocomplete","new-password"],["class","form-control"],["maxlength","32"],["name","UserName"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,55)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,55).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,55)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,55)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.userName=n)&&l),l},null,null)),i["ɵdid"](55,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](56,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](57,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](60,671744,[["userNameInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](62,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](63,1),(e()(),i["ɵeld"](64,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](65,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](66,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](67,0,null,null,11,"input",[["class","form-control"],["name","Password"],["pPassword",""],["required",""],["reverse","true"],["type","password"],["validateEqual","PasswordRepeat"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"],[null,"keyup"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,68)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,68).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,68)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,68)._compositionEnd(n.target.value)&&l),"input"===t&&(l=!1!==i["ɵnov"](e,77).onInput(n)&&l),"focus"===t&&(l=!1!==i["ɵnov"](e,77).onFocus(n)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,77).onBlur(n)&&l),"keyup"===t&&(l=!1!==i["ɵnov"](e,77).onKeyup(n)&&l),"ngModelChange"===t&&(l=!1!==(r.model.password=n)&&l),l},null,null)),i["ɵdid"](68,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](69,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](70,16384,null,0,Pt.a,[[8,"PasswordRepeat"],[8,"true"]],null,null),i["ɵdid"](71,16384,null,0,Ot.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,Pt.a,Ot.a]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](74,671744,[["Password",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](76,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](77,409600,null,0,Dt.Password,[i.ElementRef,i.NgZone],{promptLabel:[0,"promptLabel"],weakLabel:[1,"weakLabel"],mediumLabel:[2,"mediumLabel"],strongLabel:[3,"strongLabel"]},null),i["ɵppd"](78,1),(e()(),i["ɵeld"](79,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Bt)),i["ɵdid"](81,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](82,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](83,0,null,null,10,"input",[["class","form-control"],["name","PasswordRepeat"],["required",""],["reverse","false"],["type","password"],["validateEqual","Password"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0;return"input"===t&&(l=!1!==i["ɵnov"](e,84)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,84).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,84)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,84)._compositionEnd(n.target.value)&&l),l},null,null)),i["ɵdid"](84,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](85,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](86,16384,null,0,Pt.a,[[8,"Password"],[8,"false"]],null,null),i["ɵdid"](87,16384,null,0,Ot.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,Pt.a,Ot.a]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](90,671744,[["PasswordRepeat",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},null),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](92,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](93,1),(e()(),i["ɵeld"](94,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,jt)),i["ɵdid"](96,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Ut)),i["ɵdid"](98,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,qt)),i["ɵdid"](100,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](101,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](102,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,103).onClick()&&l),l},null,null)),i["ɵdid"](103,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵeld"](104,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(e()(),i["ɵted"](105,null,[" ",""])),i["ɵppd"](106,1),(e()(),i["ɵeld"](107,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["ɵdid"](108,4276224,null,0,d.a,[i.ElementRef,h.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(e()(),i["ɵeld"](109,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(e()(),i["ɵted"](110,null,[" ",""])),i["ɵppd"](111,1)],function(e,t){var n=t.component;e(t,15,0,""),e(t,16,0,"32"),e(t,19,0,"Name",n.model.name),e(t,25,0,i["ɵnov"](t,19)),e(t,29,0,""),e(t,30,0,"32"),e(t,33,0,"Surname",n.model.surname),e(t,38,0,i["ɵnov"](t,33)),e(t,42,0,""),e(t,43,0,"256"),e(t,44,0,"^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"),e(t,47,0,"EmailAddress",n.model.emailAddress),e(t,52,0,i["ɵnov"](t,47)),e(t,56,0,""),e(t,57,0,"32"),e(t,60,0,"UserName",n.model.userName),e(t,65,0,i["ɵnov"](t,60)),e(t,69,0,""),e(t,71,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),e(t,74,0,"Password",n.model.password),e(t,77,0,n.l("PleaseEnterYourNewPassword"),n.l("weak"),n.l("medium"),n.l("strong")),e(t,81,0,i["ɵnov"](t,74).errors),e(t,85,0,""),e(t,87,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),e(t,90,0,"PasswordRepeat",n.model.passwordRepeat),e(t,96,0,i["ɵnov"](t,90).errors),e(t,98,0,n.useCaptcha),e(t,100,0,n.useCaptcha),e(t,103,0,"/account/login"),e(t,108,0,n.saving,n.l("SavingWithThreeDot"))},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t,0),"SignUp"));e(t,5,0,l),e(t,7,0,i["ɵnov"](t,11).ngClassUntouched,i["ɵnov"](t,11).ngClassTouched,i["ɵnov"](t,11).ngClassPristine,i["ɵnov"](t,11).ngClassDirty,i["ɵnov"](t,11).ngClassValid,i["ɵnov"](t,11).ngClassInvalid,i["ɵnov"](t,11).ngClassPending);var r=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,13,0,e(t,23,0,i["ɵnov"](t,0),"Name"))," *");e(t,13,0,r,i["ɵnov"](t,15).required?"":null,i["ɵnov"](t,16).maxlength?i["ɵnov"](t,16).maxlength:null,i["ɵnov"](t,21).ngClassUntouched,i["ɵnov"](t,21).ngClassTouched,i["ɵnov"](t,21).ngClassPristine,i["ɵnov"](t,21).ngClassDirty,i["ɵnov"](t,21).ngClassValid,i["ɵnov"](t,21).ngClassInvalid,i["ɵnov"](t,21).ngClassPending);var o=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,27,0,e(t,36,0,i["ɵnov"](t,0),"Surname"))," *");e(t,27,0,o,i["ɵnov"](t,29).required?"":null,i["ɵnov"](t,30).maxlength?i["ɵnov"](t,30).maxlength:null,i["ɵnov"](t,35).ngClassUntouched,i["ɵnov"](t,35).ngClassTouched,i["ɵnov"](t,35).ngClassPristine,i["ɵnov"](t,35).ngClassDirty,i["ɵnov"](t,35).ngClassValid,i["ɵnov"](t,35).ngClassInvalid,i["ɵnov"](t,35).ngClassPending);var s=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,40,0,e(t,50,0,i["ɵnov"](t,0),"EmailAddress"))," *");e(t,40,1,[s,i["ɵnov"](t,42).required?"":null,i["ɵnov"](t,43).maxlength?i["ɵnov"](t,43).maxlength:null,i["ɵnov"](t,44).pattern?i["ɵnov"](t,44).pattern:null,i["ɵnov"](t,49).ngClassUntouched,i["ɵnov"](t,49).ngClassTouched,i["ɵnov"](t,49).ngClassPristine,i["ɵnov"](t,49).ngClassDirty,i["ɵnov"](t,49).ngClassValid,i["ɵnov"](t,49).ngClassInvalid,i["ɵnov"](t,49).ngClassPending]);var a=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,54,0,e(t,63,0,i["ɵnov"](t,0),"UserName"))," *");e(t,54,0,a,i["ɵnov"](t,56).required?"":null,i["ɵnov"](t,57).maxlength?i["ɵnov"](t,57).maxlength:null,i["ɵnov"](t,62).ngClassUntouched,i["ɵnov"](t,62).ngClassTouched,i["ɵnov"](t,62).ngClassPristine,i["ɵnov"](t,62).ngClassDirty,i["ɵnov"](t,62).ngClassValid,i["ɵnov"](t,62).ngClassInvalid,i["ɵnov"](t,62).ngClassPending);var u=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,67,0,e(t,78,0,i["ɵnov"](t,0),"Password")),"");e(t,67,1,[u,i["ɵnov"](t,69).required?"":null,i["ɵnov"](t,76).ngClassUntouched,i["ɵnov"](t,76).ngClassTouched,i["ɵnov"](t,76).ngClassPristine,i["ɵnov"](t,76).ngClassDirty,i["ɵnov"](t,76).ngClassValid,i["ɵnov"](t,76).ngClassInvalid,i["ɵnov"](t,76).ngClassPending,!0,!0,!0,!0,i["ɵnov"](t,77).filled]),e(t,79,0,i["ɵnov"](t,9).form.valid||i["ɵnov"](t,9).form.pristine);var c=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,83,0,e(t,93,0,i["ɵnov"](t,0),"PasswordRepeat")),"");e(t,83,0,c,i["ɵnov"](t,85).required?"":null,i["ɵnov"](t,92).ngClassUntouched,i["ɵnov"](t,92).ngClassTouched,i["ɵnov"](t,92).ngClassPristine,i["ɵnov"](t,92).ngClassDirty,i["ɵnov"](t,92).ngClassValid,i["ɵnov"](t,92).ngClassInvalid,i["ɵnov"](t,92).ngClassPending),e(t,94,0,i["ɵnov"](t,9).form.valid||i["ɵnov"](t,9).form.pristine),e(t,102,0,n.saving);var d=i["ɵunv"](t,105,0,e(t,106,0,i["ɵnov"](t,0),"Back"));e(t,105,0,d),e(t,107,0,!i["ɵnov"](t,9).form.valid);var h=i["ɵunv"](t,110,0,e(t,111,0,i["ɵnov"](t,0),"Submit"));e(t,110,0,h)})}function Kt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Mt,Vt)),i["ɵdid"](1,114688,null,0,Lt,[i.Injector,y.b,L.Router,Je,y.Jb],null,null)],function(e,t){e(t,1,0)},null)}var Gt=i["ɵccf"]("ng-component",Lt,Kt,{},{},[]),Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(m.d)(t,e),t}(y.Lb),zt=function(){return function(){}}(),Jt=function(e){function t(t,n,i,l,r,o){var s=e.call(this,t)||this;return s._tenantRegistrationService=n,s._router=i,s._profileService=l,s._tenantRegistrationHelper=r,s._activatedRoute=o,s.model=new Wt,s.passwordComplexitySetting=new y.Db,s.subscriptionStartType=y.lc,s.paymentPeriodType=y.Gb,s.selectedPaymentPeriodType=y.Gb.Monthly,s.subscriptionPaymentGateway=y.ic,s.paymentId="",s.recaptchaSiteKey=V.a.recaptchaSiteKey,s.saving=!1,s}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.model.editionId=this._activatedRoute.snapshot.queryParams.editionId,this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.model.editionId&&(this.model.subscriptionStartType=this._activatedRoute.snapshot.queryParams.subscriptionStartType),null==this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe(function(t){e.passwordComplexitySetting=t.setting}):this._router.navigate(["account/login"])},t.prototype.ngAfterViewInit=function(){var e=this;this.model.editionId&&this._tenantRegistrationService.getEdition(this.model.editionId).subscribe(function(t){e.model.edition=t})},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.TenantManagement.UseCaptchaOnRegistration")},enumerable:!0,configurable:!0}),t.prototype.save=function(){var e=this;!this.useCaptcha||this.model.captchaResponse?(this.saving=!0,this._tenantRegistrationService.registerTenant(this.model).pipe(Object(S.a)(function(){e.saving=!1})).pipe(Object(pe.a)(function(t,n){e.recaptchaRef.reset()})).subscribe(function(t){e.notify.success(e.l("SuccessfullyRegistered")),e._tenantRegistrationHelper.registrationResult=t,parseInt(e.model.subscriptionStartType.toString())===y.lc.Paid?e._router.navigate(["account/buy"],{queryParams:{tenantId:t.tenantId,editionId:e.model.editionId,subscriptionStartType:e.model.subscriptionStartType,editionPaymentType:e.editionPaymentType}}):e._router.navigate(["account/register-tenant-result"])})):this.message.warn(this.l("CaptchaCanNotBeEmpty"))},t.prototype.captchaResolved=function(e){this.model.captchaResponse=e},t}(v.a),Yt=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function $t(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"h4",[["class","text-center"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,["",": ",""])),i["ɵppd"](2,1)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"Edition"));e(t,1,0,l,n.model.edition.displayName)})}function Xt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"span",[["class","form-text text-danger text-left"]],null,null,null,null,null)),(e()(),i["ɵted"](2,null,["",""])),i["ɵppd"](3,1)],null,function(e,t){var n=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"TenantName_Regex_Description"));e(t,2,0,n)})}function Qt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,15,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,["",""])),i["ɵppd"](3,1),(e()(),i["ɵeld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](5,null,["",""])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](8,null,["",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](11,null,["",""])),i["ɵppd"](12,1),(e()(),i["ɵeld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),i["ɵppd"](15,2)],null,function(e,t){var n=t.component;e(t,1,0,!i["ɵnov"](t.parent,72).errors.requireDigit);var l=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireDigit_Hint"));e(t,2,0,l),e(t,4,0,!i["ɵnov"](t.parent,72).errors.requireLowercase);var r=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireLowercase_Hint"));e(t,5,0,r),e(t,7,0,!i["ɵnov"](t.parent,72).errors.requireUppercase);var o=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireUppercase_Hint"));e(t,8,0,o),e(t,10,0,!i["ɵnov"](t.parent,72).errors.requireNonAlphanumeric);var s=i["ɵunv"](t,11,0,e(t,12,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));e(t,11,0,s),e(t,13,0,!i["ɵnov"](t.parent,72).errors.requiredLength);var a=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));e(t,14,0,a)})}function Zt(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,18,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,["",""])),i["ɵppd"](3,1),(e()(),i["ɵeld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](5,null,["",""])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](8,null,["",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](11,null,["",""])),i["ɵppd"](12,1),(e()(),i["ɵeld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),i["ɵppd"](15,2),(e()(),i["ɵeld"](16,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](17,null,["",""])),i["ɵppd"](18,1)],null,function(e,t){var n=t.component;e(t,1,0,!i["ɵnov"](t.parent,88).errors.requireDigit);var l=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireDigit_Hint"));e(t,2,0,l),e(t,4,0,!i["ɵnov"](t.parent,88).errors.requireLowercase);var r=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireLowercase_Hint"));e(t,5,0,r),e(t,7,0,!i["ɵnov"](t.parent,88).errors.requireUppercase);var o=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireUppercase_Hint"));e(t,8,0,o),e(t,10,0,!i["ɵnov"](t.parent,88).errors.requireNonAlphanumeric);var s=i["ɵunv"](t,11,0,e(t,12,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));e(t,11,0,s),e(t,13,0,!i["ɵnov"](t.parent,88).errors.requiredLength);var a=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));e(t,14,0,a),e(t,16,0,i["ɵnov"](t.parent,88).valid);var u=i["ɵunv"](t,17,0,e(t,18,0,i["ɵnov"](t.parent,0),"PasswordsDontMatch"));e(t,17,0,u)})}function en(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"p",[["class","mt-2 form-text text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"Captha_Hint"));e(t,1,0,n)})}function tn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","form-group mt-2 text-center captcha-container"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,1,"re-captcha",[],[[1,"id",0]],[[null,"resolved"]],function(e,t,n){var i=!0;return"resolved"===t&&(i=!1!==e.component.captchaResolved(n)&&i),i},ft,gt)),i["ɵdid"](2,4374528,[[1,4],["recaptchaRef",4]],0,dt,[i.ElementRef,at,i.NgZone,[2,ut]],{siteKey:[0,"siteKey"]},{resolved:"resolved"})],function(e,t){e(t,2,0,t.component.recaptchaSiteKey)},function(e,t){e(t,1,0,i["ɵnov"](t,2).id)})}function nn(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵqud"](402653184,1,{recaptchaRef:0}),(e()(),i["ɵeld"](2,0,null,null,107,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,106,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](5,null,[" "," "])),i["ɵppd"](6,1),(e()(),i["ɵand"](16777216,null,null,1,null,$t)),i["ɵdid"](8,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](9,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(e()(),i["ɵeld"](10,0,null,null,99,"form",[["class","kt-form mt-2"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,12).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,12).onReset()&&l),"submit"===t&&(l=!1!==r.save()&&l),l},null,null)),i["ɵdid"](11,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](12,4210688,[["registerForm",4]],0,c.NgForm,[[8,null],[8,null]],null,null),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](14,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](15,0,null,null,2,"h5",[["class","mt-2"]],null,null,null,null,null)),(e()(),i["ɵted"](16,null,[" "," "])),i["ɵppd"](17,1),(e()(),i["ɵeld"](18,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,11,"input",[["autoFocus",""],["class","form-control"],["maxlength","64"],["name","tenancyName"],["pattern","^[a-zA-Z][a-zA-Z0-9_-]{1,}$"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,20)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,20).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,20)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,20)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.tenancyName=n)&&l),l},null,null)),i["ɵdid"](20,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](21,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](22,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵdid"](23,540672,null,0,c.PatternValidator,[],{pattern:[0,"pattern"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,c.MaxLengthValidator,c.PatternValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](26,671744,[["tenancyName",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](28,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](29,4210688,null,0,mt.a,[i.ElementRef],null,null),i["ɵppd"](30,1),(e()(),i["ɵand"](16777216,null,null,1,null,Xt)),i["ɵdid"](32,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](33,0,null,null,12,"div",[["class","form-group "]],null,null,null,null,null)),(e()(),i["ɵeld"](34,0,null,null,9,"input",[["class","form-control"],["maxlength","128"],["name","Name"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,35)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,35).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,35)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,35)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.name=n)&&l),l},null,null)),i["ɵdid"](35,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](36,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](37,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](40,671744,[["nameInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](42,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](43,1),(e()(),i["ɵeld"](44,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](45,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](46,0,null,null,2,"h5",[["class","mt-2"]],null,null,null,null,null)),(e()(),i["ɵted"](47,null,[" "," "])),i["ɵppd"](48,1),(e()(),i["ɵeld"](49,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(e()(),i["ɵeld"](50,0,null,null,10,"input",[["class","form-control"],["email",""],["maxlength","256"],["name","adminEmailAddress"],["required",""],["type","email"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,51)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,51).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,51)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,51)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.adminEmailAddress=n)&&l),l},null,null)),i["ɵdid"](51,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](52,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](53,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵdid"](54,16384,null,0,c.EmailValidator,[],{email:[0,"email"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,c.MaxLengthValidator,c.EmailValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](57,671744,[["adminEmailAddressInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](59,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](60,1),(e()(),i["ɵeld"](61,0,null,null,2,"span",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](62,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](63,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](64,0,null,null,15,"div",[["class","form-group "]],null,null,null,null,null)),(e()(),i["ɵeld"](65,0,null,null,11,"input",[["class","form-control"],["name","Password"],["pPassword",""],["required",""],["reverse","true"],["type","password"],["validateEqual","PasswordRepeat"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"],[null,"keyup"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,66)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,66).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,66)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,66)._compositionEnd(n.target.value)&&l),"input"===t&&(l=!1!==i["ɵnov"](e,75).onInput(n)&&l),"focus"===t&&(l=!1!==i["ɵnov"](e,75).onFocus(n)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,75).onBlur(n)&&l),"keyup"===t&&(l=!1!==i["ɵnov"](e,75).onKeyup(n)&&l),"ngModelChange"===t&&(l=!1!==(r.model.adminPassword=n)&&l),l},null,null)),i["ɵdid"](66,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](67,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](68,16384,null,0,Pt.a,[[8,"PasswordRepeat"],[8,"true"]],null,null),i["ɵdid"](69,16384,null,0,Ot.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,Pt.a,Ot.a]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](72,671744,[["Password",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](74,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](75,409600,null,0,Dt.Password,[i.ElementRef,i.NgZone],{promptLabel:[0,"promptLabel"],weakLabel:[1,"weakLabel"],mediumLabel:[2,"mediumLabel"],strongLabel:[3,"strongLabel"]},null),i["ɵppd"](76,1),(e()(),i["ɵeld"](77,0,null,null,2,"div",[["class","form-group "]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Qt)),i["ɵdid"](79,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](80,0,null,null,14,"div",[["class","form-group "]],null,null,null,null,null)),(e()(),i["ɵeld"](81,0,null,null,10,"input",[["class","form-control"],["name","PasswordRepeat"],["required",""],["reverse","false"],["type","password"],["validateEqual","Password"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0;return"input"===t&&(l=!1!==i["ɵnov"](e,82)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,82).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,82)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,82)._compositionEnd(n.target.value)&&l),l},null,null)),i["ɵdid"](82,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](83,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](84,16384,null,0,Pt.a,[[8,"Password"],[8,"false"]],null,null),i["ɵdid"](85,16384,null,0,Ot.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,Pt.a,Ot.a]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](88,671744,[["PasswordRepeat",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},null),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](90,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](91,1),(e()(),i["ɵeld"](92,0,null,null,2,"div",[["class","form-group "]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Zt)),i["ɵdid"](94,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,en)),i["ɵdid"](96,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,tn)),i["ɵdid"](98,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](99,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](100,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,101).onClick()&&l),l},null,null)),i["ɵdid"](101,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵeld"](102,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(e()(),i["ɵted"](103,null,[" ",""])),i["ɵppd"](104,1),(e()(),i["ɵeld"](105,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["ɵdid"](106,4276224,null,0,d.a,[i.ElementRef,h.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(e()(),i["ɵeld"](107,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(e()(),i["ɵted"](108,null,[" ",""])),i["ɵppd"](109,1)],function(e,t){var n=t.component;e(t,8,0,n.model.edition),e(t,21,0,""),e(t,22,0,"64"),e(t,23,0,"^[a-zA-Z][a-zA-Z0-9_-]{1,}$"),e(t,26,0,"tenancyName",n.model.tenancyName),e(t,32,0,!i["ɵnov"](t,26).valid&&!i["ɵnov"](t,26).pristine),e(t,36,0,""),e(t,37,0,"128"),e(t,40,0,"Name",n.model.name),e(t,45,0,i["ɵnov"](t,40)),e(t,52,0,""),e(t,53,0,"256"),e(t,54,0,""),e(t,57,0,"adminEmailAddress",n.model.adminEmailAddress),e(t,63,0,i["ɵnov"](t,57)),e(t,67,0,""),e(t,69,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),e(t,72,0,"Password",n.model.adminPassword),e(t,75,0,n.l("PleaseEnterYourNewPassword"),n.l("weak"),n.l("medium"),n.l("strong")),e(t,79,0,i["ɵnov"](t,72).errors),e(t,83,0,""),e(t,85,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),e(t,88,0,"PasswordRepeat",n.model.passwordRepeat),e(t,94,0,i["ɵnov"](t,88).errors),e(t,96,0,n.useCaptcha),e(t,98,0,n.useCaptcha),e(t,101,0,"/account/login"),e(t,106,0,n.saving,n.l("SavingWithThreeDot"))},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t,0),"TenantSignUp"));e(t,5,0,l),e(t,10,0,i["ɵnov"](t,14).ngClassUntouched,i["ɵnov"](t,14).ngClassTouched,i["ɵnov"](t,14).ngClassPristine,i["ɵnov"](t,14).ngClassDirty,i["ɵnov"](t,14).ngClassValid,i["ɵnov"](t,14).ngClassInvalid,i["ɵnov"](t,14).ngClassPending);var r=i["ɵunv"](t,16,0,e(t,17,0,i["ɵnov"](t,0),"TenantInformations"));e(t,16,0,r);var o=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,19,0,e(t,30,0,i["ɵnov"](t,0),"TenancyName"))," *");e(t,19,1,[o,i["ɵnov"](t,21).required?"":null,i["ɵnov"](t,22).maxlength?i["ɵnov"](t,22).maxlength:null,i["ɵnov"](t,23).pattern?i["ɵnov"](t,23).pattern:null,i["ɵnov"](t,28).ngClassUntouched,i["ɵnov"](t,28).ngClassTouched,i["ɵnov"](t,28).ngClassPristine,i["ɵnov"](t,28).ngClassDirty,i["ɵnov"](t,28).ngClassValid,i["ɵnov"](t,28).ngClassInvalid,i["ɵnov"](t,28).ngClassPending]);var s=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,34,0,e(t,43,0,i["ɵnov"](t,0),"TenantName"))," *");e(t,34,0,s,i["ɵnov"](t,36).required?"":null,i["ɵnov"](t,37).maxlength?i["ɵnov"](t,37).maxlength:null,i["ɵnov"](t,42).ngClassUntouched,i["ɵnov"](t,42).ngClassTouched,i["ɵnov"](t,42).ngClassPristine,i["ɵnov"](t,42).ngClassDirty,i["ɵnov"](t,42).ngClassValid,i["ɵnov"](t,42).ngClassInvalid,i["ɵnov"](t,42).ngClassPending);var a=i["ɵunv"](t,47,0,e(t,48,0,i["ɵnov"](t,0),"AccountSettings"));e(t,47,0,a);var u=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,50,0,e(t,60,0,i["ɵnov"](t,0),"AdminEmailAddress"))," *");e(t,50,0,u,i["ɵnov"](t,52).required?"":null,i["ɵnov"](t,53).maxlength?i["ɵnov"](t,53).maxlength:null,i["ɵnov"](t,59).ngClassUntouched,i["ɵnov"](t,59).ngClassTouched,i["ɵnov"](t,59).ngClassPristine,i["ɵnov"](t,59).ngClassDirty,i["ɵnov"](t,59).ngClassValid,i["ɵnov"](t,59).ngClassInvalid,i["ɵnov"](t,59).ngClassPending);var c=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,65,0,e(t,76,0,i["ɵnov"](t,0),"AdminPassword")),"");e(t,65,1,[c,i["ɵnov"](t,67).required?"":null,i["ɵnov"](t,74).ngClassUntouched,i["ɵnov"](t,74).ngClassTouched,i["ɵnov"](t,74).ngClassPristine,i["ɵnov"](t,74).ngClassDirty,i["ɵnov"](t,74).ngClassValid,i["ɵnov"](t,74).ngClassInvalid,i["ɵnov"](t,74).ngClassPending,!0,!0,!0,!0,i["ɵnov"](t,75).filled]),e(t,77,0,i["ɵnov"](t,12).form.valid||i["ɵnov"](t,12).form.pristine);var d=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,81,0,e(t,91,0,i["ɵnov"](t,0),"PasswordRepeat")),"");e(t,81,0,d,i["ɵnov"](t,83).required?"":null,i["ɵnov"](t,90).ngClassUntouched,i["ɵnov"](t,90).ngClassTouched,i["ɵnov"](t,90).ngClassPristine,i["ɵnov"](t,90).ngClassDirty,i["ɵnov"](t,90).ngClassValid,i["ɵnov"](t,90).ngClassInvalid,i["ɵnov"](t,90).ngClassPending),e(t,92,0,i["ɵnov"](t,12).form.valid||i["ɵnov"](t,12).form.pristine),e(t,100,0,n.saving);var h=i["ɵunv"](t,103,0,e(t,104,0,i["ɵnov"](t,0),"Back"));e(t,103,0,h),e(t,105,0,!i["ɵnov"](t,12).form.valid);var p=i["ɵunv"](t,108,0,e(t,109,0,i["ɵnov"](t,0),"Submit"));e(t,108,0,p)})}function ln(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,nn,Yt)),i["ɵdid"](1,4308992,null,0,Jt,[i.Injector,y.qc,L.Router,y.Jb,zt,L.ActivatedRoute],null,null)],function(e,t){e(t,1,0)},null)}var rn=i["ɵccf"]("ng-component",Jt,ln,{},{},[]),on=n("WroF"),sn=function(e){function t(t,n,i,l){var r=e.call(this,t)||this;return r._router=n,r._appUrlService=i,r._tenantRegistrationHelper=l,r.model=new y.Mb,r.saving=!1,r}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){this._tenantRegistrationHelper.registrationResult?(this.model=this._tenantRegistrationHelper.registrationResult,abp.multiTenancy.setTenantIdCookie(this.model.tenantId),this.tenantUrl=this._appUrlService.getAppRootUrlOfTenant(this.model.tenancyName)):this._router.navigate(["account/login"])},t}(v.a),an=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function un(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","alert alert-warning"],["role","alert"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,2)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"ConfirmationMailSentPleaseClickLinkInTheEmail",n.model.emailAddress));e(t,1,0,l)})}function cn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","alert alert-primary"],["role","alert"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"YourAccountIsWaitingToBeActivatedByAdmin"));e(t,1,0,n)})}function dn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,5,"div",[["class","alert alert-secondary"],["role","alert"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" ",""])),i["ɵppd"](2,1),(e()(),i["ɵeld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),i["ɵted"](5,null,["",""]))],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"TenantRegistrationLoginInfo"));e(t,1,0,l),e(t,4,0,i["ɵinlineInterpolate"](1,"",n.tenantUrl,"")),e(t,5,0,n.tenantUrl)})}function hn(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,31,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,2,"h4",[],null,null,null,null,null)),(e()(),i["ɵted"](3,null,["",""])),i["ɵppd"](4,1),(e()(),i["ɵeld"](5,0,null,null,20,"ul",[],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](8,null,["",":"])),i["ɵppd"](9,1),(e()(),i["ɵted"](10,null,[" ",""])),(e()(),i["ɵeld"](11,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](13,null,["",":"])),i["ɵppd"](14,1),(e()(),i["ɵted"](15,null,[" ",""])),(e()(),i["ɵeld"](16,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),i["ɵeld"](17,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](18,null,["",":"])),i["ɵppd"](19,1),(e()(),i["ɵted"](20,null,[" ",""])),(e()(),i["ɵeld"](21,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),i["ɵeld"](22,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(e()(),i["ɵted"](23,null,["",":"])),i["ɵppd"](24,1),(e()(),i["ɵted"](25,null,[" ",""])),(e()(),i["ɵeld"](26,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,un)),i["ɵdid"](28,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,cn)),i["ɵdid"](30,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,dn)),i["ɵdid"](32,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,28,0,n.model.isEmailConfirmationRequired),e(t,30,0,!n.model.isActive),e(t,32,0,n.tenantUrl)},function(e,t){var n=t.component;e(t,1,0,void 0);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t,0),"SuccessfullyRegistered"));e(t,3,0,l);var r=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t,0),"TenancyName"));e(t,8,0,r),e(t,10,0,n.model.tenancyName);var o=i["ɵunv"](t,13,0,e(t,14,0,i["ɵnov"](t,0),"TenantName"));e(t,13,0,o),e(t,15,0,n.model.name);var s=i["ɵunv"](t,18,0,e(t,19,0,i["ɵnov"](t,0),"UserName"));e(t,18,0,s),e(t,20,0,n.model.userName);var a=i["ɵunv"](t,23,0,e(t,24,0,i["ɵnov"](t,0),"EmailAddress"));e(t,23,0,a),e(t,25,0,n.model.emailAddress)})}function pn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,hn,an)),i["ɵdid"](1,114688,null,0,sn,[i.Injector,L.Router,on.a,zt],null,null)],function(e,t){e(t,1,0)},null)}var gn=i["ɵccf"]("ng-component",sn,pn,{},{},[]),fn=function(e){function t(t,n,i,l){var r=e.call(this,t)||this;return r._accountService=n,r._appUrlService=i,r._router=l,r.model=new y.Wb,r.saving=!1,r}return Object(m.d)(t,e),t.prototype.save=function(){var e=this;this.saving=!0,this._accountService.sendPasswordResetCode(this.model).pipe(Object(S.a)(function(){e.saving=!1})).subscribe(function(){e.message.success(e.l("PasswordResetMailSentMessage"),e.l("MailSent")).then(function(){e._router.navigate(["account/login"])})})},t}(v.a),mn=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function vn(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,38,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,2,"h3",[["class","m-0"]],null,null,null,null,null)),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1),(e()(),i["ɵeld"](6,0,null,null,33,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,8).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,8).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.save()&&l),l},null,null)),i["ɵdid"](7,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](8,4210688,[["forgotPassForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](10,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](11,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),i["ɵted"](12,null,[" "," "])),i["ɵppd"](13,1),(e()(),i["ɵeld"](14,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](15,0,null,null,11,"input",[["autoFocus",""],["autocomplete","new-password"],["class","form-control placeholder-no-fix"],["email",""],["maxlength","256"],["name","emailAddress"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,16)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,16).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,16)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.emailAddress=n)&&l),l},null,null)),i["ɵdid"](16,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](17,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](18,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵdid"](19,16384,null,0,c.EmailValidator,[],{email:[0,"email"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,c.MaxLengthValidator,c.EmailValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](22,671744,[["emailAddressInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](24,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](25,4210688,null,0,mt.a,[i.ElementRef],null,null),i["ɵppd"](26,1),(e()(),i["ɵeld"](27,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](28,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](29,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](30,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,31).onClick()&&l),l},null,null)),i["ɵdid"](31,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵeld"](32,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(e()(),i["ɵted"](33,null,[" ",""])),i["ɵppd"](34,1),(e()(),i["ɵeld"](35,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["ɵdid"](36,4276224,null,0,d.a,[i.ElementRef,h.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(e()(),i["ɵeld"](37,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(e()(),i["ɵted"](38,null,[" ",""])),i["ɵppd"](39,1)],function(e,t){var n=t.component;e(t,17,0,""),e(t,18,0,"256"),e(t,19,0,""),e(t,22,0,"emailAddress",n.model.emailAddress),e(t,28,0,i["ɵnov"](t,22)),e(t,31,0,"/account/login"),e(t,36,0,n.saving,n.l("SavingWithThreeDot"))},function(e,t){var n=t.component;e(t,1,0,void 0);var l=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t,0),"ForgotPassword"));e(t,4,0,l),e(t,6,0,i["ɵnov"](t,10).ngClassUntouched,i["ɵnov"](t,10).ngClassTouched,i["ɵnov"](t,10).ngClassPristine,i["ɵnov"](t,10).ngClassDirty,i["ɵnov"](t,10).ngClassValid,i["ɵnov"](t,10).ngClassInvalid,i["ɵnov"](t,10).ngClassPending);var r=i["ɵunv"](t,12,0,e(t,13,0,i["ɵnov"](t,0),"SendPasswordResetLink_Information"));e(t,12,0,r);var o=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,15,0,e(t,26,0,i["ɵnov"](t,0),"EmailAddress"))," *");e(t,15,0,o,i["ɵnov"](t,17).required?"":null,i["ɵnov"](t,18).maxlength?i["ɵnov"](t,18).maxlength:null,i["ɵnov"](t,24).ngClassUntouched,i["ɵnov"](t,24).ngClassTouched,i["ɵnov"](t,24).ngClassPristine,i["ɵnov"](t,24).ngClassDirty,i["ɵnov"](t,24).ngClassValid,i["ɵnov"](t,24).ngClassInvalid,i["ɵnov"](t,24).ngClassPending),e(t,30,0,n.saving);var s=i["ɵunv"](t,33,0,e(t,34,0,i["ɵnov"](t,0),"Back"));e(t,33,0,s),e(t,35,0,!i["ɵnov"](t,8).form.valid);var a=i["ɵunv"](t,38,0,e(t,39,0,i["ɵnov"](t,0),"Submit"));e(t,38,0,a)})}function yn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,vn,mn)),i["ɵdid"](1,49152,null,0,fn,[i.Injector,y.b,on.a,L.Router],null,null)],null,null)}var Sn=i["ɵccf"]("ng-component",fn,yn,{},{},[]),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(m.d)(t,e),t}(y.Ob),Cn=function(e){function t(t,n,i,l,r,o,s){var a=e.call(this,t)||this;return a._accountService=n,a._router=i,a._activatedRoute=l,a._loginService=r,a._appUrlService=o,a._profileService=s,a.model=new bn,a.passwordComplexitySetting=new y.Db,a.saving=!1,a}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this._profileService.getPasswordComplexitySetting().subscribe(function(t){e.passwordComplexitySetting=t.setting}),this._activatedRoute.snapshot.queryParams.c?(this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new y.Pb({c:this.model.c})).subscribe(function(t){e.appSession.changeTenantIfNeeded(t)})):(this.model.userId=this._activatedRoute.snapshot.queryParams.userId,this.model.resetCode=this._activatedRoute.snapshot.queryParams.resetCode,this.appSession.changeTenantIfNeeded(this.parseTenantId(this._activatedRoute.snapshot.queryParams.tenantId)))},t.prototype.save=function(){var e=this;this.saving=!0,this._accountService.resetPassword(this.model).pipe(Object(S.a)(function(){e.saving=!1})).subscribe(function(t){t.canLogin?(e.saving=!0,e._loginService.authenticateModel.userNameOrEmailAddress=t.userName,e._loginService.authenticateModel.password=e.model.password,e._loginService.authenticate(function(){e.saving=!1})):e._router.navigate(["account/login"])})},t.prototype.parseTenantId=function(e){var t=e?parseInt(e):void 0;return NaN===t&&(t=void 0),t},t}(v.a),_n=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function wn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,15,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,["",""])),i["ɵppd"](3,1),(e()(),i["ɵeld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](5,null,["",""])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](8,null,["",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](11,null,["",""])),i["ɵppd"](12,1),(e()(),i["ɵeld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),i["ɵppd"](15,2)],null,function(e,t){var n=t.component;e(t,1,0,!i["ɵnov"](t.parent,22).errors.requireDigit);var l=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireDigit_Hint"));e(t,2,0,l),e(t,4,0,!i["ɵnov"](t.parent,22).errors.requireLowercase);var r=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireLowercase_Hint"));e(t,5,0,r),e(t,7,0,!i["ɵnov"](t.parent,22).errors.requireUppercase);var o=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireUppercase_Hint"));e(t,8,0,o),e(t,10,0,!i["ɵnov"](t.parent,22).errors.requireNonAlphanumeric);var s=i["ɵunv"](t,11,0,e(t,12,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));e(t,11,0,s),e(t,13,0,!i["ɵnov"](t.parent,22).errors.requiredLength);var a=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));e(t,14,0,a)})}function En(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,18,"ul",[["class","form-text text-danger"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](2,null,["",""])),i["ɵppd"](3,1),(e()(),i["ɵeld"](4,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](5,null,["",""])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](8,null,["",""])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](11,null,["",""])),i["ɵppd"](12,1),(e()(),i["ɵeld"](13,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),i["ɵppd"](15,2),(e()(),i["ɵeld"](16,0,null,null,2,"li",[],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵted"](17,null,["",""])),i["ɵppd"](18,1)],null,function(e,t){var n=t.component;e(t,1,0,!i["ɵnov"](t.parent,37).errors.requireDigit);var l=i["ɵunv"](t,2,0,e(t,3,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireDigit_Hint"));e(t,2,0,l),e(t,4,0,!i["ɵnov"](t.parent,37).errors.requireLowercase);var r=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireLowercase_Hint"));e(t,5,0,r),e(t,7,0,!i["ɵnov"](t.parent,37).errors.requireUppercase);var o=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireUppercase_Hint"));e(t,8,0,o),e(t,10,0,!i["ɵnov"](t.parent,37).errors.requireNonAlphanumeric);var s=i["ɵunv"](t,11,0,e(t,12,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequireNonAlphanumeric_Hint"));e(t,11,0,s),e(t,13,0,!i["ɵnov"](t.parent,37).errors.requiredLength);var a=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t.parent,0),"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength));e(t,14,0,a),e(t,16,0,i["ɵnov"](t.parent,37).valid);var u=i["ɵunv"](t,17,0,e(t,18,0,i["ɵnov"](t.parent,0),"PasswordsDontMatch"));e(t,17,0,u)})}function Tn(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,53,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,2,"h3",[["class","m-0"]],null,null,null,null,null)),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1),(e()(),i["ɵeld"](6,0,null,null,48,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,8).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,8).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.save()&&l),l},null,null)),i["ɵdid"](7,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](8,4210688,[["resetPassForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](10,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](11,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),i["ɵted"](12,null,[" "," "])),i["ɵppd"](13,1),(e()(),i["ɵeld"](14,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](15,0,null,null,10,"input",[["class","form-control placeholder-no-fix"],["name","Password"],["required",""],["reverse","true"],["type","password"],["validateEqual","PasswordRepeat"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,16)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,16).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,16)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.password=n)&&l),l},null,null)),i["ɵdid"](16,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](17,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](18,16384,null,0,Pt.a,[[8,"PasswordRepeat"],[8,"true"]],null,null),i["ɵdid"](19,16384,null,0,Ot.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,Pt.a,Ot.a]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](22,671744,[["Password",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](24,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](25,1),(e()(),i["ɵeld"](26,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,wn)),i["ɵdid"](28,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](29,0,null,null,11,"div",[["class","form-group m-form__group"]],null,null,null,null,null)),(e()(),i["ɵeld"](30,0,null,null,10,"input",[["class","form-control placeholder-no-fix"],["name","PasswordRepeat"],["required",""],["reverse","false"],["type","password"],["validateEqual","Password"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0;return"input"===t&&(l=!1!==i["ɵnov"](e,31)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,31).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,31)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,31)._compositionEnd(n.target.value)&&l),l},null,null)),i["ɵdid"](31,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](32,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](33,16384,null,0,Pt.a,[[8,"Password"],[8,"false"]],null,null),i["ɵdid"](34,16384,null,0,Ot.a,[],{requireDigit:[0,"requireDigit"],requireUppercase:[1,"requireUppercase"],requireLowercase:[2,"requireLowercase"],requireNonAlphanumeric:[3,"requireNonAlphanumeric"],requiredLength:[4,"requiredLength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,Pt.a,Ot.a]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](37,671744,[["PasswordRepeat",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},null),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](39,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](40,1),(e()(),i["ɵeld"](41,0,null,null,2,"div",[["class","form-group"]],[[8,"hidden",0]],null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,En)),i["ɵdid"](43,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](44,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](45,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,46).onClick()&&l),l},null,null)),i["ɵdid"](46,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵeld"](47,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(e()(),i["ɵted"](48,null,[" ",""])),i["ɵppd"](49,1),(e()(),i["ɵeld"](50,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["ɵdid"](51,4276224,null,0,d.a,[i.ElementRef,h.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(e()(),i["ɵeld"](52,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(e()(),i["ɵted"](53,null,[" ",""])),i["ɵppd"](54,1)],function(e,t){var n=t.component;e(t,17,0,""),e(t,19,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),e(t,22,0,"Password",n.model.password),e(t,28,0,i["ɵnov"](t,22).errors),e(t,32,0,""),e(t,34,0,n.passwordComplexitySetting.requireDigit,n.passwordComplexitySetting.requireUppercase,n.passwordComplexitySetting.requireLowercase,n.passwordComplexitySetting.requireNonAlphanumeric,n.passwordComplexitySetting.requiredLength),e(t,37,0,"PasswordRepeat",n.model.passwordRepeat),e(t,43,0,i["ɵnov"](t,37).errors),e(t,46,0,"/account/login"),e(t,51,0,n.saving,n.l("SavingWithThreeDot"))},function(e,t){var n=t.component;e(t,1,0,void 0);var l=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t,0),"ChangePassword"));e(t,4,0,l),e(t,6,0,i["ɵnov"](t,10).ngClassUntouched,i["ɵnov"](t,10).ngClassTouched,i["ɵnov"](t,10).ngClassPristine,i["ɵnov"](t,10).ngClassDirty,i["ɵnov"](t,10).ngClassValid,i["ɵnov"](t,10).ngClassInvalid,i["ɵnov"](t,10).ngClassPending);var r=i["ɵunv"](t,12,0,e(t,13,0,i["ɵnov"](t,0),"PleaseEnterYourNewPassword"));e(t,12,0,r);var o=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,15,0,e(t,25,0,i["ɵnov"](t,0),"Password")),"");e(t,15,0,o,i["ɵnov"](t,17).required?"":null,i["ɵnov"](t,24).ngClassUntouched,i["ɵnov"](t,24).ngClassTouched,i["ɵnov"](t,24).ngClassPristine,i["ɵnov"](t,24).ngClassDirty,i["ɵnov"](t,24).ngClassValid,i["ɵnov"](t,24).ngClassInvalid,i["ɵnov"](t,24).ngClassPending),e(t,26,0,i["ɵnov"](t,8).form.valid||i["ɵnov"](t,8).form.pristine);var s=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,30,0,e(t,40,0,i["ɵnov"](t,0),"PasswordRepeat")),"");e(t,30,0,s,i["ɵnov"](t,32).required?"":null,i["ɵnov"](t,39).ngClassUntouched,i["ɵnov"](t,39).ngClassTouched,i["ɵnov"](t,39).ngClassPristine,i["ɵnov"](t,39).ngClassDirty,i["ɵnov"](t,39).ngClassValid,i["ɵnov"](t,39).ngClassInvalid,i["ɵnov"](t,39).ngClassPending),e(t,41,0,i["ɵnov"](t,8).form.valid||i["ɵnov"](t,8).form.pristine),e(t,45,0,n.saving);var a=i["ɵunv"](t,48,0,e(t,49,0,i["ɵnov"](t,0),"Back"));e(t,48,0,a),e(t,50,0,!i["ɵnov"](t,8).form.valid);var u=i["ɵunv"](t,53,0,e(t,54,0,i["ɵnov"](t,0),"Submit"));e(t,53,0,u)})}function An(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Tn,_n)),i["ɵdid"](1,114688,null,0,Cn,[i.Injector,y.b,L.Router,L.ActivatedRoute,Je,on.a,y.Jb],null,null)],function(e,t){e(t,1,0)},null)}var xn=i["ɵccf"]("ng-component",Cn,An,{},{},[]),In=function(e){function t(t,n,i){var l=e.call(this,t)||this;return l._accountService=n,l._router=i,l.model=new y.Vb,l.saving=!1,l}return Object(m.d)(t,e),t.prototype.save=function(){var e=this;this.saving=!0,this._accountService.sendEmailActivationLink(this.model).pipe(Object(S.a)(function(){e.saving=!1})).subscribe(function(){e.message.success(e.l("ActivationMailSentMessage"),e.l("MailSent")).then(function(){e._router.navigate(["account/login"])})})},t}(v.a),Rn=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Fn(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,37,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,36,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1),(e()(),i["ɵeld"](6,0,null,null,32,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,8).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,8).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.save()&&l),l},null,null)),i["ɵdid"](7,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](8,4210688,[["emailActivationForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](10,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](11,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),i["ɵted"](12,null,[" "," "])),i["ɵppd"](13,1),(e()(),i["ɵeld"](14,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](15,0,null,null,10,"input",[["autocomplete","new-password"],["class","form-control form-control-solid placeholder-no-fix input-ltr"],["email",""],["maxlength","256"],["name","emailAddress"],["required",""],["type","email"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,16)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,16).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,16)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,16)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.model.emailAddress=n)&&l),l},null,null)),i["ɵdid"](16,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](17,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](18,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵdid"](19,16384,null,0,c.EmailValidator,[],{email:[0,"email"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t,n){return[e,t,n]},[c.RequiredValidator,c.MaxLengthValidator,c.EmailValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](22,671744,[["emailAddressInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](24,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵppd"](25,1),(e()(),i["ɵeld"](26,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](27,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵeld"](28,0,null,null,10,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](29,0,null,null,4,"button",[["class","btn btn-light btn-elevate kt-login__btn-secondary"],["routerLink","/account/login"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,30).onClick()&&l),l},null,null)),i["ɵdid"](30,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{routerLink:[0,"routerLink"]},null),(e()(),i["ɵeld"](31,0,null,null,0,"i",[["class","fa fa-arrow-left"]],null,null,null,null,null)),(e()(),i["ɵted"](32,null,[" ",""])),i["ɵppd"](33,1),(e()(),i["ɵeld"](34,0,null,null,4,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["ɵdid"](35,4276224,null,0,d.a,[i.ElementRef,h.a],{buttonBusy:[0,"buttonBusy"],busyText:[1,"busyText"]},null),(e()(),i["ɵeld"](36,0,null,null,0,"i",[["class","fa fa-check"]],null,null,null,null,null)),(e()(),i["ɵted"](37,null,[" ",""])),i["ɵppd"](38,1)],function(e,t){var n=t.component;e(t,17,0,""),e(t,18,0,"256"),e(t,19,0,""),e(t,22,0,"emailAddress",n.model.emailAddress),e(t,27,0,i["ɵnov"](t,22)),e(t,30,0,"/account/login"),e(t,35,0,n.saving,n.l("SavingWithThreeDot"))},function(e,t){var n=t.component;e(t,1,0,void 0);var l=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t,0),"EmailActivation"));e(t,4,0,l),e(t,6,0,i["ɵnov"](t,10).ngClassUntouched,i["ɵnov"](t,10).ngClassTouched,i["ɵnov"](t,10).ngClassPristine,i["ɵnov"](t,10).ngClassDirty,i["ɵnov"](t,10).ngClassValid,i["ɵnov"](t,10).ngClassInvalid,i["ɵnov"](t,10).ngClassPending);var r=i["ɵunv"](t,12,0,e(t,13,0,i["ɵnov"](t,0),"SendEmailActivationLink_Information"));e(t,12,0,r);var o=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,15,0,e(t,25,0,i["ɵnov"](t,0),"EmailAddress"))," *");e(t,15,0,o,i["ɵnov"](t,17).required?"":null,i["ɵnov"](t,18).maxlength?i["ɵnov"](t,18).maxlength:null,i["ɵnov"](t,24).ngClassUntouched,i["ɵnov"](t,24).ngClassTouched,i["ɵnov"](t,24).ngClassPristine,i["ɵnov"](t,24).ngClassDirty,i["ɵnov"](t,24).ngClassValid,i["ɵnov"](t,24).ngClassInvalid,i["ɵnov"](t,24).ngClassPending),e(t,29,0,n.saving);var s=i["ɵunv"](t,32,0,e(t,33,0,i["ɵnov"](t,0),"Back"));e(t,32,0,s),e(t,34,0,!i["ɵnov"](t,8).form.valid);var a=i["ɵunv"](t,37,0,e(t,38,0,i["ɵnov"](t,0),"Submit"));e(t,37,0,a)})}function kn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Fn,Rn)),i["ɵdid"](1,49152,null,0,In,[i.Injector,y.b,L.Router],null,null)],null,null)}var Nn=i["ɵccf"]("ng-component",In,kn,{},{},[]),Pn=function(e){function t(t,n,i,l){var r=e.call(this,t)||this;return r._accountService=n,r._router=i,r._activatedRoute=l,r.model=new y.c,r}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.waitMessage=this.l("PleaseWaitToConfirmYourEmailMessage"),this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new y.Pb({c:this.model.c})).subscribe(function(t){e.appSession.changeTenantIfNeeded(t)||e._accountService.activateEmail(e.model).subscribe(function(){e.notify.success(e.l("YourEmailIsConfirmedMessage"),"",{onClose:function(){e._router.navigate(["account/login"])}})})})},t.prototype.parseTenantId=function(e){var t=e?parseInt(e,10):void 0;return NaN===t&&(t=void 0),t},t}(v.a),On=i["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Dn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"div",[["class","kt-login__form"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,2,"div",[["class","alert alert-success text-center"],["role","alert"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,1,"div",[["class","alert-text"]],null,null,null,null,null)),(e()(),i["ɵted"](3,null,["",""]))],null,function(e,t){e(t,3,0,t.component.waitMessage)})}function Hn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Dn,On)),i["ɵdid"](1,114688,null,0,Pn,[i.Injector,y.b,L.Router,L.ActivatedRoute],null,null)],function(e,t){e(t,1,0)},null)}var Ln=i["ɵccf"]("ng-component",Pn,Hn,{},{},[]),Vn=function(e){function t(t,n,i,l){var r=e.call(this,t)||this;return r.loginService=n,r._tokenAuthService=i,r._router=l,r.submitting=!1,r}return Object(m.d)(t,e),t.prototype.canActivate=function(){return!!(this.loginService.authenticateModel&&this.loginService.authenticateResult&&this.loginService.authenticateResult.twoFactorAuthProviders&&this.loginService.authenticateResult.twoFactorAuthProviders.length)},t.prototype.ngOnInit=function(){this.canActivate()?this.selectedTwoFactorProvider=this.loginService.authenticateResult.twoFactorAuthProviders[0]:this._router.navigate(["account/login"])},t.prototype.submit=function(){var e=this,t=new y.Yb;t.userId=this.loginService.authenticateResult.userId,t.provider=this.selectedTwoFactorProvider,this.submitting=!0,this._tokenAuthService.sendTwoFactorAuthCode(t).pipe(Object(S.a)(function(){return e.submitting=!1})).subscribe(function(){e._router.navigate(["account/verify-code"])})},t}(v.a),Bn=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function jn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"option",[],null,null,null,null,null)),i["ɵdid"](1,147456,null,0,c.NgSelectOption,[i.ElementRef,i.Renderer2,[2,c.SelectControlValueAccessor]],{value:[0,"value"]},null),i["ɵdid"](2,147456,null,0,c["ɵangular_packages_forms_forms_y"],[i.ElementRef,i.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),i["ɵted"](3,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)},function(e,t){e(t,3,0,t.context.$implicit)})}function Un(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,21,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,2).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,2).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.submit()&&l),l},null,null)),i["ɵdid"](1,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](2,4210688,[["twoFactorForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](4,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](5,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),i["ɵted"](6,null,["",""])),i["ɵppd"](7,1),(e()(),i["ɵeld"](8,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](9,0,null,null,8,"select",[["autoFocus",""],["class","form-control"],["name","selectedTwoFactorProvider"],["size","1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var l=!0,r=e.component;return"change"===t&&(l=!1!==i["ɵnov"](e,10).onChange(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,10).onTouched()&&l),"ngModelChange"===t&&(l=!1!==(r.selectedTwoFactorProvider=n)&&l),l},null,null)),i["ɵdid"](10,16384,null,0,c.SelectControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.SelectControlValueAccessor]),i["ɵdid"](12,671744,null,0,c.NgModel,[[2,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](14,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](15,4210688,null,0,mt.a,[i.ElementRef],null,null),(e()(),i["ɵand"](16777216,null,null,1,null,jn)),i["ɵdid"](17,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["ɵeld"](18,0,null,null,3,"div",[["class","kt-form__actions"]],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,2,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],null,null,null,null,null)),(e()(),i["ɵted"](20,null,["",""])),i["ɵppd"](21,1)],function(e,t){var n=t.component;e(t,12,0,"selectedTwoFactorProvider",n.selectedTwoFactorProvider),e(t,17,0,n.loginService.authenticateResult.twoFactorAuthProviders)},function(e,t){e(t,0,0,i["ɵnov"](t,4).ngClassUntouched,i["ɵnov"](t,4).ngClassTouched,i["ɵnov"](t,4).ngClassPristine,i["ɵnov"](t,4).ngClassDirty,i["ɵnov"](t,4).ngClassValid,i["ɵnov"](t,4).ngClassInvalid,i["ɵnov"](t,4).ngClassPending);var n=i["ɵunv"](t,6,0,e(t,7,0,i["ɵnov"](t.parent,0),"SendSecurityCode_Information"));e(t,6,0,n),e(t,9,0,i["ɵnov"](t,14).ngClassUntouched,i["ɵnov"](t,14).ngClassTouched,i["ɵnov"](t,14).ngClassPristine,i["ɵnov"](t,14).ngClassDirty,i["ɵnov"](t,14).ngClassValid,i["ɵnov"](t,14).ngClassInvalid,i["ɵnov"](t,14).ngClassPending);var l=i["ɵunv"](t,20,0,e(t,21,0,i["ɵnov"](t.parent,0),"Submit"));e(t,20,0,l)})}function qn(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,6,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,5,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1),(e()(),i["ɵand"](16777216,null,null,1,null,Un)),i["ɵdid"](7,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,7,0,t.component.loginService.authenticateResult)},function(e,t){e(t,1,0,void 0);var n=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t,0),"SendSecurityCode"));e(t,4,0,n)})}function Mn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,qn,Bn)),i["ɵdid"](1,114688,null,0,Vn,[i.Injector,Je,y.Ac,L.Router],null,null)],function(e,t){e(t,1,0)},null)}var Kn=i["ɵccf"]("ng-component",Vn,Mn,{},{},[]),Gn=n("gI3B"),Wn=function(e){function t(t,n,i){var l=e.call(this,t)||this;return l.loginService=n,l._router=i,l.submitting=!1,l.remainingSeconds=90,l}return Object(m.d)(t,e),t.prototype.canActivate=function(){return!(!this.loginService.authenticateModel||!this.loginService.authenticateResult)},t.prototype.ngOnInit=function(){var e=this;if(this.canActivate()){var t=Object(Gn.a)(1e3,1e3);this.timerSubscription=t.subscribe(function(){e.remainingSeconds=e.remainingSeconds-1,0===e.remainingSeconds&&e.message.warn(e.l("TimeoutPleaseTryAgain")).then(function(){e.loginService.authenticateModel.twoFactorVerificationCode=null,e._router.navigate(["account/login"])})})}else this._router.navigate(["account/login"])},t.prototype.ngOnDestroy=function(){this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null)},t.prototype.submit=function(){this.loginService.authenticateModel.twoFactorVerificationCode=this.code,this.loginService.authenticate()},t}(v.a),zn=i["ɵcrt"]({encapsulation:0,styles:[[".remaining-time-counter[_ngcontent-%COMP%]{color:red}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Jn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,10,"div",[["class","form-group mt-4"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,9,"label",[["class","kt-checkbox"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,5,"input",[["class","form-control"],["name","rememberClient"],["type","checkbox"],["value","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var l=!0,r=e.component;return"change"===t&&(l=!1!==i["ɵnov"](e,3).onChange(n.target.checked)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,3).onTouched()&&l),"ngModelChange"===t&&(l=!1!==(r.loginService.authenticateModel.rememberClient=n)&&l),l},null,null)),i["ɵdid"](3,16384,null,0,c.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.CheckboxControlValueAccessor]),i["ɵdid"](5,671744,null,0,c.NgModel,[[2,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](7,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(e()(),i["ɵted"](8,null,[""," "])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,0,"span",[],null,null,null,null,null))],function(e,t){e(t,5,0,"rememberClient",t.component.loginService.authenticateModel.rememberClient)},function(e,t){e(t,2,0,i["ɵnov"](t,7).ngClassUntouched,i["ɵnov"](t,7).ngClassTouched,i["ɵnov"](t,7).ngClassPristine,i["ɵnov"](t,7).ngClassDirty,i["ɵnov"](t,7).ngClassValid,i["ɵnov"](t,7).ngClassInvalid,i["ɵnov"](t,7).ngClassPending);var n=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"RememberThisBrowser"));e(t,8,0,n)})}function Yn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"span",[["class","remaining-time-counter"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,["",": ","."])),i["ɵppd"](2,1),i["ɵppd"](3,2)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"RemainingTime")),r=i["ɵunv"](t,1,1,e(t,3,0,i["ɵnov"](t.parent,0),"SecondShort{0}",n.remainingSeconds));e(t,1,0,l,r)})}function $n(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,31,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,30,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1),(e()(),i["ɵeld"](6,0,null,null,26,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0,r=e.component;return"submit"===t&&(l=!1!==i["ɵnov"](e,8).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,8).onReset()&&l),"ngSubmit"===t&&(l=!1!==r.submit()&&l),l},null,null)),i["ɵdid"](7,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](8,4210688,[["twoFactorForm",4]],0,c.NgForm,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](10,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](11,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,10,"input",[["autoFocus",""],["autocomplete","new-password"],["class","form-control"],["maxlength","16"],["name","code"],["required",""],["type","password"]],[[8,"placeholder",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["ɵnov"](e,13)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,13).onTouched()&&l),"compositionstart"===t&&(l=!1!==i["ɵnov"](e,13)._compositionStart()&&l),"compositionend"===t&&(l=!1!==i["ɵnov"](e,13)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(r.code=n)&&l),l},null,null)),i["ɵdid"](13,16384,null,0,c.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),i["ɵdid"](14,16384,null,0,c.RequiredValidator,[],{required:[0,"required"]},null),i["ɵdid"](15,540672,null,0,c.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),i["ɵprd"](1024,null,c.NG_VALIDATORS,function(e,t){return[e,t]},[c.RequiredValidator,c.MaxLengthValidator]),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.DefaultValueAccessor]),i["ɵdid"](18,671744,[["passwordInput",4]],0,c.NgModel,[[2,c.ControlContainer],[6,c.NG_VALIDATORS],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](20,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),i["ɵdid"](21,4210688,null,0,mt.a,[i.ElementRef],null,null),i["ɵppd"](22,1),(e()(),i["ɵeld"](23,0,null,null,1,"validation-messages",[],null,null,null,nt.b,nt.a)),i["ɵdid"](24,49152,null,0,it.a,[h.a],{formCtrl:[0,"formCtrl"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Jn)),i["ɵdid"](26,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](27,0,null,null,5,"div",[["class","kt-login__actions"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Yn)),i["ɵdid"](29,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](30,0,null,null,2,"button",[["class","btn btn-primary btn-elevate kt-login__btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),i["ɵted"](31,null,["",""])),i["ɵppd"](32,1)],function(e,t){var n=t.component;e(t,14,0,""),e(t,15,0,"16"),e(t,18,0,"code",n.code),e(t,24,0,i["ɵnov"](t,18)),e(t,26,0,"true"===n.s("Abp.Zero.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled")),e(t,29,0,n.remainingSeconds>=0)},function(e,t){e(t,1,0,void 0);var n=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t,0),"VerifySecurityCode"));e(t,4,0,n),e(t,6,0,i["ɵnov"](t,10).ngClassUntouched,i["ɵnov"](t,10).ngClassTouched,i["ɵnov"](t,10).ngClassPristine,i["ɵnov"](t,10).ngClassDirty,i["ɵnov"](t,10).ngClassValid,i["ɵnov"](t,10).ngClassInvalid,i["ɵnov"](t,10).ngClassPending);var l=i["ɵinlineInterpolate"](1,"",i["ɵunv"](t,12,0,e(t,22,0,i["ɵnov"](t,0),"Code"))," *");e(t,12,0,l,i["ɵnov"](t,14).required?"":null,i["ɵnov"](t,15).maxlength?i["ɵnov"](t,15).maxlength:null,i["ɵnov"](t,20).ngClassUntouched,i["ɵnov"](t,20).ngClassTouched,i["ɵnov"](t,20).ngClassPristine,i["ɵnov"](t,20).ngClassDirty,i["ɵnov"](t,20).ngClassValid,i["ɵnov"](t,20).ngClassInvalid,i["ɵnov"](t,20).ngClassPending),e(t,30,0,!i["ɵnov"](t,8).form.valid);var r=i["ɵunv"](t,31,0,e(t,32,0,i["ɵnov"](t,0),"Submit"));e(t,31,0,r)})}function Xn(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,$n,zn)),i["ɵdid"](1,245760,null,0,Wn,[i.Injector,Je,L.Router],null,null)],function(e,t){e(t,1,0)},null)}var Qn=i["ɵccf"]("ng-component",Wn,Xn,{},{},[]),Zn=function(){function e(){}return e.prototype.getPaymentGatewayType=function(e){return parseInt(e)===y.ic.Paypal?"Paypal":"Stripe"},e.prototype.getEditionPaymentType=function(e){return parseInt(e)===y.K.BuyNow?"BuyNow":parseInt(e)===y.K.Extend?"Extend":parseInt(e)===y.K.NewRegistration?"NewRegistration":"Upgrade"},e.prototype.getInitialSelectedPaymentPeriodType=function(e){return e.dailyPrice>0?y.Gb.Daily:e.weeklyPrice>0?y.Gb.Weekly:e.monthlyPrice>0?y.Gb.Monthly:e.annualPrice>0?y.Gb.Annual:void 0},e}(),ei=function(e){function t(t,n,i,l,r,o){var s=e.call(this,t)||this;return s._activatedRoute=n,s._router=i,s._paymnetHelperService=l,s._paymentAppService=r,s._tenantRegistrationService=o,s.edition=new y.L,s.tenantId=abp.session.tenantId,s.paymentPeriodType=y.Gb,s.subscriptionPaymentGateway=y.ic,s.supportsRecurringPayments=!1,s.recurringPaymentEnabled=!1,s.editionId=0,s}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this,t=parseInt(this._activatedRoute.snapshot.queryParams.tenantId);abp.multiTenancy.setTenantIdCookie(t),this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.editionId=this._activatedRoute.snapshot.queryParams.editionId,this._tenantRegistrationService.getEdition(this.editionId).subscribe(function(t){e.edition=t,e.selectedPaymentPeriodType=e._paymnetHelperService.getInitialSelectedPaymentPeriodType(e.edition)}),this._paymentAppService.getActiveGateways(void 0).subscribe(function(t){e.paymentGateways=t,e.supportsRecurringPayments=t.some(function(e){return e.supportsRecurringPayments})})},t.prototype.checkout=function(e){var t=this,n={};n.editionId=this.editionId,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.selectedPaymentPeriodType,n.recurringPaymentEnabled=this.recurringPaymentEnabled,n.subscriptionPaymentGatewayType=e,n.successUrl=V.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=V.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe(function(n){t._router.navigate(["account/"+t.getPaymentGatewayType(e).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,redirectUrl:"account/register-tenant-result"}})})},t.prototype.getPaymentGatewayType=function(e){return this._paymnetHelperService.getPaymentGatewayType(e)},t.prototype.onPaymentPeriodChangeChange=function(e){this.selectedPaymentPeriodType=e},t}(v.a),ti=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function ni(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Daily)&&i),i},null,null)),(e()(),i["ɵted"](3,null,[" ",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Daily);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"DailyPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.dailyPrice,"1.2-2"));e(t,3,0,l,r,o)})}function ii(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Weekly)&&i),i},null,null)),(e()(),i["ɵted"](3,null,[" ",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Weekly);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"WeeklyPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.weeklyPrice,"1.2-2"));e(t,3,0,l,r,o)})}function li(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["checked",""],["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Monthly)&&i),i},null,null)),(e()(),i["ɵted"](3,null,[" ",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Monthly);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"MonthlyPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.monthlyPrice,"1.2-2"));e(t,3,0,l,r,o)})}function ri(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Annual)&&i),i},null,null)),(e()(),i["ɵted"](3,null,[" ",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Annual);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"AnnualPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.annualPrice,"1.2-2"));e(t,3,0,l,r,o)})}function oi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,9,"label",[["class","kt-checkbox mb-0"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,5,"input",[["class","form-control"],["name","RecurringPaymentEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var l=!0,r=e.component;return"change"===t&&(l=!1!==i["ɵnov"](e,3).onChange(n.target.checked)&&l),"blur"===t&&(l=!1!==i["ɵnov"](e,3).onTouched()&&l),"ngModelChange"===t&&(l=!1!==(r.recurringPaymentEnabled=n)&&l),l},null,null)),i["ɵdid"](3,16384,null,0,c.CheckboxControlValueAccessor,[i.Renderer2,i.ElementRef],null,null),i["ɵprd"](1024,null,c.NG_VALUE_ACCESSOR,function(e){return[e]},[c.CheckboxControlValueAccessor]),i["ɵdid"](5,671744,null,0,c.NgModel,[[2,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["ɵprd"](2048,null,c.NgControl,null,[c.NgModel]),i["ɵdid"](7,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(e()(),i["ɵted"](8,null,[" "," "])),i["ɵppd"](9,1),(e()(),i["ɵeld"](10,0,null,null,0,"span",[],null,null,null,null,null))],function(e,t){e(t,5,0,"RecurringPaymentEnabled",t.component.recurringPaymentEnabled)},function(e,t){e(t,2,0,i["ɵnov"](t,7).ngClassUntouched,i["ɵnov"](t,7).ngClassTouched,i["ɵnov"](t,7).ngClassPristine,i["ɵnov"](t,7).ngClassDirty,i["ɵnov"](t,7).ngClassValid,i["ɵnov"](t,7).ngClassInvalid,i["ɵnov"](t,7).ngClassPending);var n=i["ɵunv"](t,8,0,e(t,9,0,i["ɵnov"](t.parent,0),"AutomaticallyBillMyAccount"));e(t,8,0,n)})}function si(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"button",[["class","btn btn-success btn-block"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.checkout(e.parent.context.$implicit.gatewayType)&&i),i},null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent.parent,0),"CheckoutWith"+n.getPaymentGatewayType(t.parent.context.$implicit.gatewayType)));e(t,1,0,l)})}function ai(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"div",[["class","mb-2"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,si)),i["ɵdid"](2,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.context.$implicit.supportsRecurringPayments||!t.component.recurringPaymentEnabled)},null)}function ui(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵpid"](0,u.DecimalPipe,[i.LOCALE_ID]),(e()(),i["ɵeld"](2,0,null,null,26,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,3,"div",[["class","kt-login__title mb-4"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](5,null,[" "," "])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,21,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0;return"submit"===t&&(l=!1!==i["ɵnov"](e,9).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,9).onReset()&&l),l},null,null)),i["ɵdid"](8,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](9,4210688,null,0,c.NgForm,[[8,null],[8,null]],null,null),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](11,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](12,0,null,null,2,"h4",[["class","text-center mb-4"]],null,null,null,null,null)),(e()(),i["ɵted"](13,null,["",": ",""])),i["ɵppd"](14,1),(e()(),i["ɵand"](16777216,null,null,1,null,ni)),i["ɵdid"](16,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,ii)),i["ɵdid"](18,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,li)),i["ɵdid"](20,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,ri)),i["ɵdid"](22,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](23,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,oi)),i["ɵdid"](25,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](26,0,null,null,2,"div",[["class","kt-form__actions mt-4"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,ai)),i["ɵdid"](28,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,16,0,n.edition.dailyPrice>0),e(t,18,0,n.edition.weeklyPrice>0),e(t,20,0,n.edition.monthlyPrice>0),e(t,22,0,n.edition.annualPrice>0),e(t,25,0,n.supportsRecurringPayments),e(t,28,0,n.paymentGateways)},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t,0),"PaymentInfo"));e(t,5,0,l),e(t,7,0,i["ɵnov"](t,11).ngClassUntouched,i["ɵnov"](t,11).ngClassTouched,i["ɵnov"](t,11).ngClassPristine,i["ɵnov"](t,11).ngClassDirty,i["ɵnov"](t,11).ngClassValid,i["ɵnov"](t,11).ngClassInvalid,i["ɵnov"](t,11).ngClassPending);var r=i["ɵunv"](t,13,0,e(t,14,0,i["ɵnov"](t,0),"Edition"));e(t,13,0,r,n.edition.displayName)})}function ci(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,ui,ti)),i["ɵdid"](1,114688,null,0,ei,[i.Injector,L.ActivatedRoute,L.Router,Zn,y.Hb,y.qc],null,null)],function(e,t){e(t,1,0)},null)}var di=i["ɵccf"]("ng-component",ei,ci,{},{},[]),hi=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o._router=n,o._paymnetHelperService=i,o._activatedRoute=l,o._paymentAppService=r,o.edition=new y.L,o.tenantId=abp.session.tenantId,o.paymentPeriodType=y.Gb,o.subscriptionPaymentGateway=y.ic,o.editionPaymentTypeCheck=y.K,o}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.editionPaymentType=parseInt(this._activatedRoute.snapshot.queryParams.editionPaymentType),this._paymentAppService.getPaymentInfo(void 0).subscribe(function(t){e.edition=t.edition,e.additionalPrice=Number(t.additionalPrice.toFixed(2)),e.selectedPaymentPeriodType=e._paymnetHelperService.getInitialSelectedPaymentPeriodType(e.edition)}),this._paymentAppService.getActiveGateways(void 0).subscribe(function(t){e.paymentGateways=t})},t.prototype.checkout=function(e){var t=this,n={};n.editionId=this.edition.id,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.selectedPaymentPeriodType,n.recurringPaymentEnabled=!1,n.subscriptionPaymentGatewayType=e,n.successUrl=V.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=V.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe(function(n){t._router.navigate(["account/"+t.getPaymentGatewayType(e).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,redirectUrl:"app/admin/subscription-management"}})})},t.prototype.getPaymentGatewayType=function(e){return this._paymnetHelperService.getPaymentGatewayType(e)},t.prototype.onPaymentPeriodChangeChange=function(e){this.selectedPaymentPeriodType=e},t.prototype.isUpgrade=function(){return this.additionalPrice>0},t}(v.a),pi=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function gi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["checked",""],["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Daily)&&i),i},null,null)),(e()(),i["ɵted"](3,null,["",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Daily);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"DailyPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.dailyPrice,"1.2-2"));e(t,3,0,l,r,o)})}function fi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["checked",""],["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Weekly)&&i),i},null,null)),(e()(),i["ɵted"](3,null,["",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Weekly);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"WeeklyPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.weeklyPrice,"1.2-2"));e(t,3,0,l,r,o)})}function mi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["checked",""],["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Monthly)&&i),i},null,null)),(e()(),i["ɵted"](3,null,["",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Monthly);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"MonthlyPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.monthlyPrice,"1.2-2"));e(t,3,0,l,r,o)})}function vi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,5,"label",[["class","kt-radio"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"input",[["class","form-control"],["name","PaymentPeriodType"],["type","radio"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var i=!0,l=e.component;return"change"===t&&(i=!1!==l.onPaymentPeriodChangeChange(l.paymentPeriodType.Annual)&&i),i},null,null)),(e()(),i["ɵted"](3,null,["",": ",""," "])),i["ɵppd"](4,1),i["ɵppd"](5,2),(e()(),i["ɵeld"](6,0,null,null,0,"span",[],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,2,0,n.paymentPeriodType.Annual);var l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"AnnualPrice")),r=n.appSession.application.currencySign,o=i["ɵunv"](t,3,2,e(t,5,0,i["ɵnov"](t.parent,1),n.edition.annualPrice,"1.2-2"));e(t,3,0,l,r,o)})}function yi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"button",[["class","btn btn-success btn-block"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.checkout(e.context.$implicit.gatewayType)&&i),i},null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"CheckoutWith"+n.getPaymentGatewayType(t.context.$implicit.gatewayType)));e(t,1,0,l)})}function Si(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵpid"](0,u.DecimalPipe,[i.LOCALE_ID]),(e()(),i["ɵeld"](2,0,null,null,24,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,23,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](5,null,[" "," "])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(e()(),i["ɵeld"](8,0,null,null,18,"form",[["class","kt-form mt-2"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0;return"submit"===t&&(l=!1!==i["ɵnov"](e,10).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,10).onReset()&&l),l},null,null)),i["ɵdid"](9,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](10,4210688,null,0,c.NgForm,[[8,null],[8,null]],null,null),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](12,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](13,0,null,null,2,"h4",[["class","text-center mb-4"]],null,null,null,null,null)),(e()(),i["ɵted"](14,null,[" "," "])),i["ɵppd"](15,2),(e()(),i["ɵand"](16777216,null,null,1,null,gi)),i["ɵdid"](17,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,fi)),i["ɵdid"](19,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,mi)),i["ɵdid"](21,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,vi)),i["ɵdid"](23,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](24,0,null,null,2,"div",[["class","kt-form__actions mt-4"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,yi)),i["ɵdid"](26,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,17,0,n.edition.dailyPrice>0),e(t,19,0,n.edition.weeklyPrice>0),e(t,21,0,n.edition.monthlyPrice>0),e(t,23,0,n.edition.annualPrice>0),e(t,26,0,n.paymentGateways)},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t,0),"PaymentInfo"));e(t,5,0,l),e(t,8,0,i["ɵnov"](t,12).ngClassUntouched,i["ɵnov"](t,12).ngClassTouched,i["ɵnov"](t,12).ngClassPristine,i["ɵnov"](t,12).ngClassDirty,i["ɵnov"](t,12).ngClassValid,i["ɵnov"](t,12).ngClassInvalid,i["ɵnov"](t,12).ngClassPending);var r=i["ɵunv"](t,14,0,e(t,15,0,i["ɵnov"](t,0),"Extend_Edition_Description",n.edition.displayName));e(t,14,0,r)})}function bi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Si,pi)),i["ɵdid"](1,114688,null,0,hi,[i.Injector,L.Router,Zn,L.ActivatedRoute,y.Hb],null,null)],function(e,t){e(t,1,0)},null)}var Ci=i["ɵccf"]("ng-component",hi,bi,{},{},[]),_i=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o._router=n,o._paymnetHelperService=i,o._activatedRoute=l,o._paymentAppService=r,o.subscriptionPaymentType=y.jc,o.subscriptionStartType=y.lc,o.edition=new y.L,o.tenantId=abp.session.tenantId,o.subscriptionPaymentGateway=y.ic,o.editionPaymentTypeCheck=y.K,o}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.editionPaymentType=parseInt(this._activatedRoute.snapshot.queryParams.editionPaymentType),this.upgradeEditionId=this._activatedRoute.snapshot.queryParams.upgradeEditionId,this.appSession.tenant.edition.isFree&&this._router.navigate(["account/buy"],{queryParams:{tenantId:this.appSession.tenant.id,editionPaymentType:this.editionPaymentType,editionId:this.upgradeEditionId,subscriptionStartType:this.subscriptionStartType.Paid}}),this._paymentAppService.getPaymentInfo(this.upgradeEditionId).subscribe(function(t){e.edition=t.edition,e.additionalPrice=Number(t.additionalPrice.toFixed(2))}),this._paymentAppService.getLastCompletedPayment().subscribe(function(t){var n=new y.Fb;n.gatewayType=t.gateway,n.supportsRecurringPayments=!0,e.paymentGateways=[n],e.paymentPeriodType=t.paymentPeriodType,e.appSession.tenant.subscriptionPaymentType===e.subscriptionPaymentType.Manual&&e._paymentAppService.getActiveGateways(void 0).subscribe(function(t){e.paymentGateways=t})})},t.prototype.checkout=function(e){var t=this,n=new y.E;n.editionId=this.edition.id,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.paymentPeriodType,n.recurringPaymentEnabled=this.hasRecurringSubscription(),n.subscriptionPaymentGatewayType=e,n.successUrl=V.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=V.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe(function(n){t._router.navigate(["account/"+t.getPaymentGatewayType(e).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,isUpgrade:!0,redirectUrl:"app/admin/subscription-management"}})})},t.prototype.getPaymentGatewayType=function(e){return this._paymnetHelperService.getPaymentGatewayType(e)},t.prototype.hasRecurringSubscription=function(){return this.appSession.tenant.subscriptionPaymentType!==this.subscriptionPaymentType.Manual},t}(v.a),wi=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Ei(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,3,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,2,"label",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["ɵted"](3,null,[" "," "])),i["ɵppd"](4,1)],null,function(e,t){var n=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"RecurringSubscriptionUpgradeNote"));e(t,3,0,n)})}function Ti(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,2,"label",[["class","col-sm-8"]],null,null,null,null,null)),(e()(),i["ɵted"](3,null,[" "," "])),i["ɵppd"](4,1),(e()(),i["ɵeld"](5,0,null,null,3,"div",[["class","col-sm-4 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(e()(),i["ɵted"](7,null,[" ",""," "])),i["ɵppd"](8,2)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,3,0,e(t,4,0,i["ɵnov"](t.parent,0),"Total"));e(t,3,0,l);var r=n.appSession.application.currencySign,o=i["ɵunv"](t,7,1,e(t,8,0,i["ɵnov"](t.parent,1),n.additionalPrice,"1.2-2"));e(t,7,0,r,o)})}function Ai(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"button",[["class","btn btn-success btn-block"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.checkout(e.context.$implicit.gatewayType)&&i),i},null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=t.component,l=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent,0),"CheckoutWith"+n.getPaymentGatewayType(t.context.$implicit.gatewayType)));e(t,1,0,l)})}function xi(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵpid"](0,u.DecimalPipe,[i.LOCALE_ID]),(e()(),i["ɵeld"](2,0,null,null,20,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,3,"div",[["class","kt-login__title"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),i["ɵted"](5,null,[" "," "])),i["ɵppd"](6,1),(e()(),i["ɵeld"](7,0,null,null,15,"form",[["class","kt-form"],["method","post"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0;return"submit"===t&&(l=!1!==i["ɵnov"](e,9).onSubmit(n)&&l),"reset"===t&&(l=!1!==i["ɵnov"](e,9).onReset()&&l),l},null,null)),i["ɵdid"](8,16384,null,0,c["ɵangular_packages_forms_forms_z"],[],null,null),i["ɵdid"](9,4210688,null,0,c.NgForm,[[8,null],[8,null]],null,null),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](11,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(e()(),i["ɵeld"](12,0,null,null,2,"h4",[["class","text-center mb-2"]],null,null,null,null,null)),(e()(),i["ɵted"](13,null,[" "," "])),i["ɵppd"](14,2),(e()(),i["ɵeld"](15,0,null,null,0,"div",[["class","kt-separator kt-separator--border-dashed"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Ei)),i["ɵdid"](17,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Ti)),i["ɵdid"](19,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](20,0,null,null,2,"div",[["class","kt-form__actions mt-4"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Ai)),i["ɵdid"](22,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,17,0,n.hasRecurringSubscription()),e(t,19,0,!n.hasRecurringSubscription()),e(t,22,0,n.paymentGateways)},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,5,0,e(t,6,0,i["ɵnov"](t,0),"PaymentInfo"));e(t,5,0,l),e(t,7,0,i["ɵnov"](t,11).ngClassUntouched,i["ɵnov"](t,11).ngClassTouched,i["ɵnov"](t,11).ngClassPristine,i["ɵnov"](t,11).ngClassDirty,i["ɵnov"](t,11).ngClassValid,i["ɵnov"](t,11).ngClassInvalid,i["ɵnov"](t,11).ngClassPending);var r=i["ɵunv"](t,13,0,e(t,14,0,i["ɵnov"](t,0),"Upgrade_Edition_Description",n.edition.displayName));e(t,13,0,r)})}function Ii(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,xi,wi)),i["ɵdid"](1,114688,null,0,_i,[i.Injector,L.Router,Zn,L.ActivatedRoute,y.Hb],null,null)],function(e,t){e(t,1,0)},null)}var Ri=i["ɵccf"]("ng-component",_i,Ii,{},{},[]),Fi=function(e){function t(t,n,i,l){var r=e.call(this,t)||this;return r._tenantRegistrationService=n,r._subscriptionService=i,r._router=l,r.editionsSelectOutput=new y.N,r.isUserLoggedIn=!1,r.isSetted=!1,r.editionPaymentType=y.K,r.subscriptionStartType=y.lc,r.editionIcons=["flaticon-open-box","flaticon-rocket","flaticon-gift","flaticon-confetti","flaticon-cogwheel-2","flaticon-app","flaticon-coins","flaticon-piggy-bank","flaticon-bag","flaticon-lifebuoy","flaticon-technology-1","flaticon-cogwheel-1","flaticon-infinity","flaticon-interface-5","flaticon-squares-3","flaticon-interface-6","flaticon-mark","flaticon-business","flaticon-interface-7","flaticon-list-2","flaticon-bell","flaticon-technology","flaticon-squares-2","flaticon-notes","flaticon-profile","flaticon-layers","flaticon-interface-4","flaticon-signs","flaticon-menu-1","flaticon-symbol"],r}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.isUserLoggedIn=abp.session.userId>0,this._tenantRegistrationService.getEditionsForSelect().subscribe(function(t){e.editionsSelectOutput=t,(!e.editionsSelectOutput.editionsWithFeatures||e.editionsSelectOutput.editionsWithFeatures.length<=0)&&e._router.navigate(["/account/register-tenant"])})},t.prototype.isFree=function(e){return!e.monthlyPrice&&!e.annualPrice},t.prototype.isTrueFalseFeature=function(e){return"CHECKBOX"===e.inputType.name},t.prototype.featureEnabledForEdition=function(e,t){var n=k.filter(t.featureValues,{name:e.name});return!(!n||n.length<=0)&&"true"===n[0].value.toLowerCase()},t.prototype.getFeatureValueForEdition=function(e,t){var n=k.filter(t.featureValues,{name:e.name});return!n||n.length<=0?"":n[0].value},t.prototype.upgrade=function(e,t){this._router.navigate(["/account/upgrade"],{queryParams:{upgradeEditionId:e.id,editionPaymentType:t}})},t}(v.a),ki=i["ɵcrt"]({encapsulation:2,styles:[['body{background-color:#f2f3f8}button:disabled,button[disabled]{cursor:not-allowed!important}.kt-pricing-1{overflow:hidden}.kt-pricing-1.kt-pricing-1--fixed{width:75%;margin:0 auto}.kt-pricing-1 .kt-pricing-1__items{background-color:#fff;position:relative;z-index:1;text-align:center;padding:2.14rem 0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item{border-right:.07rem solid #ebedf2;padding:0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item:last-child{border-right:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual{margin-top:10rem;position:relative;left:50%;transform:translateX(-50%) translateY(-50%)}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1{left:50%;transform:translateX(-50%) translateY(-50%);position:absolute}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1:before{left:50%;transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:-3.93rem;width:17.14rem;height:0;border-left:4.2rem solid transparent;border-right:4.2rem solid transparent;border-bottom:7.5rem solid #fcfcfe}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1:after{left:50%;transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:3.5rem;width:17.14rem;height:0;border-left:4.2rem solid transparent;border-right:4.2rem solid transparent;border-top:7.5rem solid #fcfcfe}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2{left:50%;margin-top:-1.43rem;transform:translateX(-50%) translateY(-50%);position:absolute}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2:before{left:50%;transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:-.42rem;width:8.7rem;height:0;border-left:2.14rem solid transparent;border-right:2.14rem solid transparent;border-bottom:3.71rem solid #f8f7fd}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2:after{left:50%;transform:translateX(-50%) translateY(-50%);content:"";position:absolute;top:3.3rem;width:8.7rem;height:0;border-left:2.14rem solid transparent;border-right:2.14rem solid transparent;border-top:3.71rem solid #f8f7fd}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__icon{left:50%;transform:translateX(-50%) translateY(-50%);position:absolute}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__icon>i{font-size:8.57rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__price{font-size:2rem;font-weight:700;display:block;margin-top:20rem;color:#6c7293}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__price .kt-pricing-1__label{margin-top:.64rem;margin-left:.357rem;position:absolute;font-size:1.64rem;font-weight:500;color:#a7abc3}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__subtitle{font-size:1.1rem;color:#adb1c7;font-weight:500}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__description{margin:1.785rem auto;font-size:1rem;padding:0 .5rem;color:#a7abc3;font-weight:400}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__description>span{display:block;text-align:center}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn{margin:2.14rem 0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn>.btn{padding:.86rem 3.57rem}@media (min-width:1025px) and (max-width:1399px){.kt-pricing-1.kt-pricing-1--fixed{width:100%}.kt-pricing-1.kt-pricing-1--fixed .kt-pricing-1__items .kt-pricing-1__item{border-right:1px solid #ebedf2}.kt-pricing-1.kt-pricing-1--fixed .kt-pricing-1__items .kt-pricing-1__item:last-child{border-right:none}}@media (max-width:1024px){.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item{border-bottom:1px solid #ebedf2;border-right:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item:last-child{border-bottom:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn{margin-bottom:3.57rem}}.row-centered{text-align:center;display:block!important}.col-centered{display:inline-table;float:none;text-align:center;margin-right:-4px}']],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function Ni(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"h2",[["class","kt-pricing-1__subtitle"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent.parent,0),"Free"));e(t,1,0,n)})}function Pi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"span",[["class","kt-pricing-1__label"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[""," "," ",""])),i["ɵppd"](2,1),(e()(),i["ɵeld"](3,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,t){var n=t.component.appSession.application.currencySign,l=t.parent.parent.context.$implicit.edition.dailyPrice,r=i["ɵunv"](t,1,2,e(t,2,0,i["ɵnov"](t.parent.parent.parent,0),"PerDay"));e(t,1,0,n,l,r)})}function Oi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"span",[["class","kt-pricing-1__label"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[""," "," ",""])),i["ɵppd"](2,1),(e()(),i["ɵeld"](3,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,t){var n=t.component.appSession.application.currencySign,l=t.parent.parent.context.$implicit.edition.weeklyPrice,r=i["ɵunv"](t,1,2,e(t,2,0,i["ɵnov"](t.parent.parent.parent,0),"PerWeek"));e(t,1,0,n,l,r)})}function Di(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,3,"span",[["class","kt-pricing-1__label"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[""," "," "," "])),i["ɵppd"](2,1),(e()(),i["ɵeld"](3,0,null,null,0,"br",[],null,null,null,null,null))],null,function(e,t){var n=t.component.appSession.application.currencySign,l=t.parent.parent.context.$implicit.edition.monthlyPrice,r=i["ɵunv"](t,1,2,e(t,2,0,i["ɵnov"](t.parent.parent.parent,0),"PerMonth"));e(t,1,0,n,l,r)})}function Hi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"span",[["class","kt-pricing-1__label"]],null,null,null,null,null)),(e()(),i["ɵted"](1,null,[""," "," ",""])),i["ɵppd"](2,1)],null,function(e,t){var n=t.component.appSession.application.currencySign,l=t.parent.parent.context.$implicit.edition.annualPrice,r=i["ɵunv"](t,1,2,e(t,2,0,i["ɵnov"](t.parent.parent.parent,0),"PerYear"));e(t,1,0,n,l,r)})}function Li(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,8,"h2",[["class","kt-pricing-1__subtitle"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Pi)),i["ɵdid"](2,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Oi)),i["ɵdid"](4,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Di)),i["ɵdid"](6,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Hi)),i["ɵdid"](8,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.parent.context.$implicit.edition.dailyPrice>0),e(t,4,0,t.parent.context.$implicit.edition.weeklyPrice>0),e(t,6,0,t.parent.context.$implicit.edition.monthlyPrice>0),e(t,8,0,t.parent.context.$implicit.edition.annualPrice>0)},null)}function Vi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,0,"i",[["class","la la-check kt-font-success"]],null,null,null,null,null))],null,null)}function Bi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,0,"i",[["class","la la-times kt-font-dark"]],null,null,null,null,null))],null,null)}function ji(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Vi)),i["ɵdid"](2,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Bi)),i["ɵdid"](4,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](0,null,null,0))],function(e,t){var n=t.component;e(t,2,0,n.featureEnabledForEdition(t.parent.context.$implicit,t.parent.parent.context.$implicit)),e(t,4,0,!n.featureEnabledForEdition(t.parent.context.$implicit,t.parent.parent.context.$implicit))},null)}function Ui(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),i["ɵted"](1,null,[""," "]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.displayName)})}function qi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,0,"i",[["class","la la-check kt-font-success"]],null,null,null,null,null))],null,null)}function Mi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),i["ɵted"](1,null,[" ",":"," "]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.displayName,t.component.getFeatureValueForEdition(t.parent.context.$implicit,t.parent.parent.context.$implicit))})}function Ki(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,ji)),i["ɵdid"](2,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Ui)),i["ɵdid"](4,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,qi)),i["ɵdid"](6,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Mi)),i["ɵdid"](8,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](9,0,null,null,0,"br",[],null,null,null,null,null))],function(e,t){var n=t.component;e(t,2,0,n.isTrueFalseFeature(t.context.$implicit)),e(t,4,0,n.isTrueFalseFeature(t.context.$implicit)),e(t,6,0,!n.isTrueFalseFeature(t.context.$implicit)),e(t,8,0,!n.isTrueFalseFeature(t.context.$implicit))},null)}function Gi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,2,"button",[["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"]],null,[[null,"click"]],function(e,t,n){var i=!0,l=e.component;return"click"===t&&(i=!1!==l.upgrade(e.parent.context.$implicit.edition,l.editionPaymentType.Upgrade)&&i),i},null,null)),(e()(),i["ɵted"](1,null,[" "," "])),i["ɵppd"](2,1)],null,function(e,t){var n=i["ɵunv"](t,1,0,e(t,2,0,i["ɵnov"](t.parent.parent,0),"Upgrade"));e(t,1,0,n)})}function Wi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,5,"button",[["class","btn btn-success btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"],["href","#"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,1).onClick()&&l),l},null,null)),i["ɵdid"](1,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["ɵpod"](2,{editionId:0,subscriptionStartType:1}),i["ɵpad"](3,1),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1)],function(e,t){var n=e(t,2,0,t.parent.context.$implicit.edition.id,t.component.subscriptionStartType.Free),i=e(t,3,0,"/account/register-tenant");e(t,1,0,n,i)},function(e,t){var n=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t.parent.parent,0),"Start"));e(t,4,0,n)})}function zi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,5,"button",[["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"],["href","#"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,1).onClick()&&l),l},null,null)),i["ɵdid"](1,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["ɵpod"](2,{editionId:0,subscriptionStartType:1}),i["ɵpad"](3,1),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1)],function(e,t){var n=e(t,2,0,t.parent.context.$implicit.edition.id,t.component.subscriptionStartType.Trial),i=e(t,3,0,"/account/register-tenant");e(t,1,0,n,i)},function(e,t){var n=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t.parent.parent,0),"FreeTrial"));e(t,4,0,n)})}function Ji(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,5,"button",[["class","btn btn-primary btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2"],["href","#"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==i["ɵnov"](e,1).onClick()&&l),l},null,null)),i["ɵdid"](1,16384,null,0,L.RouterLink,[L.Router,L.ActivatedRoute,[8,null],i.Renderer2,i.ElementRef],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),i["ɵpod"](2,{editionId:0,subscriptionStartType:1,editionPaymentType:2}),i["ɵpad"](3,1),(e()(),i["ɵted"](4,null,[" "," "])),i["ɵppd"](5,1)],function(e,t){var n=t.component,i=e(t,2,0,t.parent.context.$implicit.edition.id,n.subscriptionStartType.Paid,n.editionPaymentType.NewRegistration),l=e(t,3,0,"/account/register-tenant");e(t,1,0,i,l)},function(e,t){var n=i["ɵunv"](t,4,0,e(t,5,0,i["ɵnov"](t.parent.parent,0),"BuyNow"));e(t,4,0,n)})}function Yi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,23,"div",[["class","kt-pricing-1__item col-lg-3 col-centered"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,4,"div",[["class","kt-pricing-1__visual"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"div",[["class","kt-pricing-1__hexagon1"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,0,"div",[["class","kt-pricing-1__hexagon2"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,1,"span",[["class","kt-pricing-1__icon kt-font-brand"]],null,null,null,null,null)),(e()(),i["ɵeld"](5,0,null,null,0,"i",[],[[8,"className",0]],null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,1,"span",[["class","kt-pricing-1__price"]],null,null,null,null,null)),(e()(),i["ɵted"](7,null,[" "," "])),(e()(),i["ɵand"](16777216,null,null,1,null,Ni)),i["ɵdid"](9,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Li)),i["ɵdid"](11,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](12,0,null,null,2,"span",[["class","kt-pricing-1__description"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Ki)),i["ɵdid"](14,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["ɵeld"](15,0,null,null,8,"div",[["class","kt-pricing-1__btn"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Gi)),i["ɵdid"](17,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Wi)),i["ɵdid"](19,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,zi)),i["ɵdid"](21,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵand"](16777216,null,null,1,null,Ji)),i["ɵdid"](23,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,9,0,n.isFree(t.context.$implicit.edition)),e(t,11,0,!n.isFree(t.context.$implicit.edition)),e(t,14,0,n.editionsSelectOutput.allFeatures),e(t,17,0,n.isUserLoggedIn),e(t,19,0,!n.isUserLoggedIn&&n.isFree(t.context.$implicit.edition)),e(t,21,0,!n.isUserLoggedIn&&!n.isFree(t.context.$implicit.edition)&&t.context.$implicit.edition.trialDayCount),e(t,23,0,!n.isUserLoggedIn&&!n.isFree(t.context.$implicit.edition))},function(e,t){e(t,5,0,i["ɵinlineInterpolate"](1,"fa ",t.component.editionIcons[t.context.index],"")),e(t,7,0,t.context.$implicit.edition.displayName)})}function $i(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,8,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,7,"div",[["class","kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,6,"div",[["class","kt-container kt-container--fluid  kt-grid__item kt-grid__item--fluid"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,5,"div",[["class","kt-portlet"]],null,null,null,null,null)),(e()(),i["ɵeld"](5,0,null,null,4,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,3,"div",[["class","kt-pricing-1 kt-pricing-1--fixed"]],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,2,"div",[["class","kt-pricing-1__items row row-centered"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,Yi)),i["ɵdid"](9,278528,null,0,u.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,9,0,t.component.editionsSelectOutput.editionsWithFeatures)},function(e,t){e(t,1,0,void 0)})}function Xi(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,$i,ki)),i["ɵdid"](1,114688,null,0,Fi,[i.Injector,y.qc,y.kc,L.Router],null,null)],function(e,t){e(t,1,0)},null)}var Qi=i["ɵccf"]("ng-component",Fi,Xi,{},{},[]),Zi=n("PEYQ"),el=n("IQ2n"),tl=function(e){function t(t,n,i,l,r,o){var s=e.call(this,t)||this;return s.injector=t,s._activatedRoute=n,s._payPalPaymentAppService=i,s._paymentAppService=l,s._router=r,s._tenantRegistrationHelper=o,s.paypalIsLoading=!0,s.subscriptionPaymentGateway=y.ic,s.totalAmount=0,s.description="",s}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,this._payPalPaymentAppService.getConfiguration().subscribe(function(t){e.config=t,(new W.a).load("https://www.paypal.com/sdk/js?client-id="+t.clientId+"&currency="+e.appSession.application.currency).then(function(){e._paymentAppService.getPayment(e.paymentId).subscribe(function(t){e.description=t.description,e.totalAmount=t.amount,e.successCallbackUrl=t.successUrl,e.errorCallbackUrl=t.errorUrl,e.subscriptionPaymentGateway=t.gateway,e.paypalIsLoading=!1,e.preparePaypalButton()})})})},t.prototype.preparePaypalButton=function(){var e=this;window.paypal.Buttons({createOrder:function(t,n){return n.order.create({purchase_units:[{amount:{value:e.totalAmount,currency_code:e.appSession.application.currency}}]})},onApprove:function(t,n){e._payPalPaymentAppService.confirmPayment(e.paymentId,t.orderID).subscribe(function(){el.a.ajax("post",e.successCallbackUrl+(e.successCallbackUrl.includes("?")?"&":"?")+"paymentId="+e.paymentId,null,null,function(t){e._tenantRegistrationHelper.registrationResult&&(e._tenantRegistrationHelper.registrationResult.isActive=!0),e._router.navigate([e.redirectUrl])})})}}).render("#paypal-button")},t}(v.a),nl=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function il(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,19,"div",[["class","alert alert-secondary fade show"],["role","alert"]],null,null,null,null,null)),(e()(),i["ɵeld"](1,0,null,null,1,"div",[["class","alert-icon"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,0,"i",[["class","flaticon-questions-circular-button"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,12,"div",[["class","alert-text"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),i["ɵted"](5,null,[" "," "])),(e()(),i["ɵeld"](6,0,null,null,9,"p",[],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](8,null,["",": "])),(e()(),i["ɵeld"](9,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["ɵted"](10,null,["",""])),(e()(),i["ɵeld"](11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](13,null,["",": "])),(e()(),i["ɵeld"](14,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),i["ɵted"](15,null,["",""])),(e()(),i["ɵeld"](16,0,null,null,3,"div",[["class","alert-close"]],null,null,null,null,null)),(e()(),i["ɵeld"](17,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","alert"],["type","button"]],null,null,null,null,null)),(e()(),i["ɵeld"](18,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,0,"i",[["class","la la-close"]],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,5,0,n.l("DemoPayPalAccount")),e(t,8,0,n.l("UserName")),e(t,10,0,n.config.demoUsername),e(t,13,0,n.l("Password")),e(t,15,0,n.config.demoPassword)})}function ll(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,16777216,null,null,1,"div",[],null,null,null,null,null)),i["ɵdid"](1,540672,null,0,Zi.a,[i.ViewContainerRef,i.ComponentFactoryResolver,i.Injector],{busyIf:[0,"busyIf"]},null),(e()(),i["ɵand"](0,null,null,0))],function(e,t){e(t,1,0,t.component.paypalIsLoading)},null)}function rl(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵpid"](0,u.DecimalPipe,[i.LOCALE_ID]),(e()(),i["ɵeld"](2,0,null,null,27,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,26,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,25,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](5,0,null,null,24,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,4,"div",[["class","kt-portlet__head"]],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,3,"div",[["class","kt-portlet__head-label"]],null,null,null,null,null)),(e()(),i["ɵeld"](8,0,null,null,2,"h3",[["class","kt-portlet__head-title"]],null,null,null,null,null)),(e()(),i["ɵted"](9,null,[" "," "])),i["ɵppd"](10,1),(e()(),i["ɵeld"](11,0,null,null,18,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](13,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),(e()(),i["ɵeld"](15,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](16,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(e()(),i["ɵted"](17,null,[" "," "])),(e()(),i["ɵeld"](18,0,null,null,6,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(e()(),i["ɵted"](20,null,["",""])),(e()(),i["ɵeld"](21,0,null,null,3,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](22,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(e()(),i["ɵted"](23,null,[" ",""," "])),i["ɵppd"](24,2),(e()(),i["ɵand"](16777216,null,null,1,null,il)),i["ɵdid"](26,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵeld"](27,0,null,null,0,"div",[["id","paypal-button"]],null,null,null,null,null)),(e()(),i["ɵand"](16777216,null,null,1,null,ll)),i["ɵdid"](29,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,26,0,n.config&&n.config.demoUsername&&n.config.demoPassword),e(t,29,0,n.paypalIsLoading)},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,9,0,e(t,10,0,i["ɵnov"](t,0),"TenantSignUp"));e(t,9,0,l),e(t,14,0,n.l("Item")),e(t,17,0,n.description),e(t,20,0,n.l("Price"));var r=n.appSession.application.currencySign,o=i["ɵunv"](t,23,1,e(t,24,0,i["ɵnov"](t,1),n.totalAmount,"1.2-2"));e(t,23,0,r,o)})}function ol(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"paypal-purchase-component",[],null,null,null,rl,nl)),i["ɵdid"](1,114688,null,0,tl,[i.Injector,L.ActivatedRoute,y.Eb,y.Hb,L.Router,zt],null,null)],function(e,t){e(t,1,0)},null)}var sl=i["ɵccf"]("paypal-purchase-component",tl,ol,{editionPaymentType:"editionPaymentType"},{},[]),al=function(e){function t(t,n,i,l,r,o){var s=e.call(this,t)||this;return s._activatedRoute=n,s._stripePaymentAppService=i,s._paymentAppService=l,s._router=r,s._tenantRegistrationHelper=o,s.amount=0,s.description="",s.stripeIsLoading=!0,s.subscriptionPaymentGateway=y.ic,s.subscriptionStartType=y.lc,s.redirectUrl="",s}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl;var t=this._activatedRoute.snapshot.queryParams.isUpgrade;(new W.a).load("https://checkout.stripe.com/checkout.js").then(function(){e._paymentAppService.getPayment(e.paymentId).subscribe(function(n){e.amount=n.amount,e.description=n.description,e.successCallbackUrl=n.successUrl,e.errorCallbackUrl=n.errorUrl,n.isRecurring?e._router.navigate([t?"account/stripe-update-subscription":"account/stripe-subscribe"],{queryParams:{paymentId:e.paymentId,redirectUrl:e.redirectUrl}}):e._stripePaymentAppService.getConfiguration().subscribe(function(t){e.prepareStripeButton(t.publishableKey),e.stripeIsLoading=!1})})})},t.prototype.prepareStripeButton=function(e){var t=this,n=StripeCheckout.configure({key:e,locale:"auto",currency:this.appSession.application.currency,token:function(e){t.spinnerService.show();var n=new y.dc;n.paymentId=t.paymentId,n.stripeToken=e.id,t._stripePaymentAppService.confirmPayment(n).subscribe(function(){el.a.ajax("POST",t.successCallbackUrl+(t.successCallbackUrl.indexOf("?")>=0?"&":"?")+"paymentId="+t.paymentId,null,null,function(e){t._tenantRegistrationHelper.registrationResult&&(t._tenantRegistrationHelper.registrationResult.isActive=!0),t.spinnerService.hide(),t._router.navigate([t.redirectUrl])})})}});document.getElementById("stripe-checkout").addEventListener("click",function(e){n.open({name:"SKYOPS",description:t.description,amount:100*t.amount}),e.preventDefault()}),window.addEventListener("popstate",function(){n.close()})},t}(v.a),ul=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function cl(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,16777216,null,null,1,"div",[],null,null,null,null,null)),i["ɵdid"](1,540672,null,0,Zi.a,[i.ViewContainerRef,i.ComponentFactoryResolver,i.Injector],{busyIf:[0,"busyIf"]},null),(e()(),i["ɵand"](0,null,null,0))],function(e,t){e(t,1,0,t.component.stripeIsLoading)},null)}function dl(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵpid"](0,u.DecimalPipe,[i.LOCALE_ID]),(e()(),i["ɵeld"](2,0,null,null,27,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,26,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,25,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](5,0,null,null,24,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,4,"div",[["class","kt-portlet__head"]],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,3,"div",[["class","kt-portlet__head-label"]],null,null,null,null,null)),(e()(),i["ɵeld"](8,0,null,null,2,"h3",[["class","kt-portlet__head-title"]],null,null,null,null,null)),(e()(),i["ɵted"](9,null,[" "," "])),i["ɵppd"](10,1),(e()(),i["ɵeld"](11,0,null,null,18,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](13,0,null,null,1,"label",[["class","col-sm-4 "]],null,null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),(e()(),i["ɵeld"](15,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](16,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(e()(),i["ɵted"](17,null,[" "," "])),(e()(),i["ɵeld"](18,0,null,null,6,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,1,"label",[["class","col-sm-4 "]],null,null,null,null,null)),(e()(),i["ɵted"](20,null,["",""])),(e()(),i["ɵeld"](21,0,null,null,3,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](22,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(e()(),i["ɵted"](23,null,[" ",""," "])),i["ɵppd"](24,2),(e()(),i["ɵeld"](25,0,null,null,2,"button",[["class","btn btn-primary btn-block"],["id","stripe-checkout"]],null,null,null,null,null)),(e()(),i["ɵted"](26,null,["",""])),i["ɵppd"](27,1),(e()(),i["ɵand"](16777216,null,null,1,null,cl)),i["ɵdid"](29,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,29,0,t.component.stripeIsLoading)},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,9,0,e(t,10,0,i["ɵnov"](t,0),"TenantSignUp"));e(t,9,0,l),e(t,14,0,n.l("Item")),e(t,17,0,n.description),e(t,20,0,n.l("Price"));var r=n.appSession.application.currencySign,o=i["ɵunv"](t,23,1,e(t,24,0,i["ɵnov"](t,1),n.amount,"1.2-2"));e(t,23,0,r,o);var s=i["ɵunv"](t,26,0,e(t,27,0,i["ɵnov"](t,0),"Purchase"));e(t,26,0,s)})}function hl(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"stripe-purchase-component",[],null,null,null,dl,ul)),i["ɵdid"](1,114688,null,0,al,[i.Injector,L.ActivatedRoute,y.fc,y.Hb,L.Router,zt],null,null)],function(e,t){e(t,1,0)},null)}var pl=i["ɵccf"]("stripe-purchase-component",al,hl,{editionPaymentType:"editionPaymentType"},{},[]),gl=function(e){function t(t,n,i,l,r,o){var s=e.call(this,t)||this;return s._activatedRoute=n,s._stripePaymentAppService=i,s._paymentAppService=l,s._router=r,s._tenantRegistrationHelper=o,s.amount=0,s.description="",s.stripeIsLoading=!0,s.subscriptionPaymentGateway=y.ic,s.subscriptionStartType=y.lc,s.redirectUrl="",s}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,(new W.a).load("https://checkout.stripe.com/checkout.js").then(function(){e._paymentAppService.getPayment(e.paymentId).subscribe(function(t){e.amount=t.amount,e.description=t.description,e.successCallbackUrl=t.successUrl,e.errorCallbackUrl=t.errorUrl,e._stripePaymentAppService.getConfiguration().subscribe(function(t){e.prepareStripeButton(t.publishableKey),e.stripeIsLoading=!1})})})},t.prototype.prepareStripeButton=function(e){var t=this,n=StripeCheckout.configure({key:e,locale:"auto",currency:this.appSession.application.currency,token:function(e){t.spinnerService.show();var n=new y.ec;n.paymentId=t.paymentId,n.stripeToken=e.id,t._stripePaymentAppService.createSubscription(n).subscribe(function(){el.a.ajax("POST",t.successCallbackUrl+(t.successCallbackUrl.indexOf("?")>=0?"&":"?")+"paymentId="+t.paymentId,null,null,function(e){t._tenantRegistrationHelper.registrationResult.isActive=!0,t.spinnerService.hide(),t._router.navigate([t.redirectUrl])})})}});document.getElementById("stripe-checkout").addEventListener("click",function(e){n.open({name:"SKYOPS",description:t.description,amount:100*t.amount}),e.preventDefault()}),window.addEventListener("popstate",function(){n.close()})},t}(v.a),fl=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function ml(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,16777216,null,null,1,"div",[],null,null,null,null,null)),i["ɵdid"](1,540672,null,0,Zi.a,[i.ViewContainerRef,i.ComponentFactoryResolver,i.Injector],{busyIf:[0,"busyIf"]},null),(e()(),i["ɵand"](0,null,null,0))],function(e,t){e(t,1,0,t.component.stripeIsLoading)},null)}function vl(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),i["ɵpid"](0,u.DecimalPipe,[i.LOCALE_ID]),(e()(),i["ɵeld"](2,0,null,null,27,"div",[["class","kt-login__form"]],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,26,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,25,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](5,0,null,null,24,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,4,"div",[["class","kt-portlet__head"]],null,null,null,null,null)),(e()(),i["ɵeld"](7,0,null,null,3,"div",[["class","kt-portlet__head-label"]],null,null,null,null,null)),(e()(),i["ɵeld"](8,0,null,null,2,"h3",[["class","kt-portlet__head-title"]],null,null,null,null,null)),(e()(),i["ɵted"](9,null,[" "," "])),i["ɵppd"](10,1),(e()(),i["ɵeld"](11,0,null,null,18,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](13,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(e()(),i["ɵted"](14,null,["",""])),(e()(),i["ɵeld"](15,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](16,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(e()(),i["ɵted"](17,null,[" "," "])),(e()(),i["ɵeld"](18,0,null,null,6,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](19,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(e()(),i["ɵted"](20,null,["",""])),(e()(),i["ɵeld"](21,0,null,null,3,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](22,0,null,null,2,"p",[["class","kt-font-bold"],["id","totalPrice"]],null,null,null,null,null)),(e()(),i["ɵted"](23,null,[" ",""," "])),i["ɵppd"](24,2),(e()(),i["ɵeld"](25,0,null,null,2,"button",[["class","btn btn-primary btn-block"],["id","stripe-checkout"]],null,null,null,null,null)),(e()(),i["ɵted"](26,null,["",""])),i["ɵppd"](27,1),(e()(),i["ɵand"](16777216,null,null,1,null,ml)),i["ɵdid"](29,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,29,0,t.component.stripeIsLoading)},function(e,t){var n=t.component;e(t,2,0,void 0);var l=i["ɵunv"](t,9,0,e(t,10,0,i["ɵnov"](t,0),"TenantSignUp"));e(t,9,0,l),e(t,14,0,n.l("Item")),e(t,17,0,n.description),e(t,20,0,n.l("amount"));var r=n.appSession.application.currencySign,o=i["ɵunv"](t,23,1,e(t,24,0,i["ɵnov"](t,1),n.amount,"1.2-2"));e(t,23,0,r,o);var s=i["ɵunv"](t,26,0,e(t,27,0,i["ɵnov"](t,0),"Purchase"));e(t,26,0,s)})}function yl(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"stripe-subscribe-component",[],null,null,null,vl,fl)),i["ɵdid"](1,114688,null,0,gl,[i.Injector,L.ActivatedRoute,y.fc,y.Hb,L.Router,zt],null,null)],function(e,t){e(t,1,0)},null)}var Sl=i["ɵccf"]("stripe-subscribe-component",gl,yl,{editionPaymentType:"editionPaymentType"},{},[]),bl=function(e){function t(t,n,i,l,r){var o=e.call(this,t)||this;return o._activatedRoute=n,o._stripePaymentAppService=i,o._paymentAppService=l,o._router=r,o.description="",o.redirectUrl="",o}return Object(m.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,this._paymentAppService.getPayment(this.paymentId).subscribe(function(t){e.description=t.description,e.successCallbackUrl=t.successUrl,e.errorCallbackUrl=t.errorUrl})},t.prototype.upgradeSubscription=function(){var e=this;this.spinnerService.show();var t=new y.gc;t.paymentId=this.paymentId,this._stripePaymentAppService.updateSubscription(t).subscribe(function(){el.a.ajax("POST",e.successCallbackUrl+(e.successCallbackUrl.indexOf("?")>=0?"&":"?")+"paymentId="+e.paymentId,null,null,function(t){e.spinnerService.hide(),e._router.navigate([e.redirectUrl])})})},t}(v.a),Cl=i["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{"margin-top":"-10px",opacity:"0"},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{"margin-top":"0px",opacity:"1"},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:4,styles:{type:6,styles:{opacity:"1","margin-top":"0px"},offset:null},timings:"0.2s ease-out"}],options:null}],options:{}}]}});function _l(e){return i["ɵvid"](0,[i["ɵpid"](0,p.a,[i.Injector]),(e()(),i["ɵeld"](1,0,null,null,16,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](2,0,null,null,15,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](3,0,null,null,14,"div",[["class","kt-portlet kt-portlet--bordered"]],null,null,null,null,null)),(e()(),i["ɵeld"](4,0,null,null,13,"div",[["class","kt-portlet__body"]],null,null,null,null,null)),(e()(),i["ɵeld"](5,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](6,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(e()(),i["ɵted"](7,null,["",""])),(e()(),i["ɵeld"](8,0,null,null,2,"div",[["class","col-sm-8 text-right"]],null,null,null,null,null)),(e()(),i["ɵeld"](9,0,null,null,1,"p",[["class","kt-font-bold"]],null,null,null,null,null)),(e()(),i["ɵted"](10,null,[" "," "])),(e()(),i["ɵeld"](11,0,null,null,3,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),i["ɵeld"](12,0,null,null,2,"label",[["class","col-sm-12"]],null,null,null,null,null)),(e()(),i["ɵted"](13,null,["",""])),i["ɵppd"](14,1),(e()(),i["ɵeld"](15,0,null,null,2,"button",[["class","btn btn-primary btn-block"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.upgradeSubscription()&&i),i},null,null)),(e()(),i["ɵted"](16,null,["",""])),i["ɵppd"](17,1)],null,function(e,t){var n=t.component;e(t,7,0,n.l("Item")),e(t,10,0,n.description);var l=i["ɵunv"](t,13,0,e(t,14,0,i["ɵnov"](t,0),"RecurringSubscriptionUpgradeNote"));e(t,13,0,l);var r=i["ɵunv"](t,16,0,e(t,17,0,i["ɵnov"](t,0),"Purchase"));e(t,16,0,r)})}function wl(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"stripe-update-subscirption-component",[],null,null,null,_l,Cl)),i["ɵdid"](1,114688,null,0,bl,[i.Injector,L.ActivatedRoute,y.fc,y.Hb,L.Router],null,null)],function(e,t){e(t,1,0)},null)}var El=i["ɵccf"]("stripe-update-subscirption-component",bl,wl,{},{},[]),Tl=n("rf+y"),Al=n("UtOw"),xl=n("dxxL"),Il=n("tnCA"),Rl=n("WTR0"),Fl=n("Yap4"),kl=n("wtux"),Nl=n("EohJ"),Pl=n("op6y"),Ol=n("QkXj"),Dl=n("RrOR"),Hl=n("CP3D"),Ll=n("oo35"),Vl=n("NJnL"),Bl=n("miAi"),jl=n("Qj9z"),Ul=function(){function e(e,t,n){this._permissionChecker=e,this._router=t,this._sessionService=n}return e.prototype.canActivate=function(e,t){return!(!e.queryParams.ss||"true"!==e.queryParams.ss)||!this._sessionService.user||(this._router.navigate([this.selectBestRoute()]),!1)},e.prototype.selectBestRoute=function(){return this._permissionChecker.isGranted("Pages.Administration.Host.Dashboard")?"/app/admin/hostDashboard":this._permissionChecker.isGranted("Pages.Tenant.Dashboard")?"/app/main/dashboard":"/app/notifications"},e}(),ql=n("JeFn"),Ml=n("yc4G"),Kl=n("pmn7"),Gl=n("YirH"),Wl=function(){function e(e,t){var n=this;this.router=e,this._uiCustomizationService=t,e.events.subscribe(function(e){setTimeout(function(){n.toggleBodyCssClass(e.url)},0)})}return e.prototype.toggleBodyCssClass=function(e){e?e.indexOf("/account/")>=0?this.setAccountModuleBodyClassInternal():document.body.className=this._uiCustomizationService.getAppModuleBodyClass():this.setAccountModuleBodyClassInternal()},e.prototype.setAccountModuleBodyClassInternal=function(){var e="";document.body.className.indexOf("swal2-toast-shown")>=0&&(e+=" swal2-toast-shown"),document.body.className=this._uiCustomizationService.getAccountModuleBodyClass()+" "+e},e}();n.d(t,"AccountModuleNgFactory",function(){return zl});var zl=i["ɵcmf"](o,[],function(e){return i["ɵmod"]([i["ɵmpd"](512,i.ComponentFactoryResolver,i["ɵCodegenComponentFactoryResolver"],[[8,[s.a,s.b,a.a,tt,Nt,Gt,rn,gn,Sn,xn,Nn,Ln,Kn,Qn,di,Ci,Ri,Qi,sl,pl,Sl,El]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["ɵmpd"](4608,u.NgLocalization,u.NgLocaleLocalization,[i.LOCALE_ID,[2,u["ɵangular_packages_common_common_a"]]]),i["ɵmpd"](4608,c["ɵangular_packages_forms_forms_o"],c["ɵangular_packages_forms_forms_o"],[]),i["ɵmpd"](4608,z.HttpXsrfTokenExtractor,z["ɵangular_packages_common_http_http_g"],[u.DOCUMENT,i.PLATFORM_ID,z["ɵangular_packages_common_http_http_e"]]),i["ɵmpd"](4608,z["ɵangular_packages_common_http_http_h"],z["ɵangular_packages_common_http_http_h"],[z.HttpXsrfTokenExtractor,z["ɵangular_packages_common_http_http_f"]]),i["ɵmpd"](5120,z["ɵangular_packages_common_http_http_b"],z["ɵangular_packages_common_http_http_c"],[]),i["ɵmpd"](4608,z.JsonpClientBackend,z.JsonpClientBackend,[z["ɵangular_packages_common_http_http_b"],u.DOCUMENT]),i["ɵmpd"](4608,M.a,M.a,[]),i["ɵmpd"](4608,q.a,q.a,[]),i["ɵmpd"](4608,Tl.a,Tl.a,[M.a,q.a]),i["ɵmpd"](5120,we,Me,[]),i["ɵmpd"](4608,z["ɵangular_packages_common_http_http_d"],z["ɵangular_packages_common_http_http_d"],[]),i["ɵmpd"](6144,z.XhrFactory,null,[z["ɵangular_packages_common_http_http_d"]]),i["ɵmpd"](4608,z.HttpXhrBackend,z.HttpXhrBackend,[z.XhrFactory]),i["ɵmpd"](6144,z.HttpBackend,null,[z.HttpXhrBackend]),i["ɵmpd"](4608,z.HttpHandler,z["ɵHttpInterceptingHandler"],[z.HttpBackend,i.Injector]),i["ɵmpd"](4608,z.HttpClient,z.HttpClient,[z.HttpHandler]),i["ɵmpd"](4608,Ae,Ue,[]),i["ɵmpd"](4608,Ie,Ie,[]),i["ɵmpd"](5120,_e,qe,[]),i["ɵmpd"](4608,De,Ke,[]),i["ɵmpd"](135680,He,He,[i.NgZone,z.HttpClient,[2,we],[2,Ae],[2,Pe],Ie,_e,[2,De]]),i["ɵmpd"](4608,Ve,Be,[]),i["ɵmpd"](5120,z.HTTP_INTERCEPTORS,function(e,t,n,i,l,r,o){return[e,new z.JsonpInterceptor(t),new Tl.b(n),new je(i,l,r,o)]},[z["ɵangular_packages_common_http_http_h"],z.JsonpClientBackend,Tl.a,we,He,Ve,[2,Le]]),i["ɵmpd"](5120,rt,r,[]),i["ɵmpd"](4608,at,at,[i.PLATFORM_ID,[2,rt],[2,ot],[2,st]]),i["ɵmpd"](4608,vt.a,vt.a,[]),i["ɵmpd"](4608,Al.a,Al.a,[]),i["ɵmpd"](4608,xl.a,xl.a,[]),i["ɵmpd"](4608,Il.a,Il.a,[]),i["ɵmpd"](4608,Rl.a,Rl.a,[]),i["ɵmpd"](4608,Fl.a,Fl.a,[]),i["ɵmpd"](4608,kl.a,kl.a,[]),i["ɵmpd"](4608,Nl.a,Nl.a,[z.HttpClient]),i["ɵmpd"](4608,U.a,U.a,[]),i["ɵmpd"](4608,K.a,K.a,[]),i["ɵmpd"](4608,Pl.a,Pl.a,[]),i["ɵmpd"](4608,Ol.a,Ol.a,[]),i["ɵmpd"](4608,W.a,W.a,[]),i["ɵmpd"](4608,Dl.a,Dl.a,[]),i["ɵmpd"](4608,Hl.a,Hl.a,[]),i["ɵmpd"](4608,Ll.a,Ll.a,[]),i["ɵmpd"](4608,y.rb,y.rb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.gb,y.gb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.H,y.H,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.h,y.h,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.k,y.k,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.p,y.p,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.s,y.s,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.M,y.M,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.ab,y.ab,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.jb,y.jb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.mb,y.mb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.sb,y.sb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.zb,y.zb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Bb,y.Bb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Ib,y.Ib,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Jb,y.Jb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Rb,y.Rb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.ac,y.ac,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.rc,y.rc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.oc,y.oc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.sc,y.sc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.zc,y.zc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Rc,y.Rc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Nc,y.Nc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Pc,y.Pc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Uc,y.Uc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.b,y.b,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Ac,y.Ac,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.qc,y.qc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.ib,y.ib,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Hb,y.Hb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.J,y.J,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.ob,y.ob,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.kc,y.kc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Cc,y.Cc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.Eb,y.Eb,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.fc,y.fc,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,y.I,y.I,[z.HttpClient,[2,y.a]]),i["ɵmpd"](4608,Vl.a,Vl.a,[i.NgZone,i.RendererFactory2,i.PLATFORM_ID]),i["ɵmpd"](4608,f.a,f.a,[i.ComponentFactoryResolver,i.NgZone,i.Injector,Vl.a,i.ApplicationRef]),i["ɵmpd"](4608,g.a,g.a,[i.RendererFactory2,f.a]),i["ɵmpd"](4608,Je,Je,[y.Ac,L.Router,K.a,M.a,U.a,q.a,He,Bl.c]),i["ɵmpd"](4608,zt,zt,[]),i["ɵmpd"](4608,Zn,Zn,[]),i["ɵmpd"](4608,Ul,Ul,[Al.a,L.Router,jl.a]),i["ɵmpd"](1073742336,u.CommonModule,u.CommonModule,[]),i["ɵmpd"](1073742336,c["ɵangular_packages_forms_forms_d"],c["ɵangular_packages_forms_forms_d"],[]),i["ɵmpd"](1073742336,c.FormsModule,c.FormsModule,[]),i["ɵmpd"](1073742336,z.HttpClientXsrfModule,z.HttpClientXsrfModule,[]),i["ɵmpd"](1073742336,z.HttpClientModule,z.HttpClientModule,[]),i["ɵmpd"](1073742336,z.HttpClientJsonpModule,z.HttpClientJsonpModule,[]),i["ɵmpd"](1073742336,ht,ht,[]),i["ɵmpd"](1073742336,pt,pt,[]),i["ɵmpd"](1073742336,g.e,g.e,[]),i["ɵmpd"](1073742336,ql.a,ql.a,[]),i["ɵmpd"](1073742336,Ml.a,Ml.a,[]),i["ɵmpd"](1073742336,Kl.a,Kl.a,[]),i["ɵmpd"](1073742336,Gl.a,Gl.a,[]),i["ɵmpd"](1073742336,L.RouterModule,L.RouterModule,[[2,L["ɵangular_packages_router_router_a"]],[2,L.Router]]),i["ɵmpd"](1073742336,Wl,Wl,[L.Router,B.a]),i["ɵmpd"](1073742336,Ge,Ge,[]),i["ɵmpd"](1073742336,Dt.PasswordModule,Dt.PasswordModule,[]),i["ɵmpd"](1073742336,o,o,[]),i["ɵmpd"](256,z["ɵangular_packages_common_http_http_e"],"XSRF-TOKEN",[]),i["ɵmpd"](256,z["ɵangular_packages_common_http_http_f"],"X-XSRF-TOKEN",[]),i["ɵmpd"](256,Le,null,[]),i["ɵmpd"](1024,L.ROUTES,function(){return[[{path:"",component:Ye,children:[{path:"",redirectTo:"login"},{path:"login",component:yt,canActivate:[Ul]},{path:"register",component:Lt,canActivate:[Ul]},{path:"register-tenant",component:Jt,canActivate:[Ul]},{path:"register-tenant-result",component:sn,canActivate:[Ul]},{path:"forgot-password",component:fn,canActivate:[Ul]},{path:"reset-password",component:Cn,canActivate:[Ul]},{path:"email-activation",component:In,canActivate:[Ul]},{path:"confirm-email",component:Pn,canActivate:[Ul]},{path:"send-code",component:Vn,canActivate:[Ul]},{path:"verify-code",component:Wn,canActivate:[Ul]},{path:"buy",component:ei},{path:"extend",component:hi},{path:"upgrade",component:_i},{path:"select-edition",component:Fi},{path:"paypal-purchase",component:tl},{path:"stripe-purchase",component:al},{path:"stripe-subscribe",component:gl},{path:"stripe-update-subscription",component:bl}]}]]},[])])})},NqMA:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var l,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(r<3?l(o):r>3?l(t,n,o):l(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("CcnG"),o=n("Ip0R"),s=n("sdDj"),a=function(){function e(e,t){this.el=e,this.zone=t,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(e.prototype,"showPassword",{set:function(e){this.el.nativeElement.type=e?"text":"password"},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){this.updateFilledState()},e.prototype.onInput=function(e){this.updateFilledState()},e.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},e.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=s.DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},e.prototype.onFocus=function(e){var t=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++s.DomHandler.zindex),this.zone.runOutsideAngular(function(){setTimeout(function(){s.DomHandler.addClass(t.panel,"ui-password-panel-visible"),s.DomHandler.removeClass(t.panel,"ui-password-panel-hidden")},1),s.DomHandler.absolutePosition(t.panel,t.el.nativeElement)}))},e.prototype.onBlur=function(e){var t=this;this.feedback&&(s.DomHandler.addClass(this.panel,"ui-password-panel-hidden"),s.DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular(function(){setTimeout(function(){t.ngOnDestroy()},150)}))},e.prototype.onKeyup=function(e){if(this.feedback){var t=e.target.value,n=null,i=null;if(0===t.length)n=this.promptLabel,i="0px 0px";else{var l=this.testStrength(t);l<30?(n=this.weakLabel,i="0px -10px"):l>=30&&l<80?(n=this.mediumLabel,i="0px -20px"):l>=80&&(n=this.strongLabel,i="0px -30px")}this.meter.style.backgroundPosition=i,this.info.textContent=n}},e.prototype.testStrength=function(e){var t,n=0;return t=e.match("[0-9]"),n+=25*this.normalize(t?t.length:.25,1),t=e.match("[a-zA-Z]"),n+=10*this.normalize(t?t.length:.5,3),t=e.match("[!@#$%^&*?_~.,;=]"),n+=35*this.normalize(t?t.length:1/6,1),t=e.match("[A-Z]"),n+=30*this.normalize(t?t.length:1/6,1),(n*=e.length/8)>100?100:n},e.prototype.normalize=function(e,t){return e-t<=0?e/t:1+e/(e+t/4)*.5},Object.defineProperty(e.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},i([r.Input(),l("design:type",String)],e.prototype,"promptLabel",void 0),i([r.Input(),l("design:type",String)],e.prototype,"weakLabel",void 0),i([r.Input(),l("design:type",String)],e.prototype,"mediumLabel",void 0),i([r.Input(),l("design:type",String)],e.prototype,"strongLabel",void 0),i([r.Input(),l("design:type",Boolean)],e.prototype,"feedback",void 0),i([r.Input(),l("design:type",Boolean),l("design:paramtypes",[Boolean])],e.prototype,"showPassword",null),i([r.HostListener("input",["$event"]),l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],e.prototype,"onInput",null),i([r.HostListener("focus",["$event"]),l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],e.prototype,"onFocus",null),i([r.HostListener("blur",["$event"]),l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],e.prototype,"onBlur",null),i([r.HostListener("keyup",["$event"]),l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],e.prototype,"onKeyup",null),i([r.Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}}),l("design:paramtypes",[r.ElementRef,r.NgZone])],e)}();t.Password=a;var u=i([r.NgModule({imports:[o.CommonModule],exports:[a],declarations:[a]})],function(){});t.PasswordModule=u},gfpf:function(e,t){var n={userAgent:!1},i={};if(void 0===l)var l={};l.lang={extend:function(e,t,i){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var l=function(){};if(l.prototype=t.prototype,e.prototype=new l,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),i){var r;for(r in i)e.prototype[r]=i[r];var s=function(){},a=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(s=function(e,t){for(r=0;r<a.length;r+=1){var n=a[r],i=t[n];"function"==typeof i&&i!=Object.prototype[n]&&(e[n]=i)}})}catch(o){}s(e.prototype,i)}}};var r,o,s,a,u,c,d,h,p,g,f,m=m||(r=Math,s=(o={}).lib={},a=s.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=s.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,l=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<l;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else for(r=0;r<l;r+=4)t[i+r>>>2]=n[r>>>2];return this.sigBytes+=l,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*r.random()|0);return new u.init(t,e)}}),c=o.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],l=0;l<n;l++){var r=t[l>>>2]>>>24-l%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(n,t/2)}},h=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],l=0;l<n;l++)i.push(String.fromCharCode(t[l>>>2]>>>24-l%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(n,t)}},p=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},g=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,l=this.blockSize,o=i/(4*l),s=(o=e?r.ceil(o):r.max((0|o)-this._minBufferSize,0))*l,a=r.min(4*s,i);if(s){for(var c=0;c<s;c+=l)this._doProcessBlock(n,c);var d=n.splice(0,s);t.sigBytes-=a}return new u.init(d,a)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),s.Hasher=g.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),f=o.algo={},o);!function(e){var t,n=(t=m).lib,i=n.Base,l=n.WordArray;(t=t.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var r=e[i];n.push(r.high),n.push(r.low)}return l.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,l=0;l<n;l++)t[l]=t[l].clone();return e}})}(),m.lib.Cipher||function(e){var t=(p=m).lib,n=t.Base,i=t.WordArray,l=t.BufferedBlockAlgorithm,r=p.enc.Base64,o=p.algo.EvpKDF,s=t.Cipher=l.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,i){return("string"==typeof n?g:h).encrypt(e,t,n,i)},decrypt:function(t,n,i){return("string"==typeof n?g:h).decrypt(e,t,n,i)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var a=p.mode={},u=function(e,t,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var l=0;l<n;l++)e[t+l]^=i[l]},c=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;u.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,l=e.slice(t,t+i);n.decryptBlock(e,t),u.call(this,e,t,i),this._prevBlock=l}}),a=a.CBC=c,c=(p.pad={}).Pkcs7={pad:function(e,t){for(var n,l=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,r=[],o=0;o<n;o+=4)r.push(l);n=i.create(r,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:a,padding:c}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(a=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){var t=(e=r.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:a}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var l=e.createEncryptor(n,i);return t=l.finalize(t),d.create({ciphertext:t,key:n,iv:(l=l.cfg).iv,algorithm:e,mode:l.mode,padding:l.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,n,l){return l||(l=i.random(8)),e=o.create({keySize:t+n}).compute(e,l),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:l})}},g=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(e,t,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,(e=h.encrypt.call(this,e,t,n.key,i)).mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,h.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=m,t=e.lib.BlockCipher,n=e.algo,i=[],l=[],r=[],o=[],s=[],a=[],u=[],c=[],d=[],h=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;var f=0,v=0;for(g=0;256>g;g++){var y;i[f]=y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99,l[y]=f;var S=p[f],b=p[S],C=p[b],_=257*p[y]^16843008*y;r[f]=_<<24|_>>>8,o[f]=_<<16|_>>>16,s[f]=_<<8|_>>>24,a[f]=_,u[y]=(_=16843009*C^65537*b^257*S^16843008*f)<<24|_>>>8,c[y]=_<<16|_>>>16,d[y]=_<<8|_>>>24,h[y]=_,f?(f=S^p[p[p[C^S]]],v^=p[p[v]]):f=v=1}var w=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),l=this._keySchedule=[],r=0;r<n;r++)if(r<t)l[r]=e[r];else{var o=l[r-1];r%t?6<t&&4==r%t&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=i[(o=o<<8|o>>>24)>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=w[r/t|0]<<24),l[r]=l[r-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)r=n-t,o=t%4?l[r]:l[r-4],e[t]=4>t||4>=r?o:u[i[o>>>24]]^c[i[o>>>16&255]]^d[i[o>>>8&255]]^h[i[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,o,s,a,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,c,d,h,l),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,l,r,o,s){for(var a=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],p=4,g=1;g<a;g++){var f=i[u>>>24]^l[c>>>16&255]^r[d>>>8&255]^o[255&h]^n[p++],m=i[c>>>24]^l[d>>>16&255]^r[h>>>8&255]^o[255&u]^n[p++],v=i[d>>>24]^l[h>>>16&255]^r[u>>>8&255]^o[255&c]^n[p++];h=i[h>>>24]^l[u>>>16&255]^r[c>>>8&255]^o[255&d]^n[p++],u=f,c=m,d=v}f=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[p++],m=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^n[p++],v=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[p++],h=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^n[p++],e[t]=f,e[t+1]=m,e[t+2]=v,e[t+3]=h},keySize:8}),e.AES=t._createHelper(n)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n,i=m,l=(n=i.lib).WordArray,r=i.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var i=o[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(e=this._subKeys=[],i=0;16>i;i++){var l=e[i]=[],r=a[i];for(n=0;24>n;n++)l[n/6|0]|=t[(s[n]-1+r)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+r)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;7>n;n++)l[n]>>>=4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}for(t=this._invSubKeys=[],n=0;16>n;n++)t[n]=e[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,i,l){this._lBlock=n[i],this._rBlock=n[i+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var r=0;16>r;r++){for(var o=l[r],s=this._lBlock,a=this._rBlock,d=0,h=0;8>h;h++)d|=u[h][((a^o[h])&c[h])>>>0];this._lBlock=a,this._rBlock=s^d}l=this._lBlock,this._lBlock=this._rBlock,this._rBlock=l,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[i]=this._lBlock,n[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=n._createHelper(d),r=r.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(l.create(e.slice(0,2))),this._des2=d.createEncryptor(l.create(e.slice(2,4))),this._des3=d.createEncryptor(l.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),i.TripleDES=n._createHelper(r)}(),function(){var e=m.lib.WordArray;m.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var l=0;l<n;l+=3)for(var r=(t[l>>>2]>>>24-l%4*8&255)<<16|(t[l+1>>>2]>>>24-(l+1)%4*8&255)<<8|t[l+2>>>2]>>>24-(l+2)%4*8&255,o=0;4>o&&l+.75*o<n;o++)e.push(i.charAt(r>>>6*(3-o)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var n=t.length,i=this._map;(l=i.charAt(64))&&-1!=(l=t.indexOf(l))&&(n=l);for(var l=[],r=0,o=0;o<n;o++)if(o%4){var s=i.indexOf(t.charAt(o-1))<<o%4*2,a=i.indexOf(t.charAt(o))>>>6-o%4*2;l[r>>>2]|=(s|a)<<24-r%4*8,r++}return e.create(l,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,i,l,r,o){return((e=e+(t&n|~t&i)+l+o)<<r|e>>>32-r)+t}function n(e,t,n,i,l,r,o){return((e=e+(t&i|n&~i)+l+o)<<r|e>>>32-r)+t}function i(e,t,n,i,l,r,o){return((e=e+(t^n^i)+l+o)<<r|e>>>32-r)+t}function l(e,t,n,i,l,r,o){return((e=e+(n^(t|~i))+l+o)<<r|e>>>32-r)+t}for(var r=m,o=(a=r.lib).WordArray,s=a.Hasher,a=r.algo,u=[],c=0;64>c;c++)u[c]=4294967296*e.abs(e.sin(c+1))|0;a=a.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var o=0;16>o;o++)e[s=r+o]=16711935&((a=e[s])<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s,a=e[r+1],c=e[r+2],d=e[r+3],h=e[r+4],p=e[r+5],g=e[r+6],f=e[r+7],m=e[r+8],v=e[r+9],y=e[r+10],S=e[r+11],b=e[r+12],C=e[r+13],_=e[r+14],w=e[r+15],E=t(E=(o=this._hash.words)[0],x=o[1],A=o[2],T=o[3],s=e[r+0],7,u[0]),T=t(T,E,x,A,a,12,u[1]),A=t(A,T,E,x,c,17,u[2]),x=t(x,A,T,E,d,22,u[3]);E=t(E,x,A,T,h,7,u[4]),T=t(T,E,x,A,p,12,u[5]),A=t(A,T,E,x,g,17,u[6]),x=t(x,A,T,E,f,22,u[7]),E=t(E,x,A,T,m,7,u[8]),T=t(T,E,x,A,v,12,u[9]),A=t(A,T,E,x,y,17,u[10]),x=t(x,A,T,E,S,22,u[11]),E=t(E,x,A,T,b,7,u[12]),T=t(T,E,x,A,C,12,u[13]),A=t(A,T,E,x,_,17,u[14]),E=n(E,x=t(x,A,T,E,w,22,u[15]),A,T,a,5,u[16]),T=n(T,E,x,A,g,9,u[17]),A=n(A,T,E,x,S,14,u[18]),x=n(x,A,T,E,s,20,u[19]),E=n(E,x,A,T,p,5,u[20]),T=n(T,E,x,A,y,9,u[21]),A=n(A,T,E,x,w,14,u[22]),x=n(x,A,T,E,h,20,u[23]),E=n(E,x,A,T,v,5,u[24]),T=n(T,E,x,A,_,9,u[25]),A=n(A,T,E,x,d,14,u[26]),x=n(x,A,T,E,m,20,u[27]),E=n(E,x,A,T,C,5,u[28]),T=n(T,E,x,A,c,9,u[29]),A=n(A,T,E,x,f,14,u[30]),E=i(E,x=n(x,A,T,E,b,20,u[31]),A,T,p,4,u[32]),T=i(T,E,x,A,m,11,u[33]),A=i(A,T,E,x,S,16,u[34]),x=i(x,A,T,E,_,23,u[35]),E=i(E,x,A,T,a,4,u[36]),T=i(T,E,x,A,h,11,u[37]),A=i(A,T,E,x,f,16,u[38]),x=i(x,A,T,E,y,23,u[39]),E=i(E,x,A,T,C,4,u[40]),T=i(T,E,x,A,s,11,u[41]),A=i(A,T,E,x,d,16,u[42]),x=i(x,A,T,E,g,23,u[43]),E=i(E,x,A,T,v,4,u[44]),T=i(T,E,x,A,b,11,u[45]),A=i(A,T,E,x,w,16,u[46]),E=l(E,x=i(x,A,T,E,c,23,u[47]),A,T,s,6,u[48]),T=l(T,E,x,A,f,10,u[49]),A=l(A,T,E,x,_,15,u[50]),x=l(x,A,T,E,p,21,u[51]),E=l(E,x,A,T,b,6,u[52]),T=l(T,E,x,A,d,10,u[53]),A=l(A,T,E,x,y,15,u[54]),x=l(x,A,T,E,a,21,u[55]),E=l(E,x,A,T,m,6,u[56]),T=l(T,E,x,A,w,10,u[57]),A=l(A,T,E,x,g,15,u[58]),x=l(x,A,T,E,C,21,u[59]),E=l(E,x,A,T,h,6,u[60]),T=l(T,E,x,A,S,10,u[61]),A=l(A,T,E,x,c,15,u[62]),x=l(x,A,T,E,v,21,u[63]),o[0]=o[0]+E|0,o[1]=o[1]+x|0,o[2]=o[2]+A|0,o[3]=o[3]+T|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,l=8*t.sigBytes;n[l>>>5]|=128<<24-l%32;var r=e.floor(i/4294967296);for(n[15+(l+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(l+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,i=0;4>i;i++)n[i]=16711935&((l=n[i])<<8|l>>>24)|4278255360&(l<<24|l>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=s._createHelper(a),r.HmacMD5=s._createHmacHelper(a)}(Math),function(){var e=m,t=(l=e.lib).WordArray,n=l.Hasher,i=[],l=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,l=n[0],r=n[1],o=n[2],s=n[3],a=n[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var c=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=c<<1|c>>>31}c=(l<<5|l>>>27)+a+i[u],c=20>u?c+(1518500249+(r&o|~r&s)):40>u?c+(1859775393+(r^o^s)):60>u?c+((r&o|r&s|o&s)-1894007588):c+((r^o^s)-899497514),a=s,s=o,o=r<<30|r>>>2,r=l,l=c}n[0]=n[0]+l|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(l),e.HmacSHA1=n._createHmacHelper(l)}(),function(e){for(var t=m,n=(l=t.lib).WordArray,i=l.Hasher,l=t.algo,r=[],o=[],s=function(e){return 4294967296*(e-(0|e))|0},a=2,u=0;64>u;){var c;e:{for(var d=e.sqrt(c=a),h=2;h<=d;h++)if(!(c%h)){c=!1;break e}c=!0}c&&(8>u&&(r[u]=s(e.pow(a,.5))),o[u]=s(e.pow(a,1/3)),u++),a++}var p=[];l=l.SHA256=i.extend({_doReset:function(){this._hash=new n.init(r.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],l=n[1],r=n[2],s=n[3],a=n[4],u=n[5],c=n[6],d=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var g=p[h-15],f=p[h-2];p[h]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+p[h-7]+((f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10)+p[h-16]}g=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+o[h]+p[h],f=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&l^i&r^l&r),d=c,c=u,u=a,a=s+g|0,s=r,r=l,l=i,i=g+f|0}n[0]=n[0]+i|0,n[1]=n[1]+l|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+c|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,l=8*t.sigBytes;return n[l>>>5]|=128<<24-l%32,n[14+(l+64>>>9<<4)]=e.floor(i/4294967296),n[15+(l+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),function(){var e=m,t=e.lib.WordArray,n=(i=e.algo).SHA256,i=i.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(i),e.HmacSHA224=n._createHmacHelper(i)}(),function(){function e(){return i.create.apply(i,arguments)}for(var t=m,n=t.lib.Hasher,i=(r=t.x64).Word,l=r.WordArray,r=t.algo,o=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],s=[],a=0;80>a;a++)s[a]=e();r=r.SHA512=n.extend({_doReset:function(){this._hash=new l.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n,i=(n=this._hash.words)[0],l=n[1],r=n[2],a=n[3],u=n[4],c=n[5],d=n[6],h=i.high,p=i.low,g=l.high,f=l.low,m=r.high,v=r.low,y=a.high,S=a.low,b=u.high,C=u.low,_=c.high,w=c.low,E=d.high,T=d.low,A=(n=n[7]).high,x=n.low,I=h,R=p,F=g,k=f,N=m,P=v,O=y,D=S,H=b,L=C,V=_,B=w,j=E,U=T,q=A,M=x,K=0;80>K;K++){var G=s[K];if(16>K)var W=G.high=0|e[t+2*K],z=G.low=0|e[t+2*K+1];else{W=((z=(W=s[K-15]).high)>>>1|(J=W.low)<<31)^(z>>>8|J<<24)^z>>>7;var J=(J>>>1|z<<31)^(J>>>8|z<<24)^(J>>>7|z<<25),Y=((z=(Y=s[K-2]).high)>>>19|($=Y.low)<<13)^(z<<3|$>>>29)^z>>>6,$=($>>>19|z<<13)^($<<3|z>>>29)^($>>>6|z<<26);G.high=W=(W=(W=W+(X=(z=s[K-7]).high)+((z=J+z.low)>>>0<J>>>0?1:0))+Y+((z+=$)>>>0<$>>>0?1:0))+(ne=(Q=s[K-16]).high)+((z+=Q=Q.low)>>>0<Q>>>0?1:0),G.low=z}var X=H&V^~H&j,Q=L&B^~L&U,Z=(G=I&F^I&N^F&N,R&k^R&P^k&P),ee=($=o[K]).high,te=$.low,ne=q+((H>>>14|L<<18)^(H>>>18|L<<14)^(H<<23|L>>>9))+(($=M+((L>>>14|H<<18)^(L>>>18|H<<14)^(L<<23|H>>>9)))>>>0<M>>>0?1:0);q=j,M=U,j=V,U=B,V=H,B=L,H=O+(ne=(ne=(ne=ne+X+(($+=Q)>>>0<Q>>>0?1:0))+ee+(($+=te)>>>0<te>>>0?1:0))+W+(($+=z)>>>0<z>>>0?1:0))+((L=D+$|0)>>>0<D>>>0?1:0)|0,O=N,D=P,N=F,P=k,F=I,k=R,I=ne+(G=(J=(I>>>28|R<<4)^(I<<30|R>>>2)^(I<<25|R>>>7))+G+((z=(Y=(R>>>28|I<<4)^(R<<30|I>>>2)^(R<<25|I>>>7))+Z)>>>0<Y>>>0?1:0))+((R=$+z|0)>>>0<$>>>0?1:0)|0}p=i.low=p+R,i.high=h+I+(p>>>0<R>>>0?1:0),f=l.low=f+k,l.high=g+F+(f>>>0<k>>>0?1:0),v=r.low=v+P,r.high=m+N+(v>>>0<P>>>0?1:0),S=a.low=S+D,a.high=y+O+(S>>>0<D>>>0?1:0),C=u.low=C+L,u.high=b+H+(C>>>0<L>>>0?1:0),w=c.low=w+B,c.high=_+V+(w>>>0<B>>>0?1:0),T=d.low=T+U,d.high=E+j+(T>>>0<U>>>0?1:0),x=n.low=x+M,n.high=A+q+(x>>>0<M>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(r),t.HmacSHA512=n._createHmacHelper(r)}(),function(){var e=m,t=(l=e.x64).Word,n=l.WordArray,i=(l=e.algo).SHA512,l=l.SHA384=i.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=i._createHelper(l),e.HmacSHA384=i._createHmacHelper(l)}(),function(){var e=m,t=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,l=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),r=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),s=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),a=t.create([0,1518500249,1859775393,2400959708,2840853838]),u=t.create([1352829926,1548603684,1836072691,2053994217,0]);i=i.RIPEMD160=n.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++)e[i=t+n]=16711935&((C=e[i])<<8|C>>>24)|4278255360&(C<<24|C>>>8);var i,c,d,h,p,g,f,m,v,y,S,b,C=a.words,_=u.words,w=l.words,E=r.words,T=o.words,A=s.words;for(f=c=(i=this._hash.words)[0],m=d=i[1],v=h=i[2],y=p=i[3],S=g=i[4],n=0;80>n;n+=1)b=c+e[t+w[n]]|0,b=16>n?b+((d^h^p)+C[0]):32>n?b+((d&h|~d&p)+C[1]):48>n?b+(((d|~h)^p)+C[2]):64>n?b+((d&p|h&~p)+C[3]):b+((d^(h|~p))+C[4]),b=(b=(b|=0)<<T[n]|b>>>32-T[n])+g|0,c=g,g=p,p=h<<10|h>>>22,h=d,d=b,b=f+e[t+E[n]]|0,b=16>n?b+((m^(v|~y))+_[0]):32>n?b+((m&y|v&~y)+_[1]):48>n?b+(((m|~v)^y)+_[2]):64>n?b+((m&v|~m&y)+_[3]):b+((m^v^y)+_[4]),b=(b=(b|=0)<<A[n]|b>>>32-A[n])+S|0,f=S,S=y,y=v<<10|v>>>22,v=m,m=b;b=i[1]+h+y|0,i[1]=i[2]+p+S|0,i[2]=i[3]+g+f|0,i[3]=i[4]+c+m|0,i[4]=i[0]+d+v|0,i[0]=b},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;for(t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;5>n;n++)t[n]=16711935&((i=t[n])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.RIPEMD160=n._createHelper(i),e.HmacRIPEMD160=n._createHmacHelper(i)}(Math),function(){var e=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var i=t.blockSize,l=4*i;n.sigBytes>l&&(n=t.finalize(n)),n.clamp();for(var r=this._oKey=n.clone(),o=this._iKey=n.clone(),s=r.words,a=o.words,u=0;u<i;u++)s[u]^=1549556828,a[u]^=909522486;r.sigBytes=o.sigBytes=l,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=m,n=(e=t.lib).Base,i=e.WordArray,l=(e=t.algo).HMAC,r=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=l.create((c=this.cfg).hasher,e),r=i.create(),o=i.create([1]),s=r.words,a=o.words,u=c.keySize,c=c.iterations;s.length<u;){var d=n.update(t).finalize(o);n.reset();for(var h=d.words,p=h.length,g=d,f=1;f<c;f++){g=n.finalize(g),n.reset();for(var m=g.words,v=0;v<p;v++)h[v]^=m[v]}r.concat(d),a[0]++}return r.sigBytes=4*u,r}});t.PBKDF2=function(e,t,n){return r.create(n).compute(e,t)}}();var v,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S="=";function b(e){var t,n,i="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),i+=y.charAt(n>>6)+y.charAt(63&n);if(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),i+=y.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),i+=y.charAt(n>>2)+y.charAt((3&n)<<4)),S)for(;(3&i.length)>0;)i+=S;return i}function C(e){var t,n,i,l="",r=0;for(t=0;t<e.length&&e.charAt(t)!=S;++t)(i=y.indexOf(e.charAt(t)))<0||(0==r?(l+=R(i>>2),n=3&i,r=1):1==r?(l+=R(n<<2|i>>4),n=15&i,r=2):2==r?(l+=R(n),l+=R(i>>2),n=3&i,r=3):(l+=R(n<<2|i>>4),l+=R(15&i),r=0));return 1==r&&(l+=R(n<<2)),l}function _(e){var t,n=C(e),i=new Array;for(t=0;2*t<n.length;++t)i[t]=parseInt(n.substring(2*t,2*t+2),16);return i}function w(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function E(){return new w(null)}"Microsoft Internet Explorer"==n.appName?(w.prototype.am=function(e,t,n,i,l,r){for(var o=32767&t,s=t>>15;--r>=0;){var a=32767&this[e],u=this[e++]>>15,c=s*a+u*o;l=((a=o*a+((32767&c)<<15)+n[i]+(1073741823&l))>>>30)+(c>>>15)+s*u+(l>>>30),n[i++]=1073741823&a}return l},v=30):"Netscape"!=n.appName?(w.prototype.am=function(e,t,n,i,l,r){for(;--r>=0;){var o=t*this[e++]+n[i]+l;l=Math.floor(o/67108864),n[i++]=67108863&o}return l},v=26):(w.prototype.am=function(e,t,n,i,l,r){for(var o=16383&t,s=t>>14;--r>=0;){var a=16383&this[e],u=this[e++]>>14,c=s*a+u*o;l=((a=o*a+((16383&c)<<14)+n[i]+l)>>28)+(c>>14)+s*u,n[i++]=268435455&a}return l},v=28),w.prototype.DB=v,w.prototype.DM=(1<<v)-1,w.prototype.DV=1<<v,w.prototype.FV=Math.pow(2,52),w.prototype.F1=52-v,w.prototype.F2=2*v-52;var T,A,x="0123456789abcdefghijklmnopqrstuvwxyz",I=new Array;for(T="0".charCodeAt(0),A=0;A<=9;++A)I[T++]=A;for(T="a".charCodeAt(0),A=10;A<36;++A)I[T++]=A;for(T="A".charCodeAt(0),A=10;A<36;++A)I[T++]=A;function R(e){return x.charAt(e)}function F(e,t){var n=I[e.charCodeAt(t)];return null==n?-1:n}function k(e){var t=E();return t.fromInt(e),t}function N(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function P(e){this.m=e}function O(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function D(e,t){return e&t}function H(e,t){return e|t}function L(e,t){return e^t}function V(e,t){return e&~t}function B(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function j(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function U(){}function q(e){return e}function M(e){this.r2=E(),this.q3=E(),w.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}P.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},P.prototype.revert=function(e){return e},P.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},P.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},O.prototype.convert=function(e){var t=E();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(w.ZERO)>0&&this.m.subTo(t,t),t},O.prototype.revert=function(e){var t=E();return e.copyTo(t),this.reduce(t),t},O.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},O.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},O.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},w.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},w.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},w.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,l=!1,r=0;--i>=0;){var o=8==n?255&e[i]:F(e,i);o<0?"-"==e.charAt(i)&&(l=!0):(l=!1,0==r?this[this.t++]=o:r+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-r)-1)<<r,this[this.t++]=o>>this.DB-r):this[this.t-1]|=o<<r,(r+=n)>=this.DB&&(r-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),l&&w.ZERO.subTo(this,this)},w.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},w.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},w.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},w.prototype.lShiftTo=function(e,t){var n,i=e%this.DB,l=this.DB-i,r=(1<<l)-1,o=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>l|s,s=(this[n]&r)<<i;for(n=o-1;n>=0;--n)t[n]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},w.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,l=this.DB-i,r=(1<<i)-1;t[0]=this[n]>>i;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&r)<<l,t[o-n]=this[o]>>i;i>0&&(t[this.t-n-1]|=(this.s&r)<<l),t.t=this.t-n,t.clamp()}},w.prototype.subTo=function(e,t){for(var n=0,i=0,l=Math.min(e.t,this.t);n<l;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},w.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),l=n.t;for(t.t=l+i.t;--l>=0;)t[l]=0;for(l=0;l<i.t;++l)t[l+n.t]=n.am(0,i[l],t,l,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&w.ZERO.subTo(t,t)},w.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},w.prototype.divRemTo=function(e,t,n){var i=e.abs();if(!(i.t<=0)){var l=this.abs();if(l.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=E());var r=E(),o=this.s,s=e.s,a=this.DB-N(i[i.t-1]);a>0?(i.lShiftTo(a,r),l.lShiftTo(a,n)):(i.copyTo(r),l.copyTo(n));var u=r.t,c=r[u-1];if(0!=c){var d=c*(1<<this.F1)+(u>1?r[u-2]>>this.F2:0),h=this.FV/d,p=(1<<this.F1)/d,g=1<<this.F2,f=n.t,m=f-u,v=null==t?E():t;for(r.dlShiftTo(m,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),w.ONE.dlShiftTo(u,v),v.subTo(r,r);r.t<u;)r[r.t++]=0;for(;--m>=0;){var y=n[--f]==c?this.DM:Math.floor(n[f]*h+(n[f-1]+g)*p);if((n[f]+=r.am(0,y,n,m,0,u))<y)for(r.dlShiftTo(m,v),n.subTo(v,n);n[f]<--y;)n.subTo(v,n)}null!=t&&(n.drShiftTo(u,t),o!=s&&w.ZERO.subTo(t,t)),n.t=u,n.clamp(),a>0&&n.rShiftTo(a,n),o<0&&w.ZERO.subTo(n,n)}}},w.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},w.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},w.prototype.exp=function(e,t){if(e>4294967295||e<1)return w.ONE;var n=E(),i=E(),l=t.convert(this),r=N(e)-1;for(l.copyTo(n);--r>=0;)if(t.sqrTo(n,i),(e&1<<r)>0)t.mulTo(i,l,n);else{var o=n;n=i,i=o}return t.revert(n)},w.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,l=!1,r="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(l=!0,r=R(n));o>=0;)s<t?(n=(this[o]&(1<<s)-1)<<t-s,n|=this[--o]>>(s+=this.DB-t)):(n=this[o]>>(s-=t)&i,s<=0&&(s+=this.DB,--o)),n>0&&(l=!0),l&&(r+=R(n));return l?r:"0"},w.prototype.negate=function(){var e=E();return w.ZERO.subTo(this,e),e},w.prototype.abs=function(){return this.s<0?this.negate():this},w.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},w.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+N(this[this.t-1]^this.s&this.DM)},w.prototype.mod=function(e){var t=E();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(w.ZERO)>0&&e.subTo(t,t),t},w.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new P(t):new O(t),this.exp(e,n)},w.ZERO=k(0),w.ONE=k(1),U.prototype.convert=q,U.prototype.revert=q,U.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},U.prototype.sqrTo=function(e,t){e.squareTo(t)},M.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=E();return e.copyTo(t),this.reduce(t),t},M.prototype.revert=function(e){return e},M.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},M.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},M.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var K=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],G=(1<<26)/K[K.length-1];function W(){this.i=0,this.j=0,this.S=new Array}w.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},w.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=k(n),l=E(),r=E(),o="";for(this.divRemTo(i,l,r);l.signum()>0;)o=(n+r.intValue()).toString(e).substr(1)+o,l.divRemTo(i,l,r);return r.intValue().toString(e)+o},w.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),l=!1,r=0,o=0,s=0;s<e.length;++s){var a=F(e,s);a<0?"-"==e.charAt(s)&&0==this.signum()&&(l=!0):(o=t*o+a,++r>=n&&(this.dMultiply(i),this.dAddOffset(o,0),r=0,o=0))}r>0&&(this.dMultiply(Math.pow(t,r)),this.dAddOffset(o,0)),l&&w.ZERO.subTo(this,this)},w.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(w.ONE.shiftLeft(e-1),H,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(w.ONE.shiftLeft(e-1),this);else{var i=new Array,l=7&e;i.length=1+(e>>3),t.nextBytes(i),l>0?i[0]&=(1<<l)-1:i[0]=0,this.fromString(i,256)}},w.prototype.bitwiseTo=function(e,t,n){var i,l,r=Math.min(e.t,this.t);for(i=0;i<r;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(l=e.s&this.DM,i=r;i<this.t;++i)n[i]=t(this[i],l);n.t=this.t}else{for(l=this.s&this.DM,i=r;i<e.t;++i)n[i]=t(l,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},w.prototype.changeBit=function(e,t){var n=w.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},w.prototype.addTo=function(e,t){for(var n=0,i=0,l=Math.min(e.t,this.t);n<l;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},w.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},w.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},w.prototype.multiplyLowerTo=function(e,t,n){var i,l=Math.min(this.t+e.t,t);for(n.s=0,n.t=l;l>0;)n[--l]=0;for(i=n.t-this.t;l<i;++l)n[l+this.t]=this.am(0,e[l],n,l,0,this.t);for(i=Math.min(e.t,t);l<i;++l)this.am(0,e[l],n,l,0,t-l);n.clamp()},w.prototype.multiplyUpperTo=function(e,t,n){var i=n.t=this.t+e.t- --t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)},w.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n},w.prototype.millerRabin=function(e){var t=this.subtract(w.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var i=t.shiftRight(n);(e=e+1>>1)>K.length&&(e=K.length);for(var l=E(),r=0;r<e;++r){l.fromInt(K[Math.floor(Math.random()*K.length)]);var o=l.modPow(i,this);if(0!=o.compareTo(w.ONE)&&0!=o.compareTo(t)){for(var s=1;s++<n&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(w.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},w.prototype.clone=function(){var e=E();return this.copyTo(e),e},w.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},w.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},w.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},w.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},w.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,l=0;if(e-- >0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[l++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==l&&(128&this.s)!=(128&n)&&++l,(l>0||n!=this.s)&&(t[l++]=n);return t},w.prototype.equals=function(e){return 0==this.compareTo(e)},w.prototype.min=function(e){return this.compareTo(e)<0?this:e},w.prototype.max=function(e){return this.compareTo(e)>0?this:e},w.prototype.and=function(e){var t=E();return this.bitwiseTo(e,D,t),t},w.prototype.or=function(e){var t=E();return this.bitwiseTo(e,H,t),t},w.prototype.xor=function(e){var t=E();return this.bitwiseTo(e,L,t),t},w.prototype.andNot=function(e){var t=E();return this.bitwiseTo(e,V,t),t},w.prototype.not=function(){for(var e=E(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},w.prototype.shiftLeft=function(e){var t=E();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},w.prototype.shiftRight=function(e){var t=E();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},w.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+B(this[e]);return this.s<0?this.t*this.DB:-1},w.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=j(this[n]^t);return e},w.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},w.prototype.setBit=function(e){return this.changeBit(e,H)},w.prototype.clearBit=function(e){return this.changeBit(e,V)},w.prototype.flipBit=function(e){return this.changeBit(e,L)},w.prototype.add=function(e){var t=E();return this.addTo(e,t),t},w.prototype.subtract=function(e){var t=E();return this.subTo(e,t),t},w.prototype.multiply=function(e){var t=E();return this.multiplyTo(e,t),t},w.prototype.divide=function(e){var t=E();return this.divRemTo(e,t,null),t},w.prototype.remainder=function(e){var t=E();return this.divRemTo(e,null,t),t},w.prototype.divideAndRemainder=function(e){var t=E(),n=E();return this.divRemTo(e,t,n),new Array(t,n)},w.prototype.modPow=function(e,t){var n,i,l=e.bitLength(),r=k(1);if(l<=0)return r;n=l<18?1:l<48?3:l<144?4:l<768?5:6,i=l<8?new P(t):t.isEven()?new M(t):new O(t);var o=new Array,s=3,a=n-1,u=(1<<n)-1;if(o[1]=i.convert(this),n>1){var c=E();for(i.sqrTo(o[1],c);s<=u;)o[s]=E(),i.mulTo(c,o[s-2],o[s]),s+=2}var d,h,p=e.t-1,g=!0,f=E();for(l=N(e[p])-1;p>=0;){for(l>=a?d=e[p]>>l-a&u:(d=(e[p]&(1<<l+1)-1)<<a-l,p>0&&(d|=e[p-1]>>this.DB+l-a)),s=n;0==(1&d);)d>>=1,--s;if((l-=s)<0&&(l+=this.DB,--p),g)o[d].copyTo(r),g=!1;else{for(;s>1;)i.sqrTo(r,f),i.sqrTo(f,r),s-=2;s>0?i.sqrTo(r,f):(h=r,r=f,f=h),i.mulTo(f,o[d],r)}for(;p>=0&&0==(e[p]&1<<l);)i.sqrTo(r,f),h=r,r=f,f=h,--l<0&&(l=this.DB-1,--p)}return i.revert(r)},w.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return w.ZERO;for(var n=e.clone(),i=this.clone(),l=k(1),r=k(0),o=k(0),s=k(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(l.isEven()&&r.isEven()||(l.addTo(this,l),r.subTo(e,r)),l.rShiftTo(1,l)):r.isEven()||r.subTo(e,r),r.rShiftTo(1,r);for(;i.isEven();)i.rShiftTo(1,i),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(i)>=0?(n.subTo(i,n),t&&l.subTo(o,l),r.subTo(s,r)):(i.subTo(n,i),t&&o.subTo(l,o),s.subTo(r,s))}return 0!=i.compareTo(w.ONE)?w.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},w.prototype.pow=function(e){return this.exp(e,new U)},w.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var l=t.getLowestSetBit(),r=n.getLowestSetBit();if(r<0)return t;for(l<r&&(r=l),r>0&&(t.rShiftTo(r,t),n.rShiftTo(r,n));t.signum()>0;)(l=t.getLowestSetBit())>0&&t.rShiftTo(l,t),(l=n.getLowestSetBit())>0&&n.rShiftTo(l,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n},w.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=K[K.length-1]){for(t=0;t<K.length;++t)if(n[0]==K[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<K.length;){for(var i=K[t],l=t+1;l<K.length&&i<G;)i*=K[l++];for(i=n.modInt(i);t<l;)if(i%K[t++]==0)return!1}return n.millerRabin(e)},w.prototype.square=function(){var e=E();return this.squareTo(e),e},W.prototype.init=function(e){var t,n,i;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)i=this.S[t],this.S[t]=this.S[n=n+this.S[t]+e[t%e.length]&255],this.S[n]=i;this.i=0,this.j=0},W.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var z,J,Y,$=256;function X(){!function(e){J[Y++]^=255&e,J[Y++]^=e>>8&255,J[Y++]^=e>>16&255,J[Y++]^=e>>24&255,Y>=$&&(Y-=$)}((new Date).getTime())}if(null==J){var Q;if(J=new Array,Y=0,void 0!==i&&(void 0!==i.crypto||void 0!==i.msCrypto)){var Z=i.crypto||i.msCrypto;if(Z.getRandomValues){var ee=new Uint8Array(32);for(Z.getRandomValues(ee),Q=0;Q<32;++Q)J[Y++]=ee[Q]}else if("Netscape"==n.appName&&n.appVersion<"5"){var te=i.crypto.random(32);for(Q=0;Q<te.length;++Q)J[Y++]=255&te.charCodeAt(Q)}}for(;Y<$;)Q=Math.floor(65536*Math.random()),J[Y++]=Q>>>8,J[Y++]=255&Q;Y=0,X()}function ne(){if(null==z){for(X(),(z=new W).init(J),Y=0;Y<J.length;++Y)J[Y]=0;Y=0}return z.next()}function ie(){}function le(e,t){return new w(e,t)}function re(e,t,n){for(var i="",l=0;i.length<t;)i+=n(String.fromCharCode.apply(String,e.concat([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l]))),l+=1;return i}function oe(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function se(e,t,n){for(var i="",l=0;i.length<t;)i+=n(e+String.fromCharCode.apply(String,[(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])),l+=1;return i}function ae(e,t){this.x=t,this.q=e}function ue(e,t,n,i){this.curve=e,this.x=t,this.y=n,this.z=null==i?w.ONE:i,this.zinv=null}function ce(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new ue(this,null,null)}ie.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=ne()},oe.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},oe.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=le(e,16),this.e=parseInt(t,16)}},oe.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,i=e.length-1;i>=0&&t>0;){var l=e.charCodeAt(i--);l<128?n[--t]=l:l>127&&l<2048?(n[--t]=63&l|128,n[--t]=l>>6|192):(n[--t]=63&l|128,n[--t]=l>>6&63|128,n[--t]=l>>12|224)}n[--t]=0;for(var r=new ie,o=new Array;t>2;){for(o[0]=0;0==o[0];)r.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new w(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var i=n.toString(16);return 0==(1&i.length)?i:"0"+i},oe.prototype.encryptOAEP=function(e,t,n){var i=function(e,t,n,i){var l=he.crypto.MessageDigest,r=he.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=l.getCanonicalAlgName(n),i=l.getHashLength(o),n=function(e){return Ae(r.hashHex(xe(e),o))}),e.length+2*i+2>t)throw"Message too long for RSA";var s,a="";for(s=0;s<t-e.length-2*i-2;s+=1)a+="\0";var u=n("")+a+""+e,c=new Array(i);(new ie).nextBytes(c);var d=re(c,u.length,n),h=[];for(s=0;s<u.length;s+=1)h[s]=u.charCodeAt(s)^d.charCodeAt(s);var p=re(h,c.length,n),g=[0];for(s=0;s<c.length;s+=1)g[s+1]=c[s]^p.charCodeAt(s);return new w(g.concat(h))}(e,this.n.bitLength()+7>>3,t,n);if(null==i)return null;var l=this.doPublic(i);if(null==l)return null;var r=l.toString(16);return 0==(1&r.length)?r:"0"+r},oe.prototype.type="RSA",oe.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},oe.prototype.setPrivate=function(e,t,n){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=n;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=le(e,16),this.e=parseInt(t,16),this.d=le(n,16)}},oe.prototype.setPrivateEx=function(e,t,n,i,l,r,o,s){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=le(e,16),this.e=parseInt(t,16),this.d=le(n,16),this.p=le(i,16),this.q=le(l,16),this.dmp1=le(r,16),this.dmq1=le(o,16),this.coeff=le(s,16)},oe.prototype.generate=function(e,t){var n=new ie,i=e>>1;this.e=parseInt(t,16);for(var l=new w(t,16);;){for(;this.p=new w(e-i,1,n),0!=this.p.subtract(w.ONE).gcd(l).compareTo(w.ONE)||!this.p.isProbablePrime(10););for(;this.q=new w(i,1,n),0!=this.q.subtract(w.ONE).gcd(l).compareTo(w.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var r=this.p;this.p=this.q,this.q=r}var o=this.p.subtract(w.ONE),s=this.q.subtract(w.ONE),a=o.multiply(s);if(0==a.gcd(l).compareTo(w.ONE)){this.n=this.p.multiply(this.q),this.d=l.modInverse(a),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},oe.prototype.decrypt=function(e){var t=le(e,16),n=this.doPrivate(t);return null==n?null:function(e,t){for(var n=e.toByteArray(),i=0;i<n.length&&0==n[i];)++i;if(n.length-i!=t-1||2!=n[i])return null;for(++i;0!=n[i];)if(++i>=n.length)return null;for(var l="";++i<n.length;){var r=255&n[i];r<128?l+=String.fromCharCode(r):r>191&&r<224?(l+=String.fromCharCode((31&r)<<6|63&n[i+1]),++i):(l+=String.fromCharCode((15&r)<<12|(63&n[i+1])<<6|63&n[i+2]),i+=2)}return l}(n,this.n.bitLength()+7>>3)},oe.prototype.decryptOAEP=function(e,t,n){var i=le(e,16),l=this.doPrivate(i);return null==l?null:function(e,t,n,i){var l=he.crypto.MessageDigest,r=he.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=l.getCanonicalAlgName(n),i=l.getHashLength(o),n=function(e){return Ae(r.hashHex(xe(e),o))}),e=e.toByteArray(),s=0;s<e.length;s+=1)e[s]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*i+2)throw"Cipher too short";var s,a=e.substr(1,i),u=e.substr(i+1),c=se(u,i,n),d=[];for(s=0;s<a.length;s+=1)d[s]=a.charCodeAt(s)^c.charCodeAt(s);var h=se(String.fromCharCode.apply(String,d),e.length-i,n),p=[];for(s=0;s<u.length;s+=1)p[s]=u.charCodeAt(s)^h.charCodeAt(s);if((p=String.fromCharCode.apply(String,p)).substr(0,i)!==n(""))throw"Hash mismatch";var g=(p=p.substr(i)).indexOf("");if((-1!=g?p.substr(0,g).lastIndexOf("\0"):-1)+1!=g)throw"Malformed data";return p.substr(g+1)}(l,this.n.bitLength()+7>>3,t,n)},ae.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ae.prototype.toBigInteger=function(){return this.x},ae.prototype.negate=function(){return new ae(this.q,this.x.negate().mod(this.q))},ae.prototype.add=function(e){return new ae(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ae.prototype.subtract=function(e){return new ae(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ae.prototype.multiply=function(e){return new ae(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ae.prototype.square=function(){return new ae(this.q,this.x.square().mod(this.q))},ae.prototype.divide=function(e){return new ae(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},ue.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ue.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ue.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(w.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(w.ZERO))},ue.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)},ue.prototype.negate=function(){return new ue(this.curve,this.x,this.y.negate(),this.z)},ue.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(w.ZERO.equals(n))return w.ZERO.equals(t)?this.twice():this.curve.getInfinity();var i=new w("3"),l=this.x.toBigInteger(),r=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),s=o.multiply(n),a=l.multiply(o),u=t.square().multiply(this.z),c=u.subtract(a.shiftLeft(1)).multiply(e.z).subtract(s).multiply(n).mod(this.curve.q),d=a.multiply(i).multiply(t).subtract(r.multiply(s)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),h=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ue(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(d),h)},ue.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new w("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),i=n.multiply(this.z),l=i.multiply(n).mod(this.curve.q),r=this.curve.a.toBigInteger(),o=t.square().multiply(e);w.ZERO.equals(r)||(o=o.add(this.z.square().multiply(r)));var s=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(l)).shiftLeft(1).multiply(i).mod(this.curve.q),a=o.multiply(e).multiply(t).subtract(l.shiftLeft(1)).shiftLeft(2).multiply(l).subtract(o.square().multiply(o)).mod(this.curve.q),u=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new ue(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(a),u)},ue.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,i=n.multiply(new w("3")),l=this.negate(),r=this;for(t=i.bitLength()-2;t>0;--t){r=r.twice();var o=i.testBit(t);o!=n.testBit(t)&&(r=r.add(o?this:l))}return r},ue.prototype.multiplyTwo=function(e,t,n){var i;i=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var l=this.curve.getInfinity(),r=this.add(t);i>=0;)l=l.twice(),e.testBit(i)?l=n.testBit(i)?l.add(r):l.add(this):n.testBit(i)&&(l=l.add(t)),--i;return l},ce.prototype.getQ=function(){return this.q},ce.prototype.getA=function(){return this.a},ce.prototype.getB=function(){return this.b},ce.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ce.prototype.getInfinity=function(){return this.infinity},ce.prototype.fromBigInteger=function(e){return new ae(this.q,e)},ce.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),i=e.substr(t+2,t);return new ue(this,this.fromBigInteger(new w(n,16)),this.fromBigInteger(new w(i,16)));default:return null}},ae.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ue.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),i=this.getY().toBigInteger(),l=t(n,32);return e?i.isEven()?l.unshift(2):l.unshift(3):(l.unshift(4),l=l.concat(t(i,32))),l},ue.decodeFrom=function(e,t){var n=t.length-1,i=t.slice(1,1+n/2),l=t.slice(1+n/2,1+n);i.unshift(0),l.unshift(0);var r=new w(i),o=new w(l);return new ue(e,e.fromBigInteger(r),e.fromBigInteger(o))},ue.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,i=t.substr(2,n/2),l=t.substr(2+n/2,n/2),r=new w(i,16),o=new w(l,16);return new ue(e,e.fromBigInteger(r),e.fromBigInteger(o))},ue.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),i=n.square().subtract(this.x).subtract(e.x),l=n.multiply(this.x.subtract(i)).subtract(this.y);return new ue(this.curve,i,l)},ue.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(w.valueOf(2)),t=this.curve.fromBigInteger(w.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),i=n.square().subtract(this.x.multiply(e)),l=n.multiply(this.x.subtract(i)).subtract(this.y);return new ue(this.curve,i,l)},ue.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,i=n.multiply(new w("3")),l=this.negate(),r=this;for(t=i.bitLength()-2;t>0;--t){r=r.twice();var o=i.testBit(t);o!=n.testBit(t)&&(r=r.add2D(o?this:l))}return r},ue.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),i=this.curve.getB().toBigInteger(),l=this.curve.getQ(),r=t.multiply(t).mod(l),o=e.multiply(e).multiply(e).add(n.multiply(e)).add(i).mod(l);return r.equals(o)},ue.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ue.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(w.ONE)<0||t.compareTo(e.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(w.ONE)<0||n.compareTo(e.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var de=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function i(e,t,i){return t?n[t]:String.fromCharCode(parseInt(i,16))}var l=new String(""),r=(Object,Array,Object.hasOwnProperty);return function(n,o){var s,a,u=n.match(e),c=u[0],d=!1;"{"===c?s={}:"["===c?s=[]:(s=[],d=!0);for(var h=[s],p=1-d,g=u.length;p<g;++p){var f;switch((c=u[p]).charCodeAt(0)){default:(f=h[0])[a||f.length]=+c,a=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(t,i)),f=h[0],!a){if(!(f instanceof Array)){a=c||l;break}a=f.length}f[a]=c,a=void 0;break;case 91:h.unshift((f=h[0])[a||f.length]=[]),a=void 0;break;case 93:h.shift();break;case 102:(f=h[0])[a||f.length]=!1,a=void 0;break;case 110:(f=h[0])[a||f.length]=null,a=void 0;break;case 116:(f=h[0])[a||f.length]=!0,a=void 0;break;case 123:h.unshift((f=h[0])[a||f.length]={}),a=void 0;break;case 125:h.shift()}}if(d){if(1!==h.length)throw new Error;s=s[0]}else if(h.length)throw new Error;if(o){var m=function(e,t){var n=e[t];if(n&&"object"==typeof n){var i=null;for(var l in n)if(r.call(n,l)&&n!==e){var s=m(n,l);void 0!==s?n[l]=s:(i||(i=[]),i.push(l))}if(i)for(var a=i.length;--a>=0;)delete n[i[a]]}return o.call(e,t,n)};s=m({"":s},"")}return s}}();void 0!==he&&he||(he={}),void 0!==he.asn1&&he.asn1||(he.asn1={}),he.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var i="",l=0;l<n;l++)i+="f";t=new w(i,16).xor(e).add(w.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return ke(e,t)},this.newObject=function(e){var t=he.asn1,n=t.DERBoolean,i=t.DERInteger,l=t.DERBitString,r=t.DEROctetString,o=t.DERNull,s=t.DERObjectIdentifier,a=t.DEREnumerated,u=t.DERUTF8String,c=t.DERNumericString,d=t.DERPrintableString,h=t.DERTeletexString,p=t.DERIA5String,g=t.DERUTCTime,f=t.DERGeneralizedTime,m=t.DERSequence,v=t.DERSet,y=t.DERTaggedObject,S=t.ASN1Util.newObject,b=Object.keys(e);if(1!=b.length)throw"key of param shall be only one.";var C=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+C+":"))throw"undefined key: "+C;if("bool"==C)return new n(e[C]);if("int"==C)return new i(e[C]);if("bitstr"==C)return new l(e[C]);if("octstr"==C)return new r(e[C]);if("null"==C)return new o(e[C]);if("oid"==C)return new s(e[C]);if("enum"==C)return new a(e[C]);if("utf8str"==C)return new u(e[C]);if("numstr"==C)return new c(e[C]);if("prnstr"==C)return new d(e[C]);if("telstr"==C)return new h(e[C]);if("ia5str"==C)return new p(e[C]);if("utctime"==C)return new g(e[C]);if("gentime"==C)return new f(e[C]);if("seq"==C){for(var _=e[C],w=[],E=0;E<_.length;E++){var T=S(_[E]);w.push(T)}return new m({array:w})}if("set"==C){for(_=e[C],w=[],E=0;E<_.length;E++)T=S(_[E]),w.push(T);return new v({array:w})}if("tag"==C){var A=e[C];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var x=S(A[2]);return new y({tag:A[0],explicit:A[1],obj:x})}var I={};if(void 0!==A.explicit&&(I.explicit=A.explicit),void 0!==A.tag&&(I.tag=A.tag),void 0===A.obj)throw"obj shall be specified for 'tag'.";return I.obj=S(A.obj),new y(I)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},he.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),i=(t=Math.floor(n/40)+"."+n%40,""),l=2;l<e.length;l+=2){var r=("00000000"+parseInt(e.substr(l,2),16).toString(2)).slice(-8);i+=r.substr(1,7),"0"==r.substr(0,1)&&(t=t+"."+new w(i,2).toString(10),i="")}return t},he.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",i=new w(e,10).toString(2),l=7-i.length%7;7==l&&(l=0);for(var r="",o=0;o<l;o++)r+="0";for(i=r+i,o=0;o<i.length-1;o+=7){var s=i.substr(o,7);o!=i.length-7&&(s="1"+s),n+=t(parseInt(s,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var i="",l=e.split("."),r=40*parseInt(l[0])+parseInt(l[1]);i+=t(r),l.splice(0,2);for(var o=0;o<l.length;o++)i+=n(l[o]);return i},he.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},he.asn1.DERAbstractString=function(e){he.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Ee(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},l.lang.extend(he.asn1.DERAbstractString,he.asn1.ASN1Object),he.asn1.DERAbstractTime=function(e){he.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,n){var i=this.zeroPadding,l=this.localDateToUTC(e),r=String(l.getFullYear());"utc"==t&&(r=r.substr(2,2));var o=r+i(String(l.getMonth()+1),2)+i(String(l.getDate()),2)+i(String(l.getHours()),2)+i(String(l.getMinutes()),2)+i(String(l.getSeconds()),2);if(!0===n){var s=l.getMilliseconds();if(0!=s){var a=i(String(s),3);o=o+"."+(a=a.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Se(e)},this.setByDateValue=function(e,t,n,i,l,r){var o=new Date(Date.UTC(e,t-1,n,i,l,r,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},l.lang.extend(he.asn1.DERAbstractTime,he.asn1.ASN1Object),he.asn1.DERAbstractStructured=function(e){he.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},l.lang.extend(he.asn1.DERAbstractStructured,he.asn1.ASN1Object),he.asn1.DERBoolean=function(){he.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},l.lang.extend(he.asn1.DERBoolean,he.asn1.ASN1Object),he.asn1.DERInteger=function(e){he.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=he.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new w(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},l.lang.extend(he.asn1.DERInteger,he.asn1.ASN1Object),he.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=he.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}he.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var i="";for(n=0;n<e.length-1;n+=8){var l=e.substr(n,8),r=parseInt(l,2).toString(16);1==r.length&&(r="0"+r),i+=r}this.hTLV=null,this.isModified=!0,this.hV="0"+t+i},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)t+=1==e[n]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},l.lang.extend(he.asn1.DERBitString,he.asn1.ASN1Object),he.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=he.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}he.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},l.lang.extend(he.asn1.DEROctetString,he.asn1.DERAbstractString),he.asn1.DERNull=function(){he.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},l.lang.extend(he.asn1.DERNull,he.asn1.ASN1Object),he.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",i=new w(e,10).toString(2),l=7-i.length%7;7==l&&(l=0);for(var r="",o=0;o<l;o++)r+="0";for(i=r+i,o=0;o<i.length-1;o+=7){var s=i.substr(o,7);o!=i.length-7&&(s="1"+s),n+=t(parseInt(s,2))}return n};he.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var i="",l=e.split("."),r=40*parseInt(l[0])+parseInt(l[1]);i+=t(r),l.splice(0,2);for(var o=0;o<l.length;o++)i+=n(l[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueName=function(e){var t=he.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},l.lang.extend(he.asn1.DERObjectIdentifier,he.asn1.ASN1Object),he.asn1.DEREnumerated=function(e){he.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=he.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new w(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},l.lang.extend(he.asn1.DEREnumerated,he.asn1.ASN1Object),he.asn1.DERUTF8String=function(e){he.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},l.lang.extend(he.asn1.DERUTF8String,he.asn1.DERAbstractString),he.asn1.DERNumericString=function(e){he.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},l.lang.extend(he.asn1.DERNumericString,he.asn1.DERAbstractString),he.asn1.DERPrintableString=function(e){he.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},l.lang.extend(he.asn1.DERPrintableString,he.asn1.DERAbstractString),he.asn1.DERTeletexString=function(e){he.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},l.lang.extend(he.asn1.DERTeletexString,he.asn1.DERAbstractString),he.asn1.DERIA5String=function(e){he.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},l.lang.extend(he.asn1.DERIA5String,he.asn1.DERAbstractString),he.asn1.DERUTCTime=function(e){he.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=Se(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Se(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},l.lang.extend(he.asn1.DERUTCTime,he.asn1.DERAbstractTime),he.asn1.DERGeneralizedTime=function(e){he.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Se(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Se(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},l.lang.extend(he.asn1.DERGeneralizedTime,he.asn1.DERAbstractTime),he.asn1.DERSequence=function(e){he.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},l.lang.extend(he.asn1.DERSequence,he.asn1.DERAbstractStructured),he.asn1.DERSet=function(e){he.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++)e.push(this.asn1Array[t].getEncodedHex());return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},l.lang.extend(he.asn1.DERSet,he.asn1.DERAbstractStructured),he.asn1.DERTaggedObject=function(e){he.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},l.lang.extend(he.asn1.DERTaggedObject,he.asn1.ASN1Object);var he,pe,ge,fe=new function(){};function me(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function ve(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function ye(e){for(var t="",n=0;n<e.length;n++){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function Se(e){return ye(me(e))}function be(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ce(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function _e(e){return e.length%2==1&&(e="0"+e),be(b(e))}function we(e){return C(Ce(e))}function Ee(e){return De(je(e))}function Te(e){return decodeURIComponent(He(e))}function Ae(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function xe(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Ie(e){return b(e)}function Re(e){return Ie(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Fe(e){return C(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function ke(e,t){return"-----BEGIN "+t+"-----\r\n"+Re(e)+"\r\n-----END "+t+"-----\r\n"}function Ne(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Fe(e=void 0!==t?(e=e.replace("-----BEGIN "+t+"-----","")).replace("-----END "+t+"-----",""):(e=e.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function Pe(e){var t,n,i,l,r,o,s,a,u,c,d;if(d=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return a=d[1],t=parseInt(a),2===a.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(d[2])-1,i=parseInt(d[3]),l=parseInt(d[4]),r=parseInt(d[5]),o=parseInt(d[6]),s=0,""!==(u=d[7])&&(c=(u.substr(1)+"00").substr(0,3),s=parseInt(c)),Date.UTC(t,n,i,l,r,o,s);throw"unsupported zulu format: "+e}function Oe(e){return~~(Pe(e)/1e3)}function De(e){return e.replace(/%/g,"")}function He(e){return e.replace(/(..)/g,"%$1")}function Le(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var i=":".repeat(7-n+2),l=(e=e.replace("::",i)).split(":");if(8!=l.length)throw t;for(var r=0;r<8;r++)l[r]=("0000"+l[r]).slice(-4);return l.join("")}function Ve(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var i=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===i)return e.slice(1,-1);var l="";for(n=0;n<i.length;n++)i[n].length>l.length&&(l=i[n]);return(e=e.replace(l,"::")).slice(1,-1)}function Be(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?Ve(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(o){throw t}}function je(e){for(var t=encodeURIComponent(e),n="",i=0;i<t.length;i++)"%"==t[i]?(n+=t.substr(i,3),i+=2):n=n+"%"+Se(t[i]);return n}function Ue(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function qe(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map(function(e,t,n){var i=parseInt(e);if(i<0||255<i)throw"integer not in range 0-255";return("00"+i.toString(16)).slice(-2)}).join("")}catch(o){throw"malformed integer array string: "+o}}fe.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},fe.getL=function(e,t){var n=fe.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},fe.getVblen=function(e,t){var n;return""==(n=fe.getL(e,t))?-1:("8"===n.substr(0,1)?new w(n.substr(2),16):new w(n,16)).intValue()},fe.getVidx=function(e,t){var n=fe.getLblen(e,t);return n<0?n:t+2*(n+1)},fe.getV=function(e,t){var n=fe.getVidx(e,t),i=fe.getVblen(e,t);return e.substr(n,2*i)},fe.getTLV=function(e,t){return e.substr(t,2)+fe.getL(e,t)+fe.getV(e,t)},fe.getNextSiblingIdx=function(e,t){return fe.getVidx(e,t)+2*fe.getVblen(e,t)},fe.getChildIdx=function(e,t){var n=fe,i=new Array,l=n.getVidx(e,t);"03"==e.substr(t,2)?i.push(l+2):i.push(l);for(var r=n.getVblen(e,t),o=l,s=0;;){var a=n.getNextSiblingIdx(e,o);if(null==a||a-l>=2*r)break;if(s>=200)break;i.push(a),o=a,s++}return i},fe.getNthChildIdx=function(e,t,n){return fe.getChildIdx(e,t)[n]},fe.getIdxbyList=function(e,t,n,i){var l,r,o=fe;if(0==n.length){if(void 0!==i&&e.substr(t,2)!==i)throw"checking tag doesn't match: "+e.substr(t,2)+"!="+i;return t}return l=n.shift(),r=o.getChildIdx(e,t),o.getIdxbyList(e,r[l],n,i)},fe.getTLVbyList=function(e,t,n,i){var l=fe,r=l.getIdxbyList(e,t,n);if(void 0===r)throw"can't find nthList object";if(void 0!==i&&e.substr(r,2)!=i)throw"checking tag doesn't match: "+e.substr(r,2)+"!="+i;return l.getTLV(e,r)},fe.getVbyList=function(e,t,n,i,l){var r,o,s=fe;if(void 0===(r=s.getIdxbyList(e,t,n,i)))throw"can't find nthList object";return o=s.getV(e,r),!0===l&&(o=o.substr(2)),o},fe.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],i=e.substr(0,2),l=parseInt(i,16);n[0]=new String(Math.floor(l/40)),n[1]=new String(l%40);for(var r=e.substr(2),o=[],s=0;s<r.length/2;s++)o.push(parseInt(r.substr(2*s,2),16));var a=[],u="";for(s=0;s<o.length;s++)128&o[s]?u+=t((127&o[s]).toString(2),7):(u+=t((127&o[s]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=n.join(".");return a.length>0&&(c=c+"."+a.join(".")),c},fe.dump=function(e,t,n,i){var l=fe,r=l.getV,o=l.dump,s=l.getChildIdx,a=e;e instanceof he.asn1.ASN1Object&&(a=e.getEncodedHex());var u=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===i&&(i="");var c=t.ommit_long_octet;if("01"==a.substr(n,2))return"00"==(d=r(a,n))?i+"BOOLEAN FALSE\n":i+"BOOLEAN TRUE\n";if("02"==a.substr(n,2))return i+"INTEGER "+u(d=r(a,n),c)+"\n";if("03"==a.substr(n,2))return i+"BITSTRING "+u(d=r(a,n),c)+"\n";if("04"==a.substr(n,2)){var d=r(a,n);return l.isASN1HEX(d)?(_=i+"OCTETSTRING, encapsulates\n")+o(d,t,0,i+"  "):i+"OCTETSTRING "+u(d,c)+"\n"}if("05"==a.substr(n,2))return i+"NULL\n";if("06"==a.substr(n,2)){var h=r(a,n),p=he.asn1.ASN1Util.oidHexToInt(h),g=he.asn1.x509.OID.oid2name(p),f=p.replace(/\./g," ");return""!=g?i+"ObjectIdentifier "+g+" ("+f+")\n":i+"ObjectIdentifier ("+f+")\n"}if("0c"==a.substr(n,2))return i+"UTF8String '"+Te(r(a,n))+"'\n";if("13"==a.substr(n,2))return i+"PrintableString '"+Te(r(a,n))+"'\n";if("14"==a.substr(n,2))return i+"TeletexString '"+Te(r(a,n))+"'\n";if("16"==a.substr(n,2))return i+"IA5String '"+Te(r(a,n))+"'\n";if("17"==a.substr(n,2))return i+"UTCTime "+Te(r(a,n))+"\n";if("18"==a.substr(n,2))return i+"GeneralizedTime "+Te(r(a,n))+"\n";if("30"==a.substr(n,2)){if("3000"==a.substr(n,4))return i+"SEQUENCE {}\n";_=i+"SEQUENCE\n";var m=t;if((2==(S=s(a,n)).length||3==S.length)&&"06"==a.substr(S[0],2)&&"04"==a.substr(S[S.length-1],2)){g=l.oidname(r(a,S[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=g,m=v}for(var y=0;y<S.length;y++)_+=o(a,m,S[y],i+"  ");return _}if("31"==a.substr(n,2)){_=i+"SET\n";var S=s(a,n);for(y=0;y<S.length;y++)_+=o(a,t,S[y],i+"  ");return _}var b=parseInt(a.substr(n,2),16);if(0!=(128&b)){var C=31&b;if(0!=(32&b)){var _=i+"["+C+"]\n";for(S=s(a,n),y=0;y<S.length;y++)_+=o(a,t,S[y],i+"  ");return _}return"68747470"==(d=r(a,n)).substr(0,8)&&(d=Te(d)),"subjectAltName"===t.x509ExtName&&2==C&&(d=Te(d)),i+"["+C+"] "+d+"\n"}return i+"UNKNOWN("+a.substr(n,2)+") "+r(a,n)+"\n"},fe.isASN1HEX=function(e){var t=fe;if(e.length%2==1)return!1;var n=t.getVblen(e,0),i=e.substr(0,2),l=t.getL(e,0);return e.length-i.length-l.length==2*n},fe.oidname=function(e){var t=he.asn1;he.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==he&&he||(he={}),void 0!==he.asn1&&he.asn1||(he.asn1={}),void 0!==he.asn1.x509&&he.asn1.x509||(he.asn1.x509={}),he.asn1.x509.Certificate=function(e){he.asn1.x509.Certificate.superclass.constructor.call(this);var t=he.asn1,n=t.DERSequence,i=t.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var e=new he.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});e.init(this.prvKey),e.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=e.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new i({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Re(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==e&&(void 0!==e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},l.lang.extend(he.asn1.x509.Certificate,he.asn1.ASN1Object),he.asn1.x509.TBSCertificate=function(e){he.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=he.asn1,n=t.DERSequence,i=t.DERInteger,l=t.DERTaggedObject,r=t.x509,o=r.Time,s=r.X500Name,a=r.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new l({obj:new i({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new i(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new r.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new s(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new o(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new o(e)},this.setSubjectByParam=function(e){this.asn1Subject=new s(e)},this.setSubjectPublicKey=function(e){this.asn1SubjPKey=new a(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=Me.getKey(e);this.asn1SubjPKey=new a(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){he.asn1.x509.Extension.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(e),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new n({array:this.extensionsArray}),i=new l({explicit:!0,tag:"a3",obj:t});this.asn1Array.push(i)}var r=new n({array:this.asn1Array});return this.hTLV=r.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},l.lang.extend(he.asn1.x509.TBSCertificate,he.asn1.ASN1Object),he.asn1.x509.Extension=function(e){he.asn1.x509.Extension.superclass.constructor.call(this);var t=he.asn1,n=t.DERObjectIdentifier,i=t.DEROctetString,l=t.DERBoolean,r=t.DERSequence;this.getEncodedHex=function(){var e=new n({oid:this.oid}),t=new i({hex:this.getExtnValueHex()}),o=new Array;return o.push(e),this.critical&&o.push(new l),o.push(t),new r({array:o}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},l.lang.extend(he.asn1.x509.Extension,he.asn1.ASN1Object),he.asn1.x509.Extension.appendByNameToArray=function(e,t,n){var i=e.toLowerCase(),l=he.asn1.x509;if("basicconstraints"==i){var r=new l.BasicConstraints(t);n.push(r)}else if("keyusage"==i)r=new l.KeyUsage(t),n.push(r);else if("crldistributionpoints"==i)r=new l.CRLDistributionPoints(t),n.push(r);else if("extkeyusage"==i)r=new l.ExtKeyUsage(t),n.push(r);else if("authoritykeyidentifier"==i)r=new l.AuthorityKeyIdentifier(t),n.push(r);else if("authorityinfoaccess"==i)r=new l.AuthorityInfoAccess(t),n.push(r);else if("subjectaltname"==i)r=new l.SubjectAltName(t),n.push(r);else{if("issueraltname"!=i)throw"unsupported extension name: "+e;r=new l.IssuerAltName(t),n.push(r)}},he.asn1.x509.KeyUsage=function(e){he.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Je.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new he.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var n=e.names,i="000000000",l=0;l<n.length;l++)for(var r=0;r<t.length;r++)n[l]===t[r]&&(i=i.substring(0,r)+"1"+i.substring(r+1,i.length));this.asn1ExtnValue=new he.asn1.DERBitString({bin:i})}},l.lang.extend(he.asn1.x509.KeyUsage,he.asn1.x509.Extension),he.asn1.x509.BasicConstraints=function(e){he.asn1.x509.BasicConstraints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new he.asn1.DERBoolean),this.pathLen>-1&&e.push(new he.asn1.DERInteger({int:this.pathLen}));var t=new he.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},l.lang.extend(he.asn1.x509.BasicConstraints,he.asn1.x509.Extension),he.asn1.x509.CRLDistributionPoints=function(e){he.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=he.asn1,n=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new t.DERSequence({array:e})},this.setByOneURI=function(e){var t=new n.GeneralNames([{uri:e}]),i=new n.DistributionPointName(t),l=new n.DistributionPoint({dpobj:i});this.setByDPArray([l])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},l.lang.extend(he.asn1.x509.CRLDistributionPoints,he.asn1.x509.Extension),he.asn1.x509.ExtKeyUsage=function(e){he.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=he.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var n=0;n<e.length;n++){var i=new t.DERObjectIdentifier(e[n]);this.asn1ExtnValue.appendASN1Object(i)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},l.lang.extend(he.asn1.x509.ExtKeyUsage,he.asn1.x509.Extension),he.asn1.x509.AuthorityKeyIdentifier=function(e){he.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=he.asn1,n=t.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var i=new t.DERSequence({array:e});return this.asn1ExtnValue=i,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){this.asn1KID=new he.asn1.DEROctetString(e)},this.setCertIssuerByParam=function(e){this.asn1CertIssuer=new he.asn1.x509.X500Name(e)},this.setCertSNByParam=function(e){this.asn1CertSN=new he.asn1.DERInteger(e)},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn))},l.lang.extend(he.asn1.x509.AuthorityKeyIdentifier,he.asn1.x509.Extension),he.asn1.x509.AuthorityInfoAccess=function(e){he.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,n=he.asn1,i=n.DERSequence,l=0;l<e.length;l++){var r=new i({array:[new n.DERObjectIdentifier(e[l].accessMethod),new n.x509.GeneralName(e[l].accessLocation)]});t.push(r)}this.asn1ExtnValue=new i({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},l.lang.extend(he.asn1.x509.AuthorityInfoAccess,he.asn1.x509.Extension),he.asn1.x509.SubjectAltName=function(e){he.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new he.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},l.lang.extend(he.asn1.x509.SubjectAltName,he.asn1.x509.Extension),he.asn1.x509.IssuerAltName=function(e){he.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new he.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},l.lang.extend(he.asn1.x509.IssuerAltName,he.asn1.x509.Extension),he.asn1.x509.CRL=function(e){he.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new he.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new he.asn1.DERBitString({hex:"00"+this.hexSig});var e=new he.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Re(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==e&&(void 0!==e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},l.lang.extend(he.asn1.x509.CRL,he.asn1.ASN1Object),he.asn1.x509.TBSCertList=function(e){he.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=he.asn1,n=t.DERSequence,i=t.x509,l=i.Time;this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new i.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new i.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new l(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new l(e)},this.addRevokedCert=function(e,t){var n={};null!=e&&null!=e&&(n.sn=e),null!=t&&null!=t&&(n.time=t);var l=new i.CRLEntry(n);this.aRevokedCert.push(l)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var e=new n({array:this.aRevokedCert});this.asn1Array.push(e)}var t=new n({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},l.lang.extend(he.asn1.x509.TBSCertList,he.asn1.ASN1Object),he.asn1.x509.CRLEntry=function(e){he.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=he.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},l.lang.extend(he.asn1.x509.CRLEntry,he.asn1.ASN1Object),he.asn1.x509.X500Name=function(e){he.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var t,n=he.asn1,i=n.x509,l=Ne;this.setByString=function(e){var t=e.split("/");t.shift();for(var n=[],l=0;l<t.length;l++)if(t[l].match(/^[^=]+=.+$/))n.push(t[l]);else{var r=n.length-1;n[r]=n[r]+"/"+t[l]}for(l=0;l<n.length;l++)this.asn1Array.push(new i.RDN({str:n[l]}))},this.setByLdapString=function(e){var t=i.X500Name.ldapToOneline(e);this.setByString(t)},this.setByObject=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=new he.asn1.x509.RDN({str:t+"="+e[t]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new n.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):"object"==typeof e&&this.setByObject(e),void 0!==e.certissuer&&((t=new Je).hex=l(e.certissuer),this.hTLV=t.getIssuerHex()),void 0!==e.certsubject&&((t=new Je).hex=l(e.certsubject),this.hTLV=t.getSubjectHex()))},l.lang.extend(he.asn1.x509.X500Name,he.asn1.ASN1Object),he.asn1.x509.X500Name.onelineToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map(function(e){return e.replace(/,/,"\\,")})).join(",")},he.asn1.x509.X500Name.ldapToOneline=function(e){for(var t=e.split(","),n=!1,i=[],l=0;t.length>0;l++){var r=t.shift();if(!0===n){var o=(i.pop()+","+r).replace(/\\,/g,",");i.push(o),n=!1}else i.push(r);"\\"===r.substr(-1,1)&&(n=!0)}return(i=i.map(function(e){return e.replace("/","\\/")})).reverse(),"/"+i.join("/")},he.asn1.x509.RDN=function(e){he.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new he.asn1.x509.AttributeTypeAndValue({str:e}))},this.addByMultiValuedString=function(e){for(var t=he.asn1.x509.RDN.parseString(e),n=0;n<t.length;n++)this.addByString(t[n])},this.getEncodedHex=function(){var e=new he.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.addByMultiValuedString(e.str)},l.lang.extend(he.asn1.x509.RDN,he.asn1.ASN1Object),he.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),n=!1,i=[],l=0;t.length>0;l++){var r=t.shift();if(!0===n){var o=(i.pop()+"+"+r).replace(/\\\+/g,"+");i.push(o),n=!1}else i.push(r);"\\"===r.substr(-1,1)&&(n=!0)}var s=!1,a=[];for(l=0;i.length>0;l++){if(r=i.shift(),!0===s){var u=a.pop();r.match(/"$/)?(o=(u+"+"+r).replace(/^([^=]+)="(.*)"$/,"$1=$2"),a.push(o),s=!1):a.push(u+"+"+r)}else a.push(r);r.match(/^[^=]+="/)&&(s=!0)}return a},he.asn1.x509.AttributeTypeAndValue=function(e){he.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var t=he.asn1;this.setByString=function(e){var t=e.match(/^([^=]+)=(.+)$/);if(!t)throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(t[1],t[2])},this.setByAttrTypeAndValueStr=function(e,t){this.typeObj=he.asn1.x509.OID.atype2obj(e);var n="utf8";"C"==e&&(n="prn"),this.valueObj=this.getValueObj(n,t)},this.getValueObj=function(e,n){if("utf8"==e)return new t.DERUTF8String({str:n});if("prn"==e)return new t.DERPrintableString({str:n});if("tel"==e)return new t.DERTeletexString({str:n});if("ia5"==e)return new t.DERIA5String({str:n});throw"unsupported directory string type: type="+e+" value="+n},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.setByString(e.str)},l.lang.extend(he.asn1.x509.AttributeTypeAndValue,he.asn1.ASN1Object),he.asn1.x509.SubjectPublicKeyInfo=function(e){he.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=he.asn1,n=t.DERInteger,i=t.DERBitString,l=t.DERObjectIdentifier,r=t.DERSequence,o=t.ASN1Util.newObject,s=t.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new r({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{if(e instanceof oe){var t=o({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex();this.asn1AlgId=new s({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+t})}}catch(u){}try{if(e instanceof he.crypto.ECDSA){var r=new l({name:e.curveName});this.asn1AlgId=new s({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new i({hex:"00"+e.pubKeyHex})}}catch(u){}try{if(e instanceof he.crypto.DSA){r=new o({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new s({name:"dsa",asn1params:r});var a=new n({bigint:e.y});this.asn1SubjPKey=new i({hex:"00"+a.getEncodedHex()})}}catch(u){}},void 0!==e&&this.setPubKey(e)},l.lang.extend(he.asn1.x509.SubjectPublicKeyInfo,he.asn1.ASN1Object),he.asn1.x509.Time=function(e){he.asn1.x509.Time.superclass.constructor.call(this);var t=he.asn1,n=t.DERUTCTime,i=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new i(this.timeParams):"utc"==this.type?new n:new i,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},l.lang.extend(he.asn1.x509.Time,he.asn1.ASN1Object),he.asn1.x509.AlgorithmIdentifier=function(e){he.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=he.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var e=[this.asn1Alg];null!==this.asn1Params&&e.push(this.asn1Params);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},l.lang.extend(he.asn1.x509.AlgorithmIdentifier,he.asn1.ASN1Object),he.asn1.x509.GeneralName=function(e){he.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=he.asn1,i=n.DEROctetString,l=n.DERIA5String,r=n.DERTaggedObject,o=n.ASN1Object,s=n.x509.X500Name,a=Ne;this.explicit=!1,this.setByParam=function(e){var n=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",n=new l({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",n=new l({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",n=new l({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,n=new s({str:e.dn})),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,n=new s({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var u=null;if((d=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=d.indexOf("-----BEGIN ")&&(u=a(d)),null==u)throw"certissuer param not cert";(h=new Je).hex=u;var c=h.getIssuerHex();(n=new o).hTLV=c}if(void 0!==e.certsubj){var d,h;if(this.type="dn",this.explicit=!0,u=null,(d=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=d.indexOf("-----BEGIN ")&&(u=a(d)),null==u)throw"certsubj param not cert";(h=new Je).hex=u,c=h.getSubjectHex(),(n=new o).hTLV=c}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var p,g=e.ip,f="malformed IP address";if(g.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(p=qe("["+g.split(".").join(",")+"]")).length)throw f}else if(g.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))p=Le(g);else{if(!g.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw f;p=g}n=new i({hex:p})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new r({explicit:this.explicit,tag:t[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},l.lang.extend(he.asn1.x509.GeneralName,he.asn1.ASN1Object),he.asn1.x509.GeneralNames=function(e){he.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=he.asn1;this.setByParamArray=function(e){for(var n=0;n<e.length;n++){var i=new t.x509.GeneralName(e[n]);this.asn1Array.push(i)}},this.getEncodedHex=function(){return new t.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},l.lang.extend(he.asn1.x509.GeneralNames,he.asn1.ASN1Object),he.asn1.x509.DistributionPointName=function(e){he.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=he.asn1,n=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e){if(!t.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},l.lang.extend(he.asn1.x509.DistributionPointName,he.asn1.ASN1Object),he.asn1.x509.DistributionPoint=function(e){he.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=he.asn1;this.getEncodedHex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var n=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(n)}return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.dpobj&&(this.asn1DP=e.dpobj)},l.lang.extend(he.asn1.x509.DistributionPoint,he.asn1.ASN1Object),he.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=new he.asn1.DERObjectIdentifier({oid:this.name2oidList[e]});return this.objCache[e]=t,t},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=new he.asn1.DERObjectIdentifier({oid:this.atype2oidList[e]});return this.objCache[e]=t,t}},he.asn1.x509.OID.oid2name=function(e){var t=he.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""},he.asn1.x509.OID.oid2atype=function(e){var t=he.asn1.x509.OID.atype2oidList;for(var n in t)if(t[n]==e)return n;return e},he.asn1.x509.OID.name2oid=function(e){var t=he.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},he.asn1.x509.X509Util={},he.asn1.x509.X509Util.newCertPEM=function(e){var t=he.asn1.x509,n=t.Certificate,i=new(0,t.TBSCertificate);if(void 0===e.serial)throw"serial number undefined.";if(i.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(i.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(i.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(i.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(i.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(i.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(i.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var l=0;l<e.ext.length;l++)for(key in e.ext[l])i.appendExtensionByName(key,e.ext[l][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var r=null;return e.cakey&&(r=new n({tbscertobj:i,prvkeyobj:!0===e.cakey.isPrivate?e.cakey:Me.getKey.apply(null,e.cakey)})).sign(),e.sighex&&(r=new n({tbscertobj:i})).setSignatureHex(e.sighex),r.getPEMString()},void 0!==he&&he||(he={}),void 0!==he.asn1&&he.asn1||(he.asn1={}),void 0!==he.asn1.cms&&he.asn1.cms||(he.asn1.cms={}),he.asn1.cms.Attribute=function(e){var t=he.asn1;t.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,n,i;e=new t.DERObjectIdentifier({oid:this.attrTypeOid}),n=new t.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(l){throw"fail valueSet.getEncodedHex in Attribute(1)/"+l}i=new t.DERSequence({array:[e,n]});try{this.hTLV=i.getEncodedHex()}catch(l){throw"failed seq.getEncodedHex in Attribute(2)/"+l}return this.hTLV}},l.lang.extend(he.asn1.cms.Attribute,he.asn1.ASN1Object),he.asn1.cms.ContentType=function(e){var t=he.asn1;t.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==e&&(n=new t.DERObjectIdentifier(e),this.valueList=[n])},l.lang.extend(he.asn1.cms.ContentType,he.asn1.cms.Attribute),he.asn1.cms.MessageDigest=function(e){var t,n=he,i=n.asn1,l=i.DEROctetString,r=i.cms;r.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==e&&(e.eciObj instanceof r.EncapsulatedContentInfo&&"string"==typeof e.hashAlg?((t=new l({hex:n.crypto.Util.hashHex(e.eciObj.eContentValueHex,e.hashAlg)})).getEncodedHex(),this.valueList=[t]):((t=new l(e)).getEncodedHex(),this.valueList=[t]))},l.lang.extend(he.asn1.cms.MessageDigest,he.asn1.cms.Attribute),he.asn1.cms.SigningTime=function(e){var t=he.asn1;if(t.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==e){var n=new t.x509.Time(e);try{n.getEncodedHex()}catch(s){throw"SigningTime.getEncodedHex() failed/"+s}this.valueList=[n]}},l.lang.extend(he.asn1.cms.SigningTime,he.asn1.cms.Attribute),he.asn1.cms.SigningCertificate=function(e){var t=he,n=t.asn1,i=n.DERSequence,l=n.cms;l.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(e){for(var r=[],o=0;o<e.length;o++){var s=Ne(e[o]),a=t.crypto.Util.hashHex(s,"sha1"),u=new n.DEROctetString({hex:a});u.getEncodedHex();var c=new l.IssuerAndSerialNumber({cert:e[o]});c.getEncodedHex();var d=new i({array:[u,c]});d.getEncodedHex(),r.push(d)}var h=new i({array:r});h.getEncodedHex(),this.valueList=[h]},void 0!==e&&"object"==typeof e.array&&this.setCerts(e.array)},l.lang.extend(he.asn1.cms.SigningCertificate,he.asn1.cms.Attribute),he.asn1.cms.SigningCertificateV2=function(e){var t=he.asn1,n=t.DERSequence,i=t.x509,l=t.cms,r=he.crypto;if(l.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(e,o){for(var s=[],a=0;a<e.length;a++){var u=Ne(e[a]),c=[];"sha256"!==o&&c.push(new i.AlgorithmIdentifier({name:o}));var d=r.Util.hashHex(u,o),h=new t.DEROctetString({hex:d});h.getEncodedHex(),c.push(h);var p=new l.IssuerAndSerialNumber({cert:e[a]});p.getEncodedHex(),c.push(p);var g=new n({array:c});g.getEncodedHex(),s.push(g)}var f=new n({array:s});f.getEncodedHex(),this.valueList=[f]},void 0!==e&&"object"==typeof e.array){var o="sha256";"string"==typeof e.hashAlg&&(o=e.hashAlg),this.setCerts(e.array,o)}},l.lang.extend(he.asn1.cms.SigningCertificateV2,he.asn1.cms.Attribute),he.asn1.cms.IssuerAndSerialNumber=function(e){var t=he.asn1,n=t.DERInteger,i=t.x509.X500Name,l=Je;t.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=Ne(e),r=new l;r.hex=t;var o=r.getIssuerHex();this.dIssuer=new i,this.dIssuer.hTLV=o;var s=r.getSerialNumberHex();this.dSerial=new n({hex:s})},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(this.dIssuer=e.issuer instanceof i?e.issuer:new i(e.issuer),this.dSerial=e.serial instanceof n?e.serial:new n(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},l.lang.extend(he.asn1.cms.IssuerAndSerialNumber,he.asn1.ASN1Object),he.asn1.cms.AttributeList=function(e){var t=he.asn1,n=t.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof n.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},l.lang.extend(he.asn1.cms.AttributeList,he.asn1.ASN1Object),he.asn1.cms.SignerInfo=function(e){var t=he.asn1,n=t.DERTaggedObject,i=t.cms,l=i.AttributeList,r=i.ContentType,o=i.EncapsulatedContentInfo,s=i.MessageDigest,a=i.SignedData,u=t.x509.AlgorithmIdentifier,c=he.crypto,d=Me;i.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new l,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new l,this.setSignerIdentifier=function(e){"string"==typeof e&&-1!=e.indexOf("CERTIFICATE")&&-1!=e.indexOf("BEGIN")&&-1!=e.indexOf("END")&&(this.dSignerIdentifier=new i.IssuerAndSerialNumber({cert:e}))},this.setForContentAndHash=function(e){void 0!==e&&(e.eciObj instanceof o&&(this.dSignedAttrs.add(new r({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new s({eciObj:e.eciObj,hashAlg:e.hashAlg}))),void 0!==e.sdObj&&e.sdObj instanceof a&&-1==e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new u({name:e.hashAlg})))},this.sign=function(e,n){this.dSigAlg=new u({name:n});var i=this.dSignedAttrs.getEncodedHex(),l=d.getKey(e),r=new c.Signature({alg:n});r.init(l),r.updateHex(i);var o=r.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof l&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),i=null;this.dUnsignedAttrs.length()>0&&(i=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=i&&r.push(i);var o=new t.DERSequence({array:r});return this.hTLV=o.getEncodedHex(),this.hTLV}},l.lang.extend(he.asn1.cms.SignerInfo,he.asn1.ASN1Object),he.asn1.cms.EncapsulatedContentInfo=function(e){var t=he.asn1,n=t.DERTaggedObject,i=t.DERSequence,l=t.DERObjectIdentifier,r=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new l({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){this.dEContentType=e.match(/^[0-2][.][0-9.]+$/)?new l({oid:e}):new l({name:e})},this.setContentValue=function(e){void 0!==e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=Ee(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=Ee(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new r({hex:this.eContentValueHex});this.dEContent=new n({obj:e,tag:"a0",explicit:!0});var t=[this.dEContentType];this.isDetached||t.push(this.dEContent);var l=new i({array:t});return this.hTLV=l.getEncodedHex(),this.hTLV}},l.lang.extend(he.asn1.cms.EncapsulatedContentInfo,he.asn1.ASN1Object),he.asn1.cms.ContentInfo=function(e){var t=he.asn1,n=t.DERTaggedObject,i=t.DERSequence,l=t.x509;he.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=l.OID.name2obj(e))},this.getEncodedHex=function(){var e=new n({obj:this.dContent,tag:"a0",explicit:!0}),t=new i({array:[this.dContentType,e]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},l.lang.extend(he.asn1.cms.ContentInfo,he.asn1.ASN1Object),he.asn1.cms.SignedData=function(e){var t=he.asn1,n=t.ASN1Object,i=t.DERInteger,l=t.DERSet,r=t.DERSequence,o=t.DERTaggedObject,s=t.cms,a=s.EncapsulatedContentInfo,u=s.SignerInfo,c=s.ContentInfo,d=t.x509.AlgorithmIdentifier;he.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new i({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new a,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new u],this.addCertificatesByPEM=function(e){var t=Ne(e),i=new n;i.hTLV=t,this.certificateList.push(i)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],t=0;t<this.digestAlgNameList.length;t++){var n=new d({name:this.digestAlgNameList[t]});e.push(n)}this.dDigestAlgs=new l({array:e})}var i=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var s=new l({array:this.certificateList});this.dCerts=new o({obj:s,tag:"a0",explicit:!1})}null!=this.dCerts&&i.push(this.dCerts);var a=new l({array:this.signerInfoList});i.push(a);var u=new r({array:i});return this.hTLV=u.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return ke(this.getContentInfoEncodedHex(),"CMS")}},l.lang.extend(he.asn1.cms.SignedData,he.asn1.ASN1Object),he.asn1.cms.CMSUtil=new function(){},he.asn1.cms.CMSUtil.newSignedData=function(e){var t=he.asn1,n=t.cms,i=n.SignerInfo,l=n.SigningTime,r=n.SigningCertificate,o=n.SigningCertificateV2,s=t.cades.SignaturePolicyIdentifier,a=new(0,n.SignedData);if(a.dEncapContentInfo.setContentValue(e.content),"object"==typeof e.certs)for(var u=0;u<e.certs.length;u++)a.addCertificatesByPEM(e.certs[u]);for(a.signerInfoList=[],u=0;u<e.signerInfos.length;u++){var c=e.signerInfos[u],d=new i;for(attrName in d.setSignerIdentifier(c.signerCert),d.setForContentAndHash({sdObj:a,eciObj:a.dEncapContentInfo,hashAlg:c.hashAlg}),c.sAttr){var h=c.sAttr[attrName];if("SigningTime"==attrName){var p=new l(h);d.dSignedAttrs.add(p)}"SigningCertificate"==attrName&&(p=new r(h),d.dSignedAttrs.add(p)),"SigningCertificateV2"==attrName&&(p=new o(h),d.dSignedAttrs.add(p)),"SignaturePolicyIdentifier"==attrName&&(p=new s(h),d.dSignedAttrs.add(p))}d.sign(c.signerPrvKey,c.sigAlg),a.signerInfoList.push(d)}return a},he.asn1.cms.CMSUtil.verifySignedData=function(e){var t=fe.getVbyList,n=fe.getTLVbyList,i=fe.getIdxbyList,l=fe.getChildIdx,r=fe.getTLV,o=fe.oidname,s=he.crypto.Util.hashHex;void 0===e.cms&&(0,he.lang.String.isHex)(e.cms);var a=e.cms,u=function(e,r){var s=r.idx;r.signerid_issuer1=n(e,s,[1,0],"30"),r.signerid_serial1=t(e,s,[1,1],"02"),r.hashalg=o(t(e,s,[2,0],"06"));var a=i(e,s,[3],"a0");r.idxSignedAttrs=a,c(e,r,a);var u=l(e,s).length;if(u<6)throw"malformed SignerInfo";r.sigalg=o(t(e,s,[u-2,0],"06")),r.sigval=t(e,s,[u-1],"04")},c=function(e,n,i){var r=l(e,i);n.signedAttrIdxList=r;for(var o=0;o<r.length;o++){var s,a=r[o],u=t(e,a,[0],"06");"2a864886f70d010905"===u?(s=Te(t(e,a,[1,0])),n.saSigningTime=s):"2a864886f70d010904"===u&&(s=t(e,a,[1,0],"04"),n.saMessageDigest=s)}},d=function(e,t,n,i){n.verifyDetail={};var o=n.verifyDetail,a=t.parse.econtent,u=n.hashalg,c=n.saMessageDigest;o.validMessageDigest=!1,s(a,u)===c&&(o.validMessageDigest=!0),function(e,t,n,i){var o,s=t.parse.certsIdx;if(void 0===t.certs){o=[],t.certkeys=[];for(var a=l(e,s),u=0;u<a.length;u++){var c=r(e,a[u]),d=new Je;d.readCertHex(c),o[u]=d,t.certkeys[u]=d.getPublicKey()}t.certs=o}else o=t.certs;for(t.cccc=o.length,t.cccci=a.length,u=0;u<o.length;u++){var h=d.getIssuerHex(),p=d.getSerialNumberHex();n.signerid_issuer1===h&&n.signerid_serial1===p&&(n.certkey_idx=u)}}(e,t,n),o.validSignatureValue=!1;var d=n.sigalg,h="31"+r(e,n.idxSignedAttrs).substr(2);n.signedattrshex=h;var p=t.certs[n.certkey_idx].getPublicKey(),g=new he.crypto.Signature({alg:d});g.init(p),g.updateHex(h);var f=g.verify(n.sigval);o.validSignatureValue_isValid=f,!0===f&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},h={isValid:!1,parse:{}};return function(e,n){if("2a864886f70d010702"!==t(e,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=t(e,0,[1,0,2,1,0]),function(e,t){for(var n,l=3;l<6;l++)if(void 0!==(n=i(e,0,[1,0,l]))){var r=e.substr(n,2);"a0"===r&&(t.certsIdx=n),"a1"===r&&(t.revinfosIdx=n),"31"===r&&(t.signerinfosIdx=n)}}(e,n),n.signerInfos=[],function(e,t){var n=t.signerinfosIdx;if(void 0!==n){var i=l(e,n);t.signerInfoIdxList=i;for(var r=0;r<i.length;r++){var o={idx:i[r]};u(e,o),t.signerInfos.push(o)}}}(e,n)}(a,h.parse),function(e,t){for(var n=t.parse.signerInfos,i=n.length,l=!0,r=0;r<i;r++){var o=n[r];d(e,t,o),o.isValid||(l=!1)}t.isValid=l}(a,h),h},void 0!==he&&he||(he={}),void 0!==he.asn1&&he.asn1||(he.asn1={}),void 0!==he.asn1.tsp&&he.asn1.tsp||(he.asn1.tsp={}),he.asn1.tsp.Accuracy=function(e){var t=he.asn1,n=t.DERInteger,i=t.DERSequence,l=t.DERTaggedObject;t.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e=null,t=null,r=null,o=[];if(null!=this.seconds&&(e=new n({int:this.seconds}),o.push(e)),null!=this.millis){var s=new n({int:this.millis});t=new l({obj:s,tag:"80",explicit:!1}),o.push(t)}if(null!=this.micros){var a=new n({int:this.micros});r=new l({obj:a,tag:"81",explicit:!1}),o.push(r)}var u=new i({array:o});return this.hTLV=u.getEncodedHex(),this.hTLV},void 0!==e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},l.lang.extend(he.asn1.tsp.Accuracy,he.asn1.ASN1Object),he.asn1.tsp.MessageImprint=function(e){var t=he.asn1,n=t.DERSequence,i=t.DEROctetString,l=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new l({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new i({hex:e.hashValue})))},l.lang.extend(he.asn1.tsp.MessageImprint,he.asn1.ASN1Object),he.asn1.tsp.TimeStampReq=function(e){var t=he.asn1,n=t.DERSequence,i=t.DERInteger,l=t.DERBoolean,r=t.DERObjectIdentifier,o=t.tsp,s=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){e instanceof s?this.dMessageImprint=e:"object"==typeof e&&(this.dMessageImprint=new s(e))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new l);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new r(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new i(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},l.lang.extend(he.asn1.tsp.TimeStampReq,he.asn1.ASN1Object),he.asn1.tsp.TSTInfo=function(e){var t=he.asn1,n=t.DERSequence,i=t.DERInteger,l=t.DERBoolean,r=t.DERGeneralizedTime,o=t.DERObjectIdentifier,s=t.tsp,a=s.MessageImprint,u=s.Accuracy,c=t.x509.X500Name;if(s.TSTInfo.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new a(e.messageImprint)),void 0!==e.serialNumber&&(this.dSerialNumber=new i(e.serialNumber)),void 0!==e.genTime&&(this.dGenTime=new r(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new u(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new l),void 0!==e.nonce&&(this.dNonce=new i(e.nonce)),void 0!==e.tsa&&(this.dTsa=new c(e.tsa))}},l.lang.extend(he.asn1.tsp.TSTInfo,he.asn1.ASN1Object),he.asn1.tsp.TimeStampResp=function(e){var t=he.asn1,n=t.DERSequence,i=t.ASN1Object,l=t.tsp,r=l.PKIStatusInfo;l.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new r(e.status)),void 0!==e.tst&&e.tst instanceof i&&(this.dTST=e.tst.getContentInfo()))},l.lang.extend(he.asn1.tsp.TimeStampResp,he.asn1.ASN1Object),he.asn1.tsp.PKIStatusInfo=function(e){var t=he.asn1,n=t.DERSequence,i=t.tsp,l=i.PKIStatus,r=i.PKIFreeText,o=i.PKIFailureInfo;i.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new l(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new r({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new o(e.failinfo)))},l.lang.extend(he.asn1.tsp.PKIStatusInfo,he.asn1.ASN1Object),he.asn1.tsp.PKIStatus=function(e){var t=he.asn1,n=t.DERInteger,i=t.tsp,l=i.PKIStatus;if(i.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==e)if(void 0!==e.name){var r=l.valueList;if(void 0===r[e.name])throw"name undefined: "+e.name;this.dStatus=new n({int:r[e.name]})}else this.dStatus=new n(e)},l.lang.extend(he.asn1.tsp.PKIStatus,he.asn1.ASN1Object),he.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},he.asn1.tsp.PKIFreeText=function(e){var t=he.asn1,n=t.DERSequence,i=t.DERUTF8String;t.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var e=[],t=0;t<this.textList.length;t++)e.push(new i({str:this.textList[t]}));var l=new n({array:e});return this.hTLV=l.getEncodedHex(),this.hTLV},void 0!==e&&"object"==typeof e.array&&(this.textList=e.array)},l.lang.extend(he.asn1.tsp.PKIFreeText,he.asn1.ASN1Object),he.asn1.tsp.PKIFailureInfo=function(e){var t=he.asn1,n=t.DERBitString,i=t.tsp.PKIFailureInfo;if(i.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),t=new n;return t.setByBinaryString(e),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e)if("string"==typeof e.name){var l=i.valueList;if(void 0===l[e.name])throw"name undefined: "+e.name;this.value=l[e.name]}else"number"==typeof e.int&&(this.value=e.int)},l.lang.extend(he.asn1.tsp.PKIFailureInfo,he.asn1.ASN1Object),he.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},he.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},he.asn1.tsp.SimpleTSAAdapter=function(e){var t=he.asn1.tsp,n=he.crypto.Util.hashHex;t.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,i){var l=n(e,i);this.params.tstInfo.messageImprint={hashAlg:i,hashValue:l},this.params.tstInfo.serialNumber={int:this.serial++};var r=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:r},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},l.lang.extend(he.asn1.tsp.SimpleTSAAdapter,he.asn1.tsp.AbstractTSAAdapter),he.asn1.tsp.FixedTSAAdapter=function(e){var t=he.asn1.tsp,n=he.crypto.Util.hashHex;t.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,i){var l=n(e,i);return this.params.tstInfo.messageImprint={hashAlg:i,hashValue:l},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},l.lang.extend(he.asn1.tsp.FixedTSAAdapter,he.asn1.tsp.AbstractTSAAdapter),he.asn1.tsp.TSPUtil=new function(){},he.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=he.asn1,n=t.cms,i=t.tsp.TSTInfo,l=new n.SignedData,r=new i(e.tstInfo).getEncodedHex();if(l.dEncapContentInfo.setContentValue({hex:r}),l.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var o=0;o<e.certs.length;o++)l.addCertificatesByPEM(e.certs[o]);var s=l.signerInfoList[0];s.setSignerIdentifier(e.signerCert),s.setForContentAndHash({sdObj:l,eciObj:l.dEncapContentInfo,hashAlg:e.hashAlg});var a=new n.SigningCertificate({array:[e.signerCert]});return s.dSignedAttrs.add(a),s.sign(e.signerPrvKey,e.sigAlg),l},he.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=fe,n=t.getV,i=t.getTLV,l={certreq:!1},r=(0,t.getChildIdx)(e,0);if(r.length<2)throw"TimeStampReq must have at least 2 items";var o=i(e,r[1]);l.mi=he.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var s=2;s<r.length;s++){var a=r[s],u=e.substr(a,2);if("06"==u){var c=n(e,a);l.policy=t.hextooidstr(c)}"02"==u&&(l.nonce=n(e,a)),"01"==u&&(l.certreq=!0)}return l},he.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=fe,n=t.getChildIdx,i=t.getV,l=t.getIdxbyList,r={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";n(e,0);var o=i(e,l(e,0,[0,0])),s=t.hextooidstr(o),a=he.asn1.x509.OID.oid2name(s);if(""==a)throw"hashAlg name undefined: "+s;var u=a,c=l(e,0,[1]);return r.hashAlg=u,r.hashValue=i(e,c),r},void 0!==he&&he||(he={}),void 0!==he.asn1&&he.asn1||(he.asn1={}),void 0!==he.asn1.cades&&he.asn1.cades||(he.asn1.cades={}),he.asn1.cades.SignaturePolicyIdentifier=function(e){var t=he.asn1,n=t.DERObjectIdentifier,i=t.DERSequence,l=t.cades,r=l.OtherHashAlgAndValue;if(l.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==e&&"string"==typeof e.oid&&"object"==typeof e.hash){var o=new i({array:[new n({oid:e.oid}),new r(e.hash)]});this.valueList=[o]}},l.lang.extend(he.asn1.cades.SignaturePolicyIdentifier,he.asn1.cms.Attribute),he.asn1.cades.OtherHashAlgAndValue=function(e){var t=he.asn1,n=t.DERSequence,i=t.DEROctetString,l=t.x509.AlgorithmIdentifier;t.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new n({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new l({name:e.alg}),this.dHash=new i({hex:e.hash}))},l.lang.extend(he.asn1.cades.OtherHashAlgAndValue,he.asn1.ASN1Object),he.asn1.cades.SignatureTimeStamp=function(e){var t=he.asn1,n=t.ASN1Object;if(t.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==e){if(void 0!==e.res)if("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/));else if(!(e.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var i=new n;this.tstHex=e.tst,i.hTLV=this.tstHex,i.getEncodedHex(),this.valueList=[i]}else if(!(e.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},l.lang.extend(he.asn1.cades.SignatureTimeStamp,he.asn1.cms.Attribute),he.asn1.cades.CompleteCertificateRefs=function(e){var t=he.asn1.cades;t.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(e){this.valueList=[];for(var n=0;n<e.length;n++){var i=new t.OtherCertID(e[n]);this.valueList.push(i)}},void 0!==e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},l.lang.extend(he.asn1.cades.CompleteCertificateRefs,he.asn1.cms.Attribute),he.asn1.cades.OtherCertID=function(e){var t=he.asn1,n=t.cms,i=t.cades;i.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new i.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),"object"==typeof e&&(!1===e.hasis&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},l.lang.extend(he.asn1.cades.OtherCertID,he.asn1.ASN1Object),he.asn1.cades.OtherHash=function(e){var t=he.asn1,n=t.cades,i=n.OtherHashAlgAndValue,l=he.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(-1==e.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var t=Ne(e),n=l(t,this.alg);this.dOtherHash=new i({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==e)if("string"==typeof e)if(-1!=e.indexOf("-----BEGIN "))this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new t.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new i(e))},l.lang.extend(he.asn1.cades.OtherHash,he.asn1.ASN1Object),he.asn1.cades.CAdESUtil=new function(){},he.asn1.cades.CAdESUtil.addSigTS=function(e,t,n){},he.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=fe.getChildIdx,n=fe.getTLV,i=fe.getIdxbyList,l=he.asn1,r=l.ASN1Object,o=l.cms.SignedData,s=l.cades.CAdESUtil,a={};if("06092a864886f70d010702"!=(0,fe.getTLVbyList)(e,0,[0]))throw"hex is not CMS SignedData";var u=t(e,i(e,0,[1,0]));if(u.length<4)throw"num of SignedData elem shall be 4 at least";var c=u.shift();a.version=n(e,c);var d=u.shift();a.algs=n(e,d);var h=u.shift();a.encapcontent=n(e,h),a.certs=null,a.revs=null,a.si=[];var p=u.shift();"a0"==e.substr(p,2)&&(a.certs=n(e,p),p=u.shift()),"a1"==e.substr(p,2)&&(a.revs=n(e,p),p=u.shift());var g=p;if("31"!=e.substr(g,2))throw"Can't find signerInfos";for(var f=t(e,g),m=0;m<f.length;m++){var v=s.parseSignerInfoForAddingUnsigned(e,f[m],m);a.si[m]=v}var y=null;for(a.obj=new o,(y=new r).hTLV=a.version,a.obj.dCMSVersion=y,(y=new r).hTLV=a.algs,a.obj.dDigestAlgs=y,(y=new r).hTLV=a.encapcontent,a.obj.dEncapContentInfo=y,(y=new r).hTLV=a.certs,a.obj.dCerts=y,a.obj.signerInfoList=[],m=0;m<a.si.length;m++)a.obj.signerInfoList.push(a.si[m].obj);return a},he.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var i=fe.getTLV,l=fe.getV,r=he.asn1,o=r.ASN1Object,s=r.cms,a=s.AttributeList,u=s.SignerInfo,c={},d=(0,fe.getChildIdx)(e,t);if(6!=d.length)throw"not supported items for SignerInfo (!=6)";var h=d.shift();c.version=i(e,h);var p=d.shift();c.si=i(e,p);var g=d.shift();c.digalg=i(e,g);var f=d.shift();c.sattrs=i(e,f);var m=d.shift();c.sigalg=i(e,m);var v=d.shift();c.sig=i(e,v),c.sigval=l(e,v);var y=null;return c.obj=new u,(y=new o).hTLV=c.version,c.obj.dCMSVersion=y,(y=new o).hTLV=c.si,c.obj.dSignerIdentifier=y,(y=new o).hTLV=c.digalg,c.obj.dDigestAlgorithm=y,(y=new o).hTLV=c.sattrs,c.obj.dSignedAttrs=y,(y=new o).hTLV=c.sigalg,c.obj.dSigAlg=y,(y=new o).hTLV=c.sig,c.obj.dSig=y,c.obj.dUnsignedAttrs=new a,c},void 0!==he.asn1.csr&&he.asn1.csr||(he.asn1.csr={}),he.asn1.csr.CertificationRequest=function(e){var t=he,n=t.asn1,i=n.DERBitString,l=n.DERSequence,r=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(e,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new r.AlgorithmIdentifier({name:e}),sig=new t.crypto.Signature({alg:e}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var o=new l({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return ke(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==e&&void 0!==e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},l.lang.extend(he.asn1.csr.CertificationRequest,he.asn1.ASN1Object),he.asn1.csr.CertificationRequestInfo=function(e){var t=he.asn1,n=t.DERInteger,i=t.DERSequence,l=t.DERSet,r=t.DERNull,o=t.DERTaggedObject,s=t.DERObjectIdentifier,a=t.x509,u=a.X500Name,c=a.Extension,d=Me;t.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new u(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=d.getKey(e);this.asn1SubjPKey=new a.SubjectPublicKeyInfo(t)},this.appendExtensionByName=function(e,t){c.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new i({array:this.extensionsArray}),t=new l({array:[e]}),n=new i({array:[new s({oid:"1.2.840.113549.1.9.14"}),t]}),a=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(a)}else a=new o({explicit:!1,tag:"a0",obj:new r}),this.asn1Array.push(a);var u=new i({array:this.asn1Array});return this.hTLV=u.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},l.lang.extend(he.asn1.csr.CertificationRequestInfo,he.asn1.ASN1Object),he.asn1.csr.CSRUtil=new function(){},he.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Me,n=he.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var i=new n.CertificationRequestInfo;if(i.setSubjectByParam(e.subject),i.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var l=0;l<e.ext.length;l++)for(key in e.ext[l])i.appendExtensionByName(key,e.ext[l][key]);var r=new n.CertificationRequest({csrinfo:i}),o=t.getKey(e.sbjprvkey);return r.sign(e.sigalg,o),r.getPEMString()},he.asn1.csr.CSRUtil.getInfo=function(e){var t=fe.getTLVbyList,n={subject:{},pubkey:{}};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var i=Ne(e,"CERTIFICATE REQUEST");return n.subject.hex=t(i,0,[0,1]),n.subject.name=Je.hex2dn(n.subject.hex),n.pubkey.hex=t(i,0,[0,2]),n.pubkey.obj=Me.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==he&&he||(he={}),void 0!==he.asn1&&he.asn1||(he.asn1={}),void 0!==he.asn1.ocsp&&he.asn1.ocsp||(he.asn1.ocsp={}),he.asn1.ocsp.DEFAULT_HASH="sha1",he.asn1.ocsp.CertID=function(e){var t=he.asn1,n=t.DEROctetString,i=t.DERInteger,l=t.DERSequence,r=t.x509.AlgorithmIdentifier,o=t.ocsp,s=o.DEFAULT_HASH,a=he.crypto.Util.hashHex,u=Je,c=fe;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(e,t,l,o){void 0===o&&(o=s),this.dHashAlg=new r({name:o}),this.dIssuerNameHash=new n({hex:e}),this.dIssuerKeyHash=new n({hex:t}),this.dSerialNumber=new i({hex:l})},this.setByCert=function(e,t,n){void 0===n&&(n=s);var i=new u;i.readCertPEM(t);var l=new u;l.readCertPEM(e);var r=l.getPublicKeyHex(),o=c.getTLVbyList(r,0,[1,0],"30"),d=i.getSerialNumberHex(),h=a(l.getSubjectHex(),n),p=a(o,n);this.setByValue(h,p,d,n),this.hoge=i.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var e=new l({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e){var d=e;if(void 0!==d.issuerCert&&void 0!==d.subjectCert){var h=s;void 0===d.alg&&(h=void 0),this.setByCert(d.issuerCert,d.subjectCert,h)}else{if(void 0===d.namehash||void 0===d.keyhash||void 0===d.serial)throw"invalid constructor arguments";h=s,void 0===d.alg&&(h=void 0),this.setByValue(d.namehash,d.keyhash,d.serial,h)}}},l.lang.extend(he.asn1.ocsp.CertID,he.asn1.ASN1Object),he.asn1.ocsp.Request=function(e){var t=he.asn1,n=t.DERSequence,i=t.ocsp;if(i.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var l=new i.CertID(e);this.dReqCert=l}},l.lang.extend(he.asn1.ocsp.Request,he.asn1.ASN1Object),he.asn1.ocsp.TBSRequest=function(e){var t=he.asn1,n=t.DERSequence,i=t.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],n=0;n<e.length;n++){var l=new i.Request(e[0]);t.push(l)}this.dRequestList=t},this.getEncodedHex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},l.lang.extend(he.asn1.ocsp.TBSRequest,he.asn1.ASN1Object),he.asn1.ocsp.OCSPRequest=function(e){var t=he.asn1,n=t.DERSequence,i=t.ocsp;if(i.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList){var l=new i.TBSRequest(e);this.dTbsRequest=l}},l.lang.extend(he.asn1.ocsp.OCSPRequest,he.asn1.ASN1Object),he.asn1.ocsp.OCSPUtil={},he.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,n){var i=he.asn1.ocsp;return void 0===n&&(n=i.DEFAULT_HASH),new i.OCSPRequest({reqList:[{alg:n,issuerCert:e,subjectCert:t}]}).getEncodedHex()},he.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=fe.getVbyList,n=fe.getIdxbyList,i=(t=fe.getVbyList,fe.getV),l={};try{var o=t(e,0,[0],"0a");l.responseStatus=parseInt(o,16)}catch(r){}if(0!==l.responseStatus)return l;try{var s=n(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(s,2)?l.certStatus="good":"a1"===e.substr(s,2)?(l.certStatus="revoked",l.revocationTime=Te(t(e,s,[0]))):"82"===e.substr(s,2)&&(l.certStatus="unknown")}catch(r){}try{var a=n(e,0,[1,0,1,0,0,2,0,2]);l.thisUpdate=Te(i(e,a))}catch(r){}try{var u=n(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(u,2)&&(l.nextUpdate=Te(t(e,u,[0])))}catch(r){}return l},void 0!==he&&he||(he={}),void 0!==he.lang&&he.lang||(he.lang={}),he.lang.String=function(){},"function"==typeof Buffer?(pe=function(e){return be(new Buffer(e,"utf8").toString("base64"))},ge=function(e){return new Buffer(Ce(e),"base64").toString("utf8")}):(pe=function(e){return _e(De(je(e)))},ge=function(e){return decodeURIComponent(He(we(e)))}),he.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},he.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},he.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},he.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=Ce(e),he.lang.String.isBase64(e))},he.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==he&&he||(he={}),void 0!==he.crypto&&he.crypto||(he.crypto={}),he.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var i=this.getDigestInfoHex(e,t),l=n/4;if(i.length+22>l)throw"key is too short for SigAlg: keylen="+n+","+t;for(var r="0001",o="00"+i,s="",a=l-r.length-o.length,u=0;u<a;u+=2)s+="ff";return r+s+o},this.hashString=function(e,t){return new he.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new he.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return new he.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(e)},this.sha256=function(e){return new he.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(e)},this.sha256Hex=function(e){return new he.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(e)},this.sha512=function(e){return new he.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(e)},this.sha512Hex=function(e){return new he.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(e)}},he.crypto.Util.md5=function(e){return new he.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},he.crypto.Util.ripemd160=function(e){return new he.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},he.crypto.Util.SECURERANDOMGEN=new ie,he.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return he.crypto.Util.SECURERANDOMGEN.nextBytes(t),ye(t)},he.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new w(he.crypto.Util.getRandomHexOfNbytes(e),16)},he.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return he.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],ye(n)},he.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new w(he.crypto.Util.getRandomHexOfNbits(e),16)},he.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=he.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},he.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var i=t.subtract(e);return he.crypto.Util.getRandomBigIntegerZeroToMax(i).add(e)},he.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=he.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=he.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=he.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(r){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+r}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(r){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+r}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=he.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},he.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},he.crypto.MessageDigest.getHashLength=function(e){var t=he.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},he.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},he.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=he.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{this.mac=m.algo.HMAC.create(he.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(d){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+d}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=xe(e)),void(this.pass=m.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=Ee(e.utf8)),void 0!==e.rstr&&(t=xe(e.rstr)),void 0!==e.b64&&(t=C(e.b64)),void 0!==e.b64u&&(t=we(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=m.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=he.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},he.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase())},this._zeroPaddingOfSignature=function(e,t){for(var n="",i=t/4-e.length,l=0;l<i;l++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new he.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n}this.init=function(e,t){var n=null;try{n=void 0===t?Me.getKey(e):Me.getKey(e,t)}catch(i){throw"init failed:"+i}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var e=new he.crypto.ECDSA({curve:this.eccurvename});this.hSign=e.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof oe&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof oe&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof he.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof he.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new he.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,e,this.ecpubhex);if(this.pubKey instanceof oe&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof oe&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==he.crypto.ECDSA&&this.pubKey instanceof he.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==he.crypto.DSA&&this.pubKey instanceof he.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,this.provName=void 0===e.prov?he.crypto.Util.DEFAULTPROVIDER[this.algName]:e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Me.getKey(e.prvkeypem),this.init(t)}catch(c){throw"fatal error to load pem private key: "+c}}},he.crypto.Cipher=function(e){},he.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof oe&&t.isPublic){var i=he.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===i)return t.encrypt(e);if("RSAOAEP"===i)return t.encryptOAEP(e,"sha1");var l=i.match(/^RSAOAEP(\d+)$/);if(null!==l)return t.encryptOAEP(e,"sha"+l[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},he.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof oe&&t.isPrivate){var i=he.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===i)return t.decrypt(e);if("RSAOAEP"===i)return t.decryptOAEP(e,"sha1");var l=i.match(/^RSAOAEP(\d+)$/);if(null!==l)return t.decryptOAEP(e,"sha"+l[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},he.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof oe){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},he.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==he&&he||(he={}),void 0!==he.crypto&&he.crypto||(he.crypto={}),he.crypto.ECDSA=function(e){var t=new ie;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new w(e.bitLength(),t).mod(e.subtract(w.ONE)).add(w.ONE)},this.setNamedCurve=function(e){this.ecparams=he.crypto.ECParameterDB.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.getBigRandom(this.ecparams.n),t=this.ecparams.G.multiply(e),n=t.getX().toBigInteger(),i=t.getY().toBigInteger(),l=this.ecparams.keylen/4,r=("0000000000"+e.toString(16)).slice(-l),o="04"+("0000000000"+n.toString(16)).slice(-l)+("0000000000"+i.toString(16)).slice(-l);return this.setPrivateKeyHex(r),this.setPublicKeyHex(o),{ecprvhex:r,ecpubhex:o}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new w(t,16),i=this.ecparams.n,l=new w(e,16);do{var r=this.getBigRandom(i),o=this.ecparams.G.multiply(r).getX().toBigInteger().mod(i)}while(o.compareTo(w.ZERO)<=0);var s=r.modInverse(i).multiply(l.add(n.multiply(o))).mod(i);return he.crypto.ECDSA.biRSSigToASN1Sig(o,s)},this.sign=function(e,t){var n=t,i=this.ecparams.n,l=w.fromByteArrayUnsigned(e);do{var r=this.getBigRandom(i),o=this.ecparams.G.multiply(r).getX().toBigInteger().mod(i)}while(o.compareTo(w.ZERO)<=0);var s=r.modInverse(i).multiply(l.add(n.multiply(o))).mod(i);return this.serializeSig(o,s)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){var i,l,r,o=he.crypto.ECDSA.parseSigHex(t);i=o.r,l=o.s,r=ue.decodeFromHex(this.ecparams.curve,n);var s=new w(e,16);return this.verifyRaw(s,i,l,r)},this.verify=function(e,t,n){var i,l,r;if(Bitcoin.Util.isArray(t)){var o=this.parseSig(t);i=o.r,l=o.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";i=t.r,l=t.s}if(n instanceof ue)r=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";r=ue.decodeFrom(this.ecparams.curve,n)}var s=w.fromByteArrayUnsigned(e);return this.verifyRaw(s,i,l,r)},this.verifyRaw=function(e,t,n,i){var l=this.ecparams.n,r=this.ecparams.G;if(t.compareTo(w.ONE)<0||t.compareTo(l)>=0)return!1;if(n.compareTo(w.ONE)<0||n.compareTo(l)>=0)return!1;var o=n.modInverse(l),s=e.multiply(o).mod(l),a=t.multiply(o).mod(l);return r.multiply(s).add(i.multiply(a)).getX().toBigInteger().mod(l).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),i=t.toByteArraySigned(),l=[];return l.push(2),l.push(n.length),(l=l.concat(n)).push(2),l.push(i.length),(l=l.concat(i)).unshift(l.length),l.unshift(48),l},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:w.fromByteArrayUnsigned(n),s:w.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:w.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:w.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){var t,n,i,l=he.crypto.ECDSA.getName,r=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=r(e,0,[2,0],"06"),n=r(e,0,[1],"04");try{i=r(e,0,[3,0],"03").substr(2)}catch(a){}}catch(a){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=l(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){var t,n,i,l=he.crypto.ECDSA.getName,r=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{r(e,0,[1,0],"06"),t=r(e,0,[1,1],"06"),n=r(e,0,[2,0,1],"04");try{i=r(e,0,[2,0,2,0],"03").substr(2)}catch(o){}}catch(o){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=l(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){var t,n,i=he.crypto.ECDSA.getName,l=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{l(e,0,[0,0],"06"),t=l(e,0,[0,1],"06"),n=l(e,0,[1],"03").substr(2)}catch(a){throw"malformed PKCS#8 ECC public key"}if(this.curveName=i(t),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,t){5!==t&&(t=6);var n,i,l=he.crypto.ECDSA.getName,r=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{n=r(e,0,[0,t,0,1],"06"),i=r(e,0,[0,t,1],"03").substr(2)}catch(a){throw"malformed X.509 certificate ECC public key"}if(this.curveName=l(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},he.crypto.ECDSA.parseSigHex=function(e){var t=he.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new w(t.r,16),s:new w(t.s,16)}},he.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=fe.getChildIdx,n=fe.getV;if("30"!=e.substr(0,2))throw"signature is not a ASN.1 sequence";var i=t(e,0);if(2!=i.length)throw"number of signature ASN.1 sequence elements seem wrong";var l=i[0],r=i[1];if("02"!=e.substr(l,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=e.substr(r,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(e,l),s:n(e,r)}},he.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=he.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,i=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),n.length%32==30&&(n="00"+n),i.length%32==30&&(i="00"+i),n.length%32!=0)throw"unknown ECDSA sig r length error";if(i.length%32!=0)throw"unknown ECDSA sig s length error";return n+i},he.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return he.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},he.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new w(e,16),i=new w(t,16);return he.crypto.ECDSA.biRSSigToASN1Sig(n,i)},he.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=he.asn1,i=new n.DERInteger({bigint:e}),l=new n.DERInteger({bigint:t});return new n.DERSequence({array:[i,l]}).getEncodedHex()},he.crypto.ECDSA.getName=function(e){return"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==he&&he||(he={}),void 0!==he.crypto&&he.crypto||(he.crypto={}),he.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new w(e,16)}this.getByName=function(n){var i=n;if(void 0!==t[i]&&(i=t[n]),void 0!==e[i])return e[i];throw"unregistered EC curve name: "+i},this.regist=function(i,l,r,o,s,a,u,c,d,h,p,g){e[i]={};var f=n(r),m=n(o),v=n(s),y=n(a),S=n(u),b=new ce(f,m,v),C=b.decodePointHex("04"+c+d);e[i].name=i,e[i].keylen=l,e[i].curve=b,e[i].G=C,e[i].n=y,e[i].h=S,e[i].oid=p,e[i].info=g;for(var _=0;_<h.length;_++)t[h[_]]=i}},he.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),he.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),he.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),he.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),he.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),he.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),he.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),he.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),he.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),he.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==he&&he||(he={}),void 0!==he.crypto&&he.crypto||(he.crypto={}),he.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,n,i,l){this.isPrivate=!0,this.p=e,this.q=t,this.g=n,this.y=i,this.x=l},this.setPrivateHex=function(e,t,n,i,l){var r,o,s,a,u;r=new w(e,16),o=new w(t,16),s=new w(n,16),a="string"==typeof i&&i.length>1?new w(i,16):null,u=new w(l,16),this.setPrivate(r,o,s,a,u)},this.setPublic=function(e,t,n,i){this.isPublic=!0,this.p=e,this.q=t,this.g=n,this.y=i,this.x=null},this.setPublicHex=function(e,t,n,i){var l,r,o,s;l=new w(e,16),r=new w(t,16),o=new w(n,16),s=new w(i,16),this.setPublic(l,r,o,s)},this.signWithMessageHash=function(e){var t=this.p,n=this.q,i=this.g,l=this.x,r=he.crypto.Util.getRandomBigIntegerMinToMax(w.ONE.add(w.ONE),n.subtract(w.ONE)),o=new w(e.substr(0,n.bitLength()/4),16),s=i.modPow(r,t).mod(n),a=r.modInverse(n).multiply(o.add(l.multiply(s))).mod(n);return he.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:s}},{int:{bigint:a}}]})},this.verifyWithMessageHash=function(e,t){var n=this.p,i=this.q,l=this.g,r=this.y,o=this.parseASN1Signature(t),s=o[0],a=o[1],u=new w(e.substr(0,i.bitLength()/4),16);if(w.ZERO.compareTo(s)>0||s.compareTo(i)>0)throw"invalid DSA signature";if(w.ZERO.compareTo(a)>=0||a.compareTo(i)>0)throw"invalid DSA signature";var c=a.modInverse(i),d=u.multiply(c).mod(i),h=s.multiply(c).mod(i);return 0==l.modPow(d,n).multiply(r.modPow(h,n)).mod(n).mod(i).compareTo(s)},this.parseASN1Signature=function(e){try{return[new w(fe.getVbyList(e,0,[0],"02"),16),new w(fe.getVbyList(e,0,[1],"02"),16)]}catch(s){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(e){var t,n,i,l,o,s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[1],"02"),n=s(e,0,[2],"02"),i=s(e,0,[3],"02"),l=s(e,0,[4],"02"),o=s(e,0,[5],"02")}catch(r){throw console.log("EXCEPTION:"+r),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(t,n,i,l,o)},this.readPKCS8PrvKeyHex=function(e){var t,n,i,l,r=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=r(e,0,[1,1,0],"02"),n=r(e,0,[1,1,1],"02"),i=r(e,0,[1,1,2],"02"),l=r(e,0,[2,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(t,n,i,null,l)},this.readPKCS8PubKeyHex=function(e){var t,n,i,l,r=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=r(e,0,[0,1,0],"02"),n=r(e,0,[0,1,1],"02"),i=r(e,0,[0,1,2],"02"),l=r(e,0,[1,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 DSA public key"}this.setPublicHex(t,n,i,l)},this.readCertPubKeyHex=function(e,t){var n,i,l,o;5!==t&&(t=6);var s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{n=s(e,0,[0,t,0,1,0],"02"),i=s(e,0,[0,t,0,1,1],"02"),l=s(e,0,[0,t,0,1,2],"02"),o=s(e,0,[0,t,1,0],"02")}catch(r){throw console.log("EXCEPTION:"+r),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,i,l,o)}};var Me=function(){var e=function(e,n,i){return t(m.AES,e,n,i)},t=function(e,t,n,i){var l=m.enc.Hex.parse(t),r=m.enc.Hex.parse(n),o=m.enc.Hex.parse(i),s={};s.key=r,s.iv=o,s.ciphertext=l;var a=e.decrypt(s,r,{iv:o});return m.enc.Hex.stringify(a)},n=function(e,t,n){return i(m.AES,e,t,n)},i=function(e,t,n,i){var l=m.enc.Hex.parse(t),r=m.enc.Hex.parse(n),o=m.enc.Hex.parse(i),s=e.encrypt(l,r,{iv:o}),a=m.enc.Hex.parse(s.toString());return m.enc.Base64.stringify(a)},l={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,i){return t(m.TripleDES,e,n,i)},eproc:function(e,t,n){return i(m.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,i){return t(m.DES,e,n,i)},eproc:function(e,t,n){return i(m.DES,e,t,n)},keylen:8,ivlen:8}},r=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var i=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));i&&(t.type=i[1]);var l=-1,r=0;-1!=e.indexOf("\r\n\r\n")&&(l=e.indexOf("\r\n\r\n"),r=2),-1!=e.indexOf("\n\n")&&(l=e.indexOf("\n\n"),r=1);var o=e.indexOf("-----END");if(-1!=l&&-1!=o){var s=e.substring(l+2*r,o-r);s=s.replace(/\s+/g,""),t.data=s}return t},o=function(e,t,n){for(var i=n.substring(0,16),r=m.enc.Hex.parse(i),o=m.enc.Utf8.parse(t),s=l[e].keylen+l[e].ivlen,a="",u=null;;){var c=m.algo.MD5.create();if(null!=u&&c.update(u),c.update(o),c.update(r),u=c.finalize(),(a+=m.enc.Hex.stringify(u)).length>=2*s)break}var d={};return d.keyhex=a.substr(0,2*l[e].keylen),d.ivhex=a.substr(2*l[e].keylen,2*l[e].ivlen),d},s=function(e,t,n,i){var r=m.enc.Base64.parse(e),o=m.enc.Hex.stringify(r);return(0,l[t].proc)(o,n,i)};return{version:"1.0.0",parsePKCS5PEM:function(e){return r(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return o(e,t,n)},decryptKeyB64:function(e,t,n,i){return s(e,t,n,i)},getDecryptedKeyHex:function(e,t){var n=r(e),i=n.cipher,l=n.ivsalt,a=n.data,u=o(i,t,l);return s(a,i,u.keyhex,l)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,i,r){var s="";if(void 0!==i&&null!=i||(i="AES-256-CBC"),void 0===l[i])throw"KEYUTIL unsupported algorithm: "+i;void 0!==r&&null!=r||(r=function(e){var t=m.lib.WordArray.random(l[i].ivlen);return m.enc.Hex.stringify(t)}().toUpperCase());var a=function(e,t,n,i){return(0,l[t].eproc)(e,n,r)}(t,i,o(i,n,r).keyhex);return s="-----BEGIN "+e+" PRIVATE KEY-----\r\n",s+="Proc-Type: 4,ENCRYPTED\r\n",s+="DEK-Info: "+i+","+r+"\r\n",s+="\r\n",(s+=a.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=fe.getChildIdx,n=fe.getV,i={},l=t(e,0);if(2!=l.length)throw"malformed format: SEQUENCE(0).items != 2: "+l.length;i.ciphertext=n(e,l[1]);var r=t(e,l[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=n(e,r[0]))throw"this only supports pkcs5PBES2";var o=t(e,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var s=t(e,o[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+s.length;if("2a864886f70d0307"!=n(e,s[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(e,s[1]);var a=t(e,o[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+a.length;if("2a864886f70d01050c"!=n(e,a[0]))throw"this only supports pkcs5PBKDF2";var u=t(e,a[1]);if(u.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+u.length;i.pbkdf2Salt=n(e,u[0]);var c=n(e,u[1]);try{i.pbkdf2Iter=parseInt(c,16)}catch(d){throw"malformed format pbkdf2Iter: "+c}return i},getPBKDF2KeyHexFromParam:function(e,t){var n=m.enc.Hex.parse(e.pbkdf2Salt),i=m.PBKDF2(t,n,{keySize:6,iterations:e.pbkdf2Iter});return m.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=Ne(e,"ENCRYPTED PRIVATE KEY"),i=this.parseHexOfEncryptedPKCS8(n),l=Me.getPBKDF2KeyHexFromParam(i,t),r={};r.ciphertext=m.enc.Hex.parse(i.ciphertext);var o=m.enc.Hex.parse(l),s=m.enc.Hex.parse(i.encryptionSchemeIV),a=m.TripleDES.decrypt(r,o,{iv:s});return m.enc.Hex.stringify(a)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=fe,n=t.getChildIdx,i=t.getV,l={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var r=n(e,0);if(3!=r.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(r[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(e,r[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(l.algoid=i(e,o[0]),"06"==e.substr(o[1],2)&&(l.algparam=i(e,o[1])),"04"!=e.substr(r[2],2))throw"malformed PKCS8 private key(code:006)";return l.keyidx=t.getVidx(e,r[2]),l},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Ne(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new oe;else if("2a8648ce380401"==n.algoid)t=new he.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";t=new he.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=fe.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new oe;else if("2a8648ce380401"===n)t=new he.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";t=new he.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=fe.getChildIdx,n=fe.getV,i={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var l=t(e,0);if(2!=l.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(l[0],2))throw"malformed RSA key(code:003)";if(i.n=n(e,l[0]),"02"!=e.substr(l[1],2))throw"malformed RSA key(code:004)";return i.e=n(e,l[1]),i},parsePublicPKCS8Hex:function(e){var t=fe,n=t.getChildIdx,i=t.getV,l={algparam:null},r=n(e,0);if(2!=r.length)throw"outer DERSequence shall have 2 elements: "+r.length;var o=r[0];if("30"!=e.substr(o,2))throw"malformed PKCS8 public key(code:001)";var s=n(e,o);if(2!=s.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 public key(code:003)";if(l.algoid=i(e,s[0]),"06"==e.substr(s[1],2)?l.algparam=i(e,s[1]):"30"==e.substr(s[1],2)&&(l.algparam={},l.algparam.p=t.getVbyList(e,s[1],[0],"02"),l.algparam.q=t.getVbyList(e,s[1],[1],"02"),l.algparam.g=t.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(r[1],2))throw"malformed PKCS8 public key(code:004)";return l.key=i(e,r[1]).substr(2),l}}}();Me.getKey=function(e,t,n){var i,l=(S=fe).getChildIdx,r=S.getVbyList,o=he.crypto,s=o.ECDSA,a=o.DSA,u=oe,c=Ne,d=Me;if(void 0!==u&&e instanceof u)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new s({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new s({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(k=new u).setPublic(e.n,e.e),k;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(k=new u).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),k;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(k=new u).setPrivate(e.n,e.e,e.d),k;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(k=new a).setPublic(e.p,e.q,e.g,e.y),k;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(k=new a).setPrivate(e.p,e.q,e.g,e.y,e.x),k;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(k=new u).setPublic(we(e.n),we(e.e)),k;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(k=new u).setPrivateEx(we(e.n),we(e.e),we(e.d),we(e.p),we(e.q),we(e.dp),we(e.dq),we(e.qi)),k;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(k=new u).setPrivate(we(e.n),we(e.e),we(e.d)),k;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var h=(F=new s({curve:e.crv})).ecparams.keylen/4,p=("0000000000"+we(e.x)).slice(-h),g=("0000000000"+we(e.y)).slice(-h);return F.setPublicKeyHex(f="04"+p+g),F}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){h=(F=new s({curve:e.crv})).ecparams.keylen/4;var f="04"+(p=("0000000000"+we(e.x)).slice(-h))+(g=("0000000000"+we(e.y)).slice(-h)),m=("0000000000"+we(e.d)).slice(-h);return F.setPublicKeyHex(f),F.setPrivateKeyHex(m),F}if("pkcs5prv"===n){var v,y=e,S=fe;if(9===(v=l(y,0)).length)(k=new u).readPKCS5PrvKeyHex(y);else if(6===v.length)(k=new a).readPKCS5PrvKeyHex(y);else{if(!(v.length>2&&"04"===y.substr(v[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(k=new s).readPKCS5PrvKeyHex(y)}return k}if("pkcs8prv"===n)return d.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return d._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return Je.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Je.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var b=Ne(e,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(b)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var C=c(e,"RSA PRIVATE KEY");return d.getKey(C,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var _=r(i=c(e,"DSA PRIVATE KEY"),0,[1],"02"),E=r(i,0,[2],"02"),T=r(i,0,[3],"02"),A=r(i,0,[4],"02"),x=r(i,0,[5],"02");return(k=new a).setPrivate(new w(_,16),new w(E,16),new w(T,16),new w(A,16),new w(x,16)),k}if(-1!=e.indexOf("-END PRIVATE KEY-"))return d.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var I=d.getDecryptedKeyHex(e,t),R=new oe;return R.readPKCS5PrvKeyHex(I),R}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var F,k=r(i=d.getDecryptedKeyHex(e,t),0,[1],"04"),N=r(i,0,[2,0],"06"),P=r(i,0,[3,0],"03").substr(2);if(void 0===he.crypto.OID.oidhex2name[N])throw"undefined OID(hex) in KJUR.crypto.OID: "+N;return(F=new s({curve:he.crypto.OID.oidhex2name[N]})).setPublicKeyHex(P),F.setPrivateKeyHex(k),F.isPublic=!1,F}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return _=r(i=d.getDecryptedKeyHex(e,t),0,[1],"02"),E=r(i,0,[2],"02"),T=r(i,0,[3],"02"),A=r(i,0,[4],"02"),x=r(i,0,[5],"02"),(k=new a).setPrivate(new w(_,16),new w(E,16),new w(T,16),new w(A,16),new w(x,16)),k;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return d.getKeyFromEncryptedPKCS8PEM(e,t);throw"not supported argument"},Me.generateKeypair=function(e,t){if("RSA"==e){var n=t;(o=new oe).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var i=new oe,l=o.n.toString(16),r=o.e.toString(16);return i.setPublic(l,r),i.isPrivate=!1,i.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=i,s}if("EC"==e){var o,s,a=t,u=new he.crypto.ECDSA({curve:a}).generateKeyPairHex();return(o=new he.crypto.ECDSA({curve:a})).setPublicKeyHex(u.ecpubhex),o.setPrivateKeyHex(u.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(i=new he.crypto.ECDSA({curve:a})).setPublicKeyHex(u.ecpubhex),i.isPrivate=!1,i.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=i,s}throw"unknown algorithm: "+e},Me.getPEM=function(e,t,n,i,l,r){var o=he.asn1,s=o.DERObjectIdentifier,a=o.DERInteger,u=o.ASN1Util.newObject,c=he.crypto,d=c.DSA,h=c.ECDSA,p=oe;function g(e){return u({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function f(e){return u({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function v(e){return u({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==p&&e instanceof p||void 0!==d&&e instanceof d||void 0!==h&&e instanceof h)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return ke(C=new(0,o.x509.SubjectPublicKeyInfo)(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===n||null==n)&&1==e.isPrivate)return ke(C=g(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===n||null==n)&&1==e.isPrivate){var y=new s({name:e.curveName}).getEncodedHex(),S=f(e).getEncodedHex(),b="";return(b+=ke(y,"EC PARAMETERS"))+ke(S,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===n||null==n)&&1==e.isPrivate)return ke(C=v(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==n&&null!=n&&1==e.isPrivate){var C=g(e).getEncodedHex();return void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",C,n,i,r)}if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==n&&null!=n&&1==e.isPrivate)return C=f(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",C,n,i,r);if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==n&&null!=n&&1==e.isPrivate)return C=v(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",C,n,i,r);var _=function(e,t){var n=w(e,t);return new u({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},w=function(e,t){var n=m.lib.WordArray.random(8),i=m.lib.WordArray.random(8),l=m.PBKDF2(t,n,{keySize:6,iterations:100}),r=m.enc.Hex.parse(e),o=m.TripleDES.encrypt(r,l,{iv:i})+"",s={};return s.ciphertext=o,s.pbkdf2Salt=m.enc.Hex.stringify(n),s.pbkdf2Iter=100,s.encryptionSchemeAlg="DES-EDE3-CBC",s.encryptionSchemeIV=m.enc.Hex.stringify(i),s};if("PKCS8PRV"==t&&null!=p&&e instanceof p&&1==e.isPrivate){var E=g(e).getEncodedHex();return C=u({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:E}}]}).getEncodedHex(),void 0===n||null==n?ke(C,"PRIVATE KEY"):ke(S=_(C,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return E=new u({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),C=u({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:E}}]}).getEncodedHex(),void 0===n||null==n?ke(C,"PRIVATE KEY"):ke(S=_(C,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate)return E=new a({bigint:e.x}).getEncodedHex(),C=u({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:E}}]}).getEncodedHex(),void 0===n||null==n?ke(C,"PRIVATE KEY"):ke(S=_(C,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Me.getKeyFromCSRPEM=function(e){var t=Ne(e,"CERTIFICATE REQUEST");return Me.getKeyFromCSRHex(t)},Me.getKeyFromCSRHex=function(e){var t=Me.parseCSRHex(e);return Me.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Me.parseCSRHex=function(e){var t=fe.getChildIdx,n=fe.getTLV,i={},l=e;if("30"!=l.substr(0,2))throw"malformed CSR(code:001)";var r=t(l,0);if(r.length<1)throw"malformed CSR(code:002)";if("30"!=l.substr(r[0],2))throw"malformed CSR(code:003)";var o=t(l,r[0]);if(o.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=n(l,o[2]),i},Me.getJWKFromKey=function(e){var t={};if(e instanceof oe&&e.isPrivate)return t.kty="RSA",t.n=_e(e.n.toString(16)),t.e=_e(e.e.toString(16)),t.d=_e(e.d.toString(16)),t.p=_e(e.p.toString(16)),t.q=_e(e.q.toString(16)),t.dp=_e(e.dmp1.toString(16)),t.dq=_e(e.dmq1.toString(16)),t.qi=_e(e.coeff.toString(16)),t;if(e instanceof oe&&e.isPublic)return t.kty="RSA",t.n=_e(e.n.toString(16)),t.e=_e(e.e.toString(16)),t;if(e instanceof he.crypto.ECDSA&&e.isPrivate){if("P-256"!==(i=e.getShortNISTPCurveName())&&"P-384"!==i)throw"unsupported curve name for JWT: "+i;var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=i,t.x=_e(n.x),t.y=_e(n.y),t.d=_e(e.prvKeyHex),t}if(e instanceof he.crypto.ECDSA&&e.isPublic){var i;if("P-256"!==(i=e.getShortNISTPCurveName())&&"P-384"!==i)throw"unsupported curve name for JWT: "+i;return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=i,t.x=_e(n.x),t.y=_e(n.y),t}throw"not supported key object"},oe.getPosArrayOfChildrenFromHex=function(e){return fe.getChildIdx(e,0)},oe.getHexValueArrayOfChildrenFromHex=function(e){var t,n=fe.getV,i=n(e,(t=oe.getPosArrayOfChildrenFromHex(e))[0]),l=n(e,t[1]),r=n(e,t[2]),o=n(e,t[3]),s=n(e,t[4]),a=n(e,t[5]),u=n(e,t[6]),c=n(e,t[7]),d=n(e,t[8]);return(t=new Array).push(i,l,r,o,s,a,u,c,d),t},oe.prototype.readPrivateKeyFromPEMString=function(e){var t=Ne(e),n=oe.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},oe.prototype.readPKCS5PrvKeyHex=function(e){var t=oe.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},oe.prototype.readPKCS8PrvKeyHex=function(e){var t,n,i,l,r,o,s,a,u=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=u(e,0,[2,0,1],"02"),n=u(e,0,[2,0,2],"02"),i=u(e,0,[2,0,3],"02"),l=u(e,0,[2,0,4],"02"),r=u(e,0,[2,0,5],"02"),o=u(e,0,[2,0,6],"02"),s=u(e,0,[2,0,7],"02"),a=u(e,0,[2,0,8],"02")}catch(g){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(t,n,i,l,r,o,s,a)},oe.prototype.readPKCS5PubKeyHex=function(e){var t=fe,n=t.getV;if(!1===t.isASN1HEX(e))throw"keyHex is not ASN.1 hex string";var i=t.getChildIdx(e,0);if(2!==i.length||"02"!==e.substr(i[0],2)||"02"!==e.substr(i[1],2))throw"wrong hex for PKCS#5 public key";var l=n(e,i[0]),r=n(e,i[1]);this.setPublic(l,r)},oe.prototype.readPKCS8PubKeyHex=function(e){var t=fe;if(!1===t.isASN1HEX(e))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==t.getTLVbyList(e,0,[0,0]))throw"not PKCS8 RSA public key";var n=t.getTLVbyList(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},oe.prototype.readCertPubKeyHex=function(e,t){var n,i;(n=new Je).readCertHex(e),i=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)};var Ke=new RegExp("");function Ge(e,t){for(var n="",i=t/4-e.length,l=0;l<i;l++)n+="0";return n+e}function We(e,t,n){for(var i="",l=0;i.length<t;)i+=Ae(n(xe(e+String.fromCharCode.apply(String,[(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))),l+=1;return i}function ze(e){for(var t in he.crypto.Util.DIGESTINFOHEAD){var n=he.crypto.Util.DIGESTINFOHEAD[t],i=n.length;if(e.substring(0,i)==n)return[t,e.substring(i)]}return[]}function Je(){var e=fe,t=e.getChildIdx,n=e.getV,i=e.getTLV,l=e.getVbyList,r=e.getTLVbyList,o=e.getIdxbyList,s=e.getVidx,a=e.oidname,u=Je,d=Ne;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==r(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return l(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return a(l(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return r(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return u.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return r(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return u.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=l(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=l(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return e.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return o(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Me.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return a(l(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return l(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),i=r(this.hex,0,[0],"30"),l=new he.crypto.Signature({alg:t});return l.init(e),l.updateHex(i),l.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),i=t(this.hex,n);this.aExtInfo=new Array;for(var r=0;r<i.length;r++){var a={critical:!1},u=0;3===t(this.hex,i[r]).length&&(a.critical=!0,u=1),a.oid=e.hextooidstr(l(this.hex,i[r],[0],"06"));var c=o(this.hex,i[r],[1+u]);a.vidx=s(this.hex,c),this.aExtInfo.push(a)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=he.asn1.x509.OID.name2oid(e)),""!==n)for(var i=0;i<t.length;i++)if(t[i].oid===n)return t[i]},this.getExtBasicConstraints=function(){var e=this.getExtInfo("basicConstraints");if(void 0===e)return e;var t=n(this.hex,e.vidx);if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"===t.substr(0,8)){var i=n(t,6);return{cA:!0,pathLen:parseInt(i,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";var t=n(this.hex,e.vidx);if(t.length%2!=0||t.length<=2)throw"malformed key usage value";var i=parseInt(t.substr(0,2)),l=parseInt(t.substr(2),16).toString(2);return l.substr(0,l.length-i)},this.getExtKeyUsageString=function(){for(var e=this.getExtKeyUsageBin(),t=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&t.push(Je.KEYUSAGE_NAME[n]);return t.join(",")},this.getExtSubjectKeyIdentifier=function(){var e=this.getExtInfo("subjectKeyIdentifier");return void 0===e?e:n(this.hex,e.vidx)},this.getExtAuthorityKeyIdentifier=function(){var e=this.getExtInfo("authorityKeyIdentifier");if(void 0===e)return e;for(var l={},r=i(this.hex,e.vidx),o=t(r,0),s=0;s<o.length;s++)"80"===r.substr(o[s],2)&&(l.kid=n(r,o[s]));return l},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var l=new Array,r=i(this.hex,e.vidx);if(""===r)return l;for(var o=t(r,0),s=0;s<o.length;s++)l.push(a(n(r,o[s])));return l},this.getExtSubjectAltName=function(){for(var e=this.getExtSubjectAltName2(),t=new Array,n=0;n<e.length;n++)"DNS"===e[n][0]&&t.push(e[n][1]);return t},this.getExtSubjectAltName2=function(){var e,l,r,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var s=new Array,a=i(this.hex,o.vidx),u=t(a,0),c=0;c<u.length;c++)r=a.substr(u[c],2),e=n(a,u[c]),"81"===r&&(l=Te(e),s.push(["MAIL",l])),"82"===r&&(l=Te(e),s.push(["DNS",l])),"84"===r&&(l=Je.hex2dn(e,0),s.push(["DN",l])),"86"===r&&(l=Te(e),s.push(["URI",l])),"87"===r&&(l=Be(e),s.push(["IP",l]));return s},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var n=new Array,i=t(this.hex,e.vidx),r=0;r<i.length;r++)try{var o=Te(l(this.hex,i[r],[0,0,0],"86"));n.push(o)}catch(s){}return n},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var n={ocsp:[],caissuer:[]},i=t(this.hex,e.vidx),r=0;r<i.length;r++){var o=l(this.hex,i[r],[0],"06"),s=l(this.hex,i[r],[1],"86");"2b06010505073001"===o&&n.ocsp.push(Te(s)),"2b06010505073002"===o&&n.caissuer.push(Te(s))}return n},this.getExtCertificatePolicies=function(){var e=this.getExtInfo("certificatePolicies");if(void 0===e)return e;for(var r=i(this.hex,e.vidx),o=[],s=t(r,0),u=0;u<s.length;u++){var c={},d=t(r,s[u]);if(c.id=a(n(r,d[0])),2===d.length)for(var h=t(r,d[1]),p=0;p<h.length;p++){var g=l(r,h[p],[0],"06");"2b06010505070201"===g?c.cps=Te(l(r,h[p],[1])):"2b06010505070202"===g&&(c.unotice=Te(l(r,h[p],[1,0])))}o.push(c)}return o},this.readCertPEM=function(e){this.readCertHex(d(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(c){}},this.getInfo=function(){var e,t,n;if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Ue(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Ue(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var i=0;i<n.length;i++){var l=n[i],r=he.asn1.x509.OID.oid2name(l.oid);""===r&&(r=l.oid);var o="";if(!0===l.critical&&(o="CRITICAL"),e+="  "+r+" "+o+":\n","basicConstraints"===r){var s=this.getExtBasicConstraints();void 0===s.cA?e+="    {}\n":(e+="    cA=true",void 0!==s.pathLen&&(e+=", pathLen="+s.pathLen),e+="\n")}else if("keyUsage"===r)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===r)e+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===r){var a=this.getExtAuthorityKeyIdentifier();void 0!==a.kid&&(e+="    kid="+a.kid+"\n")}else if("extKeyUsage"===r)e+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===r)e+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===r)e+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===r){var u=this.getExtAIAInfo();void 0!==u.ocsp&&(e+="    ocsp: "+u.ocsp.join(",")+"\n"),void 0!==u.caissuer&&(e+="    caissuer: "+u.caissuer.join(",")+"\n")}else if("certificatePolicies"===r)for(var c=this.getExtCertificatePolicies(),d=0;d<c.length;d++)void 0!==c[d].id&&(e+="    policy oid: "+c[d].id+"\n"),void 0!==c[d].cps&&(e+="    cps: "+c[d].cps+"\n")}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Ke.compile("[^0-9a-f]","gi"),oe.prototype.sign=function(e,t){var n=he.crypto.Util.hashString(e,t);return this.signWithMessageHash(n,t)},oe.prototype.signWithMessageHash=function(e,t){var n=le(he.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ge(this.doPrivate(n).toString(16),this.n.bitLength())},oe.prototype.signPSS=function(e,t,n){var i,l=(i=xe(e),he.crypto.Util.hashHex(i,t));return void 0===n&&(n=-1),this.signWithMessageHashPSS(l,t,n)},oe.prototype.signWithMessageHashPSS=function(e,t,n){var i,l=Ae(e),r=l.length,o=this.n.bitLength()-1,s=Math.ceil(o/8),a=function(e){return he.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=r;else if(-2===n)n=s-r-2;else if(n<-2)throw"invalid salt length";if(s<r+n+2)throw"data too long";var u="";n>0&&(u=new Array(n),(new ie).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=Ae(a(xe("\0\0\0\0\0\0\0\0"+l+u))),d=[];for(i=0;i<s-n-r-2;i+=1)d[i]=0;var h=String.fromCharCode.apply(String,d)+""+u,p=We(c,h.length,a),g=[];for(i=0;i<h.length;i+=1)g[i]=h.charCodeAt(i)^p.charCodeAt(i);for(g[0]&=~(65280>>8*s-o&255),i=0;i<r;i++)g.push(c.charCodeAt(i));return g.push(188),Ge(this.doPrivate(new w(g)).toString(16),this.n.bitLength())},oe.prototype.verify=function(e,t){var n=le(t=(t=t.replace(Ke,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var i=ze(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=i.length&&i[1]==he.crypto.Util.hashString(e,i[0])},oe.prototype.verifyWithMessageHash=function(e,t){var n=le(t=(t=t.replace(Ke,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var i=ze(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=i.length&&i[1]==e},oe.prototype.verifyPSS=function(e,t,n,i){var l,r=(l=xe(e),he.crypto.Util.hashHex(l,n));return void 0===i&&(i=-1),this.verifyWithMessageHashPSS(r,t,n,i)},oe.prototype.verifyWithMessageHashPSS=function(e,t,n,i){var l=new w(t,16);if(l.bitLength()>this.n.bitLength())return!1;var r,o=function(e){return he.crypto.Util.hashHex(e,n)},s=Ae(e),a=s.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===i||void 0===i)i=a;else if(-2===i)i=c-a-2;else if(i<-2)throw"invalid salt length";if(c<a+i+2)throw"data too long";var d=this.doPublic(l).toByteArray();for(r=0;r<d.length;r+=1)d[r]&=255;for(;d.length<c;)d.unshift(0);if(188!==d[c-1])throw"encoded message does not end in 0xbc";var h=(d=String.fromCharCode.apply(String,d)).substr(0,c-a-1),p=d.substr(h.length,a),g=65280>>8*c-u&255;if(0!=(h.charCodeAt(0)&g))throw"bits beyond keysize not zero";var f=We(p,h.length,o),m=[];for(r=0;r<h.length;r+=1)m[r]=h.charCodeAt(r)^f.charCodeAt(r);m[0]&=~g;var v=c-a-i-2;for(r=0;r<v;r+=1)if(0!==m[r])throw"leftmost octets not zero";if(1!==m[v])throw"0x01 marker not found";return p===Ae(o(xe("\0\0\0\0\0\0\0\0"+s+String.fromCharCode.apply(String,m.slice(-i)))))},oe.SALT_LEN_HLEN=-1,oe.SALT_LEN_MAX=-2,oe.SALT_LEN_RECOVER=-2,Je.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed DN";for(var n=new Array,i=fe.getChildIdx(e,t),l=0;l<i.length;l++)n.push(Je.hex2rdn(e,i[l]));return"/"+(n=n.map(function(e){return e.replace("/","\\/")})).join("/")},Je.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw"malformed RDN";for(var n=new Array,i=fe.getChildIdx(e,t),l=0;l<i.length;l++)n.push(Je.hex2attrTypeValue(e,i[l]));return(n=n.map(function(e){return e.replace("+","\\+")})).join("+")},Je.hex2attrTypeValue=function(e,t){var n=fe,i=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed attribute type and value";var l=n.getChildIdx(e,t);2!==l.length||e.substr(l[0],2);var r=i(e,l[0]),o=he.asn1.ASN1Util.oidHexToInt(r);return he.asn1.x509.OID.oid2atype(o)+"="+Ae(i(e,l[1]))},Je.getPublicKeyFromCertHex=function(e){var t=new Je;return t.readCertHex(e),t.getPublicKey()},Je.getPublicKeyFromCertPEM=function(e){var t=new Je;return t.readCertPEM(e),t.getPublicKey()},Je.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,i=fe.getVbyList,l={algparam:null};return(t=new Je).readCertPEM(e),n=t.getPublicKeyHex(),l.keyhex=i(n,0,[1],"03").substr(2),l.algoid=i(n,0,[0,0],"06"),"2a8648ce3d0201"===l.algoid&&(l.algparam=i(n,0,[0,1],"06")),l},Je.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==he&&he||(he={}),void 0!==he.jws&&he.jws||(he.jws={}),he.jws.JWS=function(){var e=he.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var i=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==i)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var l=i[1],r=i[2],o=i[3],s=l+"."+r;if(this.parsedJWS={},this.parsedJWS.headB64U=l,this.parsedJWS.payloadB64U=r,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=s,!n){var a=we(o),u=le(a,16);this.parsedJWS.sigvalH=a,this.parsedJWS.sigvalBI=u}var c=ge(l),d=ge(r);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=d,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},he.jws.JWS.sign=function(e,t,n,i,l){var r,o,s,a=he.jws.JWS,u=a.readSafeJSONString,c=a.isSafeJSONString,d=he.crypto,h=d.Mac,p=d.Signature,g=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(r=g.stringify(o=t)),"string"==typeof t){if(!c(r=t))throw"JWS Head is not safe JSON string: "+r;o=u(r)}if(s=n,"object"==typeof n&&(s=g.stringify(n)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,r=g.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var f=null;if(void 0===a.jwsalg2sigalg[e])throw"unsupported alg name: "+e;f=a.jwsalg2sigalg[e];var m=pe(r)+"."+pe(s),v="";if("Hmac"==f.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var y=new h({alg:f,prov:"cryptojs",pass:i});y.updateString(m),v=y.doFinal()}else{var S;-1!=f.indexOf("withECDSA")?((S=new p({alg:f})).init(i,l),S.updateString(m),hASN1Sig=S.sign(),v=he.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=f&&((S=new p({alg:f})).init(i,l),S.updateString(m),v=S.sign())}return m+"."+_e(v)},he.jws.JWS.verify=function(e,t,n){var i,l=he.jws.JWS,r=l.readSafeJSONString,o=he.crypto,s=o.ECDSA,a=o.Mac,u=o.Signature;i=oe;var c=e.split(".");if(3!==c.length)return!1;var d,h=c[0]+"."+c[1],p=we(c[2]),g=r(ge(c[0])),f=null;if(void 0===g.alg)throw"algorithm not specified in header";if(d=(f=g.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+f+":"))throw"algorithm '"+f+"' not accepted in the list";if("none"!=f&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Me.getKey(t)),!("RS"!=d&&"PS"!=d||t instanceof i))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==d&&!(t instanceof s))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===l.jwsalg2sigalg[g.alg])throw"unsupported alg name: "+f;if("none"==(m=l.jwsalg2sigalg[f]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var v=new a({alg:m,pass:t});return v.updateString(h),p==v.doFinal()}if(-1!=m.indexOf("withECDSA")){var y,S=null;try{S=s.concatSigToASN1Sig(p)}catch(b){return!1}return(y=new u({alg:m})).init(t),y.updateString(h),y.verify(S)}return(y=new u({alg:m})).init(t),y.updateString(h),y.verify(p)},he.jws.JWS.parse=function(e){var t,n,i=e.split("."),l={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[1],3==i.length&&(n=i[2]),l.headerObj=he.jws.JWS.readSafeJSONString(ge(i[0])),l.payloadObj=he.jws.JWS.readSafeJSONString(ge(t)),l.headerPP=JSON.stringify(l.headerObj,null,"  "),l.payloadPP=null==l.payloadObj?ge(t):JSON.stringify(l.payloadObj,null,"  "),void 0!==n&&(l.sigHex=we(n)),l},he.jws.JWS.verifyJWT=function(e,t,n){var i=he.jws,l=i.JWS,r=l.readSafeJSONString,o=l.inArray,s=l.includedArray,a=e.split("."),u=a[0],c=a[1],d=(we(a[2]),r(ge(u))),h=r(ge(c));if(void 0===d.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(d.alg,n.alg))return!1;if(void 0!==h.iss&&"object"==typeof n.iss&&!o(h.iss,n.iss))return!1;if(void 0!==h.sub&&"object"==typeof n.sub&&!o(h.sub,n.sub))return!1;if(void 0!==h.aud&&"object"==typeof n.aud)if("string"==typeof h.aud){if(!o(h.aud,n.aud))return!1}else if("object"==typeof h.aud&&!s(h.aud,n.aud))return!1;var p=i.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(p=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+n.gracePeriod<p||void 0!==h.nbf&&"number"==typeof h.nbf&&p<h.nbf-n.gracePeriod||void 0!==h.iat&&"number"==typeof h.iat&&p<h.iat-n.gracePeriod||void 0!==h.jti&&void 0!==n.jti&&h.jti!==n.jti||!l.verify(e,t,n.alg))},he.jws.JWS.includedArray=function(e,t){var n=he.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t))return!1;return!0},he.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},he.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},he.jws.JWS.isSafeJSONString=function(e,t,n){var i=null;try{return"object"!=typeof(i=de(e))?0:i.constructor===Array?0:(t&&(t[n]=i),1)}catch(o){return 0}},he.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=de(e))?null:t.constructor===Array?null:t}catch(o){return null}},he.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},he.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=xe(t);return _e(he.crypto.Util.hashHex(n,"sha256"))},he.jws.IntDate={},he.jws.IntDate.get=function(e){var t=he.jws.IntDate,n=t.getNow,i=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return i(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},he.jws.IntDate.getZulu=function(e){return Oe(e)},he.jws.IntDate.getNow=function(){return~~(new Date/1e3)},he.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},he.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==he&&he||(he={}),void 0!==he.jws&&he.jws||(he.jws={}),he.jws.JWSJS=function(){var e=he.jws.JWS,t=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,n,i){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var r=he.jws.JWS.sign(e,t,this.sPayload,n,i).split(".");this.aHeader.push(r[0]),this.aSignature.push(r[2])}catch(g){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+g}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(2!==n.length)return!1;if(!1===this.verifyNth(t,n[0],n[1]))return!1}return!0},this.verifyNth=function(t,n,i){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var l=this.aHeader[t]+"."+this.sPayload+"."+this.aSignature[t],r=!1;try{r=e.verify(l,n,i)}catch(g){return!1}return r},this.readJWSJS=function(e){if("string"==typeof e){var n=t(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignatures=e.signatures}catch(r){throw"malformed JWS-JS JSON object: "+r}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},t.SecureRandom=ie,t.rng_seed_time=X,t.BigInteger=w,t.RSAKey=oe,t.ECDSA=he.crypto.ECDSA,t.DSA=he.crypto.DSA,t.Signature=he.crypto.Signature,t.MessageDigest=he.crypto.MessageDigest,t.Mac=he.crypto.Mac,t.Cipher=he.crypto.Cipher,t.KEYUTIL=Me,t.ASN1HEX=fe,t.X509=Je,t.CryptoJS=m,t.b64tohex=C,t.b64toBA=_,t.stoBA=me,t.BAtos=ve,t.BAtohex=ye,t.stohex=Se,t.stob64=function(e){return b(Se(e))},t.stob64u=function(e){return be(b(Se(e)))},t.b64utos=function(e){return ve(_(Ce(e)))},t.b64tob64u=be,t.b64utob64=Ce,t.hex2b64=b,t.hextob64u=_e,t.b64utohex=we,t.utf8tob64u=pe,t.b64utoutf8=ge,t.utf8tob64=function(e){return b(De(je(e)))},t.b64toutf8=function(e){return decodeURIComponent(He(C(e)))},t.utf8tohex=Ee,t.hextoutf8=Te,t.hextorstr=Ae,t.rstrtohex=xe,t.hextob64=Ie,t.hextob64nl=Re,t.b64nltohex=Fe,t.hextopem=ke,t.pemtohex=Ne,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),i=0;i<e.length/2;i++)n.setUint8(i,parseInt(e.substr(2*i,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),i=0;i<e.byteLength;i++)t+=("00"+n.getUint8(i).toString(16)).slice(-2);return t},t.zulutomsec=Pe,t.zulutosec=Oe,t.zulutodate=function(e){return new Date(Pe(e))},t.datetozulu=function(e,t,n){var i,l=e.getUTCFullYear();if(t){if(l<1950||2049<l)throw"not proper year for UTCTime: "+l;i=(""+l).slice(-2)}else i=("000"+l).slice(-4);if(i+=("0"+(e.getUTCMonth()+1)).slice(-2),i+=("0"+e.getUTCDate()).slice(-2),i+=("0"+e.getUTCHours()).slice(-2),i+=("0"+e.getUTCMinutes()).slice(-2),i+=("0"+e.getUTCSeconds()).slice(-2),n){var r=e.getUTCMilliseconds();0!==r&&(i+="."+(r=(r=("00"+r).slice(-3)).replace(/0+$/g,"")))}return i+"Z"},t.uricmptohex=De,t.hextouricmp=He,t.ipv6tohex=Le,t.hextoipv6=Ve,t.hextoip=Be,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Le(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var i="";try{for(var l=0;l<4;l++)i+=("0"+parseInt(n[l]).toString(16)).slice(-2);return i}catch(p){throw t}},t.encodeURIComponentAll=je,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Ue,t.intarystrtohex=qe,t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var i=0;i<n;i++)if(e.charCodeAt(i)!=t.charCodeAt(i))return i;return e.length!=t.length?n:-1},t.KJUR=he,t.crypto=he.crypto,t.asn1=he.asn1,t.jws=he.jws,t.lang=he.lang}}]);